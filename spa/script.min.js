"use strict";function _typeof(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(t){return typeof t}:_typeof=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function o(e,t){try{var n=s[e](t),o=n.value}catch(f){i(f);return}n.done?r(o):Promise.resolve(o).then(u,a)}function u(e){o("next",e)}function a(e){o("throw",e)}var s=e.apply(t,n);u()})}}window.exports=window.exports||{};!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/collection/controller.jsx','spa/collection/style.min.css','spa/collection/view.jsx','spa/collectionSingleItem/controller.jsx','spa/collectionSingleItem/style.min.css','spa/collectionSingleItem/view.jsx','spa/connect.jsx','spa/create/controller.jsx','spa/create/style.min.css','spa/create/view.jsx','spa/createCollectionWizard/controller.jsx','spa/createCollectionWizard/style.min.css','spa/createCollectionWizard/view.jsx','spa/createItemWizard/controller.jsx','spa/createItemWizard/createOrEditTraitTypes.jsx','spa/createItemWizard/style.min.css','spa/createItemWizard/view.jsx','spa/editor/controller.jsx','spa/editor/style.min.css','spa/editor/view.jsx','spa/explore/controller.jsx','spa/explore/style.min.css','spa/explore/view.jsx','spa/farm/controller.jsx','spa/farm/style.min.css','spa/farm/view.jsx','spa/farmComponents/farmViewer.jsx','spa/farmComponents/farmViewWrapped.jsx','spa/fullLoader.jsx','spa/imported/farm/CreateOrEditFarmingSetup.jsx','spa/imported/farm/CreateOrEditFarmingSetups.jsx','spa/imported/farm/ExploreFarmingContract.jsx','spa/imported/farm/FarmingComponent.jsx','spa/imported/farm/Hosted.jsx','spa/imported/farm/LockedPositionComponent.jsx','spa/imported/farm/Positions.jsx','spa/imported/farm/SetupComponent.jsx','spa/imported/ReactImporter.jsx','spa/imported/shared/ApproveButton.jsx','spa/imported/shared/Coin.jsx','spa/imported/shared/Input.jsx','spa/imported/shared/Link.jsx','spa/imported/shared/Loading.jsx','spa/imported/shared/TokenInput.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/innerLoader.jsx','spa/item/controller.jsx','spa/item/style.min.css','spa/item/view.jsx','spa/lazyImageLoader.jsx','spa/loader.jsx','spa/menu/controller.jsx','spa/menu/style.min.css','spa/menu/view.jsx','spa/search/controller.jsx','spa/search/style.min.css','spa/search/view.jsx','spa/singleCollection/controller.jsx','spa/singleCollection/style.min.css','spa/singleCollection/view.jsx','spa/successPage/controller.jsx','spa/successPage/style.min.css','spa/successPage/view.jsx','spa/transfer/controller.jsx','spa/transfer/style.min.css','spa/transfer/transferInput.jsx','spa/transfer/view.jsx','spa/wallet/controller.jsx','spa/wallet/style.min.css','spa/wallet/view.jsx','spa/wrap/controller.jsx','spa/wrap/style.min.css','spa/wrap/view.jsx']);var CollectionController=function(t){var n=this;n.view=t};var Collection=React.createClass({displayName:"Collection",requiredModules:["spa/singleCollection","spa/collectionSingleItem","spa/editor"],requiredScripts:["spa/farmComponents/farmViewer.jsx"],getInitialState:function(){return{toggle:"items"}},getDefaultSubscriptions:function(){var t=this;return{"collections/refreshed":function(){return t.forceUpdate()}}},toggle:function e(t){window.preventItem(t);var n=this.state&&this.state.toggle,e=t.currentTarget.dataset.toggle;e=n===e?null:e,this.setState({toggle:e})},onCollectionObjectIds:function(t){this.props.collection.items=this.props.collection.items||{},this.setState({collectionObjectIds:t})},createMoreItems:function(t){window.preventItem(t),this.emit("section/change","spa/create",{create:"CreateItemWizard",collectionAddress:this.props.collection.address})},componentDidMount:function(){var t=this;window.setHomepageLink("?collection="+this.props.collection.address),window.retrieveAndCheckModelCode(this.props.collection).then(function(){return t.forceUpdate()})},render:function(){var t=this;if(window.context.excludingCollections.indexOf(this.props.collection.address)!==-1)return null;var n=[];try{n=this.state.collectionObjectIds.filter(function(e){return window.context.pandorasBox.indexOf(e.address)===-1})}catch(r){}try{n=n.length!==0?n:Object.values(this.props.collection.items).filter(function(e){return window.context.pandorasBox.indexOf(e.address)===-1})}catch(r){}return n=n.map(function(e){return e.objectId}),React.createElement("section",{className:"Pager"},React.createElement("section",{className:"collectionPage"},React.createElement(SingleCollection,{collection:this.props.collection,className:"collectionPageInfo",showLink:!0,showItemsCount:!0,onCollectionObjectIds:this.onCollectionObjectIds}),React.createElement("section",{className:"collectionNav"},React.createElement("ul",null,React.createElement("li",{className:this.state&&this.state.toggle==="items"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"items"},"Items")),React.createElement("li",{className:this.state&&this.state.toggle==="farm"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"farm"},"Farm")),this.props.collection&&(this.props.collection.extensionCode||this.props.collection.modelCode)&&React.createElement("li",{className:this.state&&this.state.toggle==="code"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"code"},"Code")))),this.props.collection&&this.state&&this.state.toggle==="items"&&React.createElement("section",{className:"collectionPageItems"},this.props.collection.isOwner&&React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.createMoreItems},"Add New"),React.createElement("section",{className:"collectionPageItemsOrder"},!this.state.collectionObjectIds&&React.createElement(Loader,null),n.map(function(e){return React.createElement(CollectionSingleItem,{key:e,objectId:e,collection:t.props.collection,miniature:!0})}))),this.state&&this.state.toggle==="farm"&&React.createElement("section",{className:"collectionPageItemsFarm"},React.createElement(FarmViewer,{collectionAddress:this.props.collection.address})),this.state&&this.state.toggle==="code"&&React.createElement("section",{className:"collectionPageItemsCode"},React.createElement("section",null,this.props.collection.extensionCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Extension"),React.createElement(Editor,{readonly:!0,firstCode:this.props.collection.extensionCode})),this.props.collection.modelCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Model"),React.createElement(Editor,{readonly:!0,firstCode:this.props.collection.modelCode}))))))}});var CollectionSingleItemController=function(t){var n=this;n.view=t};var CollectionSingleItem=React.createClass({displayName:"CollectionSingleItem",requiredScripts:["spa/loader.jsx","spa/innerLoader.jsx","spa/lazyImageLoader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return window.loadItemData(undefined,undefined,t)},"ethereum/ping":function(){return window.updateItemDynamicData(undefined,t)}}},onClick:function(t){window.preventItem(t);if(!this.state||!this.state.item)return;this.emit("section/change","spa/item",{collection:this.props.collection,item:this.state.item})},goToCollection:function(t){window.preventItem(t),this.emit("section/change","spa/collection",{collection:this.props.collection})},componentDidMount:function(){window.loadItemData(undefined,undefined,this)},componentDidUpdate:function(){var t=this.state&&this.state.item||this.props.item;if(!t)return;t.dynamicData=t.dynamicData||{},!t.dynamicData.totalSupply&&window.updateItemDynamicData(t,this)},render:function(){var t=this.state&&this.state.item||this.props.item||this.props.collection&&this.props.objectId&&this.props.collection.items&&this.props.collection.items[this.props.objectId];return t&&(t.dynamicData=t.dynamicData||{}),React.createElement("section",{ref:function(n){return n&&(n.style.display=t&&t.dynamicData&&t.dynamicData.totalSupply&&t.dynamicData.totalSupply!=="0"?"inline-block":"none")},className:"collectionPageItem"},React.createElement("a",{href:this.props.readOnly?undefined:"javascript:;",onClick:this.props.readOnly?undefined:this.onClick},React.createElement("figure",{className:"ItemIcon"},React.createElement(LazyImageLoader,{src:window.getElementImage(t)}))),t&&React.createElement("article",{className:"ItemInfo"},!this.props.miniature&&React.createElement("h3",{className:"ItemTitle"},t.name),this.props.miniature&&React.createElement("h3",{className:"ItemTitle"},window.shortenWord(t.name,25)),t.dynamicData&&React.createElement("a",{target:"_blank",href:window.context.uniswapSpawUrlTemplate.format(t.address),className:"ItemPrice"},"🦄 $ ",t.dynamicData.tokenPriceInDollarsOnUniswap?window.formatMoney(t.dynamicData.tokenPriceInDollarsOnUniswap,1):"--"),t.dynamicData&&React.createElement("a",{target:"_blank",href:window.context.openSeaItemLinkTemplate.format(this.props.collection.address,t.objectId),className:"ItemPrice"},"⛵ $ ",t.dynamicData.tokenPriceInDollarsOnOpenSea?window.formatMoney(t.dynamicData.tokenPriceInDollarsOnOpenSea,1):"--"),t.dynamicData&&t.dynamicData.totalSupply&&React.createElement("span",{className:"ItemSupply"},"Supply: ",React.createElement("b",null,window.fromDecimals(t.dynamicData.totalSupply,t.decimals))),this.props.showCollection&&React.createElement("a",{className:"ItemCollectionLink",href:"javascript:;",onClick:this.goToCollection},"from ",React.createElement("b",null,this.props.collection.symbol))))}});var Connect=React.createClass({displayName:"Connect",render:function(){return React.createElement("section",{className:"connectEtherean"},React.createElement("figure",{className:"LoadImg"},React.createElement("img",{src:"assets/img/loadMonolith.png"})),React.createElement("section",{className:"EnterSection"},React.createElement("h3",null,"Welcome Etherean"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:function(){return window.ethereum&&window.ethereum.enable()}},"Connect"),React.createElement("p",null,"You need a ",React.createElement("a",{target:"_blank",href:"https://etherscan.io/directory/Wallet"},"web3-enabler")," to use this Dapp - If you have problems connecting, refresh the page.")))}});var CreateController=function(t){var n=this;n.view=t};var Create=React.createClass({displayName:"Create",requiredModules:["spa/createCollectionWizard","spa/createItemWizard"],getState:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},create:function(t){window.preventItem(t),this.setState({create:t.currentTarget.dataset.create})},componentDidMount:function(){window.setHomepageLink("?section=create");var t=window.consumeAddressBarParam("collectionAddress");t&&this.setState({create:"CreateItemWizard",collectionAddress:t})},render:function(){var t=this.getState();return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"createPage"},!t.create&&React.createElement("section",{className:"createStart"},React.createElement("a",{className:"StartCreate"+(t.create==="CreateCollectionWizard"?" selected":""),href:"javascript:;",onClick:this.create,"data-create":"CreateCollectionWizard"},"Create a New Collection"),React.createElement("a",{className:"StartCreate"+(t.create==="CreateItemWizard"?" selected":""),href:"javascript:;",onClick:this.create,"data-create":"CreateItemWizard"},"Create a New ITEM")),t.create&&React.createElement(t.create,t)))}});function _instanceof(e,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var CreateCollectionWizardController=function(t){var n=this;n.view=t,n.deployingCollectionMessage="2/2 Deploy Collection",n.checkStep0=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.waitForLateInput();case 2:e=n.view.collectionName.value;if(e){s.next=5;break}throw"mmm... Your Collection deserves a name";case 5:t=n.view.collectionSymbol.value;if(t){s.next=8;break}throw"The Collection symbol is important! Dont forget it";case 8:i="",n.view.setState({collectionName:e,collectionSymbol:t,collectionENS:i});case 10:case"end":return s.stop()}},r,this)}));return t}(),n.checkENS=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=n.view.collectionENS.value,t=!1;if(!e){i.next=6;break}return i.next=5,window.blockchainCall(window.ENSController.methods.recordExists,nameHash.hash(nameHash.normalize(e+"."+window.context.ensDomainName)));case 5:t=i.sent;case 6:return i.abrupt("return",[e,t]);case 7:case"end":return i.stop()}},r,this)}));return t}(),n.checkStep1=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.waitForLateInput();case 2:e=n.view.getState();if(e.extension){i.next=5;break}throw"No host! Are you serious?";case 5:if(e.extension==="wallet"){i.next=7;break}return i.abrupt("return");case 7:t=n.view.extensionAddressInput.value;if(!!t&&!!window.isEthereumAddress(t)){i.next=10;break}throw"Extension must be a valid ethereum address!";case 10:n.view.setState({extensionAddress:t});case 11:case"end":return i.stop()}},r,this)}));return t}(),n.checkStep2=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.view.setState({hasDecimals:n.view.hasDecimals.checked});case 1:case"end":return t.stop()}},r,this)}));return t}(),n.checkStep3=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=n.view.getState();if(e.metadataType){s.next=3;break}throw"No metadata! Are you serious?";case 3:if(e.metadataType!=="custom"){s.next=15;break}return s.next=6,window.waitForLateInput();case 6:t=n.view.metadataLinkInput.value,s.t0=!t;if(s.t0){s.next=12;break}return s.next=11,window.checkMetadataLink(t);case 11:s.t0=!s.sent;case 12:if(!s.t0){s.next=14;break}throw"Not a valid metadata link!";case 14:return s.abrupt("return",n.view.setState({metadataLink:t}));case 15:return s.next=17,n.view.getMetadataValues();case 17:return i=s.sent,s.next=20,window.checkMetadataValuesForCollection(i);case 20:if(s.sent){s.next=22;break}throw"Looks like you have insered some ivalid inputs as Metadata";case 22:n.view.setState({metadata:i});case 23:case"end":return s.stop()}},r,this)}));return t}(),n.performDeploySmartContract=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e="";try{e=n.view.editor.editor.getValue()}catch(u){}if(e){o.next=4;break}throw"Please provide the source of the Extension, be a good Etherean!";case 4:return o.next=6,window.SolidityUtilities.compile(e,n.view.editor.solidityVersion.value,200);case 6:t=o.sent;try{i=t[n.view.contractSelect.value]}catch(u){}if(i){o.next=10;break}throw"You must compile and select a valid contract to deploy";case 10:return n.view.setState({loadingMessage:"Deploying Smart Contract"}),o.next=13,window.createContract(i.abi,i.bytecode);case 13:s=o.sent,n.view.setState({code:e,extensionAddress:s.options.address});case 15:case"end":return o.stop()}},r,this)}));return t}(),n.performDeploy=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:e=n.view.getState(),t=e.extensionAddress,x.t0=e.metadata;if(x.t0){x.next=7;break}return x.next=6,window.AJAXRequest(window.formatLink(e.metadataLink));case 6:x.t0=x.sent;case 7:i=x.t0;if(e.extension!=="contract"){x.next=15;break}return x.next=11,window.SolidityUtilities.compare(t,e.code);case 11:s=x.sent;if(!!s&&Object.values(s).length!==0){x.next=14;break}throw"Contract source code and given extension address are not aligned";case 14:e.extension==="contract"&&(i.extensionCode=e.code);case 15:return i.name=e.collectionName,i.symbol=e.collectionSymbol,i.decimals=e.hasDecimals?18:1,i.hasDecimals=e.hasDecimals,i.originalCreator=window.web3.utils.toChecksumAddress(window.walletAddress),i.extensionAddress=t,n.view.setState({loadingMessage:"1/2 - Uploading metadata to IPFS"}),x.next=24,window.uploadMetadata(i);case 24:return o=x.sent,u=["string","string","bool","string","address","bytes"],a=[e.collectionName,e.collectionSymbol,e.hasDecimals,o,t||window.voidEthereumAddress,n.view.extensionAddressPayload&&n.view.extensionAddressPayload.value||"0x"],f=window.web3.utils.sha3("init("+u.join(",")+")"),f=f.substring(0,10)+window.web3.eth.abi.encodeParameters(u,a).substring(2),n.view.setState({loadingMessage:n.deployingCollectionMessage}),x.next=32,window.blockchainCall(window.ethItemOrchestrator.methods.createNative,f,e.collectionENS);case 32:return l=x.sent,n.view.emit("collections/refresh"),c=l.events,_instanceof(c,Array)||(c=Object.values(c)),x.t1=window.web3.utils,x.next=39,window.blockchainCall(window.ethItemOrchestrator.methods.factory);case 39:x.t2=x.sent,h=x.t1.toChecksumAddress.call(x.t1,x.t2),p=window.web3.utils.sha3(Object.entries(window.context.ethItemFactoryEvents).filter(function(e){return e[1]==="NativeABI"}).map(function(e){return e[0]})[0]),v=c,m=Array.isArray(v),g=0,v=m?v:v[Symbol.iterator]();case 43:if(!m){x.next=49;break}if(!(g>=v.length)){x.next=46;break}return x.abrupt("break",62);case 46:y=v[g++],x.next=53;break;case 49:g=v.next();if(!g.done){x.next=52;break}return x.abrupt("break",62);case 52:y=g.value;case 53:b=y;if(window.web3.utils.toChecksumAddress(b.address)===h){x.next=56;break}return x.abrupt("continue",60);case 56:if(b.raw.topics[0]===p){x.next=58;break}return x.abrupt("continue",60);case 58:return d=window.web3.utils.toChecksumAddress(window.web3.eth.abi.decodeParameter("address",b.raw.topics[3])),x.abrupt("break",62);case 60:x.next=43;break;case 62:return x.next=64,window.loadSingleCollection(d);case 64:return w=x.sent,x.next=67,window.AJAXRequest(window.formatLink(o));case 67:E=x.sent,S={name:E.name,image:E.image,external_url:E.external_url,collection:w,collectionAddress:d},S.created="collection",n.view.emit("section/change","spa/successPage",S);case 71:case"end":return x.stop()}},r,this)}));return t}()};var CreateCollectionWizard=React.createClass({displayName:"CreateCollectionWizard",requiredScripts:["spa/innerLoader.jsx","spa/fullLoader.jsx"],requiredModules:["spa/editor"],getDefaultSubscriptions:function(){var t=this;return{"smartContract/compilation":this.onSmartContract,"smartContract/compiling":function(){return t.compileButton.innerHTML="Compiling..."}}},compile:function(t){window.preventItem(t),this.contractSelect.innerHTML="",this.emit("editor/compile")},onSmartContract:function(t){this.compileButton.innerHTML="Compile",this.contractSelect.innerHTML="";if(!t)return;var n=[],r=Object.keys(t);for(var i=0;i<r.length;i++){var s=r[i],o=t[s];if(o.bytecode==="0x")continue;n.push(s)}this.contractSelect.innerHTML=n.map(function(e){return'<option value="'+e+'">'+e+"</option>"}).join("")},getState:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},onExtension:function(t){this.setState({extension:t.currentTarget.value,extensionAddress:null})},onMetadataType:function(t){this.setState({metadataType:t.currentTarget.value,metadataLink:null,metadata:null})},onENSChange:function(t){window.preventItem(t);var n=this,r=function(t){var r="";t[0]&&(r="&#"+(t[1]?"9940":"9989")+";"),n.result.innerHTML=r};n.controller.checkENS().then(r)},"catch":function(t){if(!t)return;var n=t.message||t;if(n.toLowerCase().indexOf("user denied")!==-1)return;return alert(n)},next:function(t){window.preventItem(t);if(t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var n=this.getState().step||0,r=n+1;if(!this["renderStep"+r]||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var i=this,s=function(){i.setState({step:r})};try{var o=this.controller["checkStep"+n]&&this.controller["checkStep"+n]();if(!o||!o.then)return s();o.then(s).catch(this.catch)}catch(t){this.catch(t)}},back:function(t){window.preventItem(t);var n=(this.getState().step||0)-1;if(n<0||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;this.setState({step:n})},getMetadataValues:function(){return window.getData(this.metadataPage)},renderMetadata:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"A description of the collection")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{id:"discussionUri",type:"text"})),React.createElement("span",{className:"ExplBoom"},"A link to a social hub and/or discussion channel for the collection (if any)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"DNS Link"),React.createElement("input",{id:"externalDNS",type:"text"})),React.createElement("span",{className:"ExplBoom"},"A link to the official website of this project (if any)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"ENS Link"),React.createElement("input",{id:"externalENS",type:"text"})),React.createElement("span",{className:"ExplBoom"},"An ENS link to the official website of this project (if any)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Repo Link"),React.createElement("input",{id:"repoUri",type:"text"})),React.createElement("span",{className:"ExplBoom"},"A link to the official repo of this project (if any)")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Cover (Regular)",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 350)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Cover (High Quality)"),React.createElement("input",{id:"image_data",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the image")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color behind your cover used in most dApps, if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence File"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf,.html,.md,.txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represents the legal licence of all of ITEMs in the collection (if any). Accepted file types: .pdf, .html, .md, .txt"))))},renderStep0:function(){var t=this,n=this.getState();return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Let’s Start With the Basics"),React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Name"),React.createElement("input",{type:"text",ref:function(r){return(t.collectionName=r)&&(r.value=n.collectionName||"")}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Symbol"),React.createElement("input",{type:"text",ref:function(r){return(t.collectionSymbol=r)&&(r.value=n.collectionSymbol||"")}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT"))))},renderStep1:function(){var t=this,n=this.getState(),r=n.extension;return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Who Is the Host?"),React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing"},React.createElement("span",{className:"createDescriptonX"},"The host of the collection has the ability to mint ITEMs and update the Metadata info. It can be a wallet, or a smart contract with custom rules, which you can deploy during this setup.",React.createElement("a",{href:"https://ethitem.com/doc.html#4",target:"_blank"},"More info"))),React.createElement("section",{className:"FormCreateThing"},React.createElement("select",{className:"",onChange:this.onExtension},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"wallet",selected:r==="wallet"},"Wallet"),React.createElement("option",{value:"contract",selected:r==="contract"},"Smart Contract"))),r==="wallet"&&React.createElement("section",{className:"FormCreateThing"},React.createElement("input",{type:"text",placeholder:"address",ref:function(n){return t.extensionAddressInput=n}}))),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT")))},renderStep2:function(){var t=this,n=this.getState(),r=n.extension;return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Granularity"),React.createElement("section",{className:"FormCreateThing"},React.createElement("label",null,React.createElement("p",null,"Decimals"),React.createElement("input",{type:"checkbox",ref:function(r){return(t.hasDecimals=r)&&(r.checked=n.hasDecimals)}})),React.createElement("span",{className:"ExplBoom"},"By selecting this option, all of the Items in this Collection will have 18 decimals in both implementations (Recommended only if you need decimals in the NFT implementation too. For example to realize special functions like in-game consumable items)")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT")))},renderStep3:function(){var t=this,n=this.getState(),r=n.metadataType;return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Metadata"),React.createElement("select",{className:"",onChange:this.onMetadataType},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"basic",selected:r==="basic"},"Basic"),React.createElement("option",{value:"custom",selected:r==="custom"},"Custom")),r==="basic"&&this.renderMetadata(),r==="custom"&&React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Metadata Link"),React.createElement("input",{type:"text",ref:function(n){return(t.metadataLinkInput=n)&&(n.value=t.state&&t.state.metadataLink||"")}}),React.createElement("span",{className:"ExplBoom"},"The metadata file is a JSON standard file containing all of the info and links to the file of the ITEM. ",React.createElement("a",{href:"/doc.html#6",target:"_blank"},"Here")," You can find a step by step guide to build your json file correctly. | Link must be expressed in ipfs://ipfs/0000000000..")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT")))},renderStep4:function(){var t=this,n=this.getState();if(n.loadingMessage===this.controller.deployingCollectionMessage)return React.createElement(FullLoader,null);var r=n.extension;return React.createElement("section",{className:"createCollection"},r==="contract"&&React.createElement("h2",null,"Extension Contract"),r!=="contract"&&React.createElement("h2",null,"Deploy"),r==="contract"&&React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing FormCreateThingBig"},React.createElement(Editor,{ref:function(n){return t.editor=n}}),React.createElement("button",{className:"BTNweirdo",ref:function(n){return t.compileButton=n},onClick:this.compile},"Compile"),React.createElement("select",{ref:function(n){return t.contractSelect=n}}),React.createElement("section",{className:"FormCreateThing"},React.createElement("input",{className:"payloadThing",type:"text",placeholder:"Payload if any",ref:function(n){return t.extensionAddressPayload=n}})))),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB"+(this.state&&this.state.performing?" disabled":""),href:"javascript:;",onClick:this.back},"BACK"),this.state&&!this.state.performing&&!this.state.extensionAddress&&React.createElement("a",{href:"javascript:;","data-action":"deploySmartContract",className:"SuperActionBTN",onClick:window.perform},"DEPLOY SMART CONTRACT"),this.state&&!this.state.performing&&this.state.extensionAddress&&React.createElement("a",{href:"javascript:;","data-action":"deploy",className:"SuperActionBTN",onClick:window.perform},"CREATE COLLECTION"),this.state&&this.state.performing&&React.createElement(InnerLoader,null),this.state&&this.state.loadingMessage&&React.createElement("span",null,this.state.loadingMessage),React.createElement("p",{className:"risksDisc"},"ETHITEM is a general purposes protocol to build ITEMs on top of Ethereum, anyone can do it! By deploying you're taking the full responsability for your creation. Do it at your own risk.")))},render:function(){return this["renderStep"+(this.getState().step||0)]()}});function _instanceof(e,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var CreateItemWizardController=function(t){var n=this;n.view=t,n.newERC1155CreatedEvent="NewERC1155Created(address,uint256,address,address)",n.deployingItemMessage="Deploying Item",n.onTokenAddressChange=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:i.prev=0,e=window.web3.utils.toChecksumAddress(e),i.next=7;break;case 4:return i.prev=4,i.t0=i["catch"](0),i.abrupt("return",n.view.setState({selectedToken:null}));case 7:return i.next=9,window.loadSingleCollection(e);case 9:return r=i.sent,i.prev=10,i.next=13,window.blockchainCall(r.contract.methods.name);case 13:r.name=i.sent,i.next=18;break;case 16:i.prev=16,i.t1=i["catch"](10);case 18:return i.prev=18,i.next=21,window.blockchainCall(r.contract.methods.symbol);case 21:r.symbol=i.sent,i.next=26;break;case 24:i.prev=24,i.t2=i["catch"](18);case 26:return i.prev=26,i.next=29,window.blockchainCall(r.contract.methods.decimals);case 29:r.decimals=i.sent,i.next=34;break;case 32:i.prev=32,i.t3=i["catch"](26);case 34:return i.prev=34,i.t4=window.web3.utils,i.next=38,window.blockchainCall(r.contract.methods.extension);case 38:i.t5=i.sent,r.extension=i.t4.toChecksumAddress.call(i.t4,i.t5),i.next=44;break;case 42:i.prev=42,i.t6=i["catch"](34);case 44:return i.prev=44,i.next=47,window.blockchainCall(r.contract.methods.canMint,window.walletAddress);case 47:r.canMint=i.sent,i.next=52;break;case 50:i.prev=50,i.t7=i["catch"](44);case 52:return i.abrupt("return",n.view.setState({selectedToken:r}));case 53:case"end":return i.stop()}},t,this,[[0,4],[10,16],[18,24],[26,32],[34,42],[44,50]])}));return function(t){return e.apply(this,arguments)}}(),n.checkStep1=function(){var t=n.view.itemName.value,r=n.view.itemSymbol.value,i=n.view.itemSupply.value,s=n.view.itemMintable.checked;if(window.asNumber(i)<=0)throw"Supply must be a number greater than 0";n.view.setState({itemName:t,itemSymbol:r,itemSupply:i,itemMintable:s})},n.checkStep2=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.checkMetadata();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},r,this)}));return t}(),n.toDecimals=function(t,n){if(!t||!n)return;return t.decimals&&window.asNumber(t.decimals)>1&&(n=window.toDecimals(n,t.decimals)),n.split(",").join("")},n.checkMetadata=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=n.view.getState();if(e.metadataType){s.next=3;break}throw"No metadata! Are you serious?";case 3:if(e.metadataType!=="custom"){s.next=15;break}return s.next=6,window.waitForLateInput();case 6:t=n.view.metadataLinkInput.value,s.t0=!t;if(s.t0){s.next=12;break}return s.next=11,window.checkMetadataLink(t,!0);case 11:s.t0=!s.sent;case 12:if(!s.t0){s.next=14;break}throw"Not a valid metadata link!";case 14:return s.abrupt("return",n.view.setState({metadataLink:t}));case 15:return s.next=17,n.view.getMetadataValues();case 17:return i=s.sent,s.next=20,window.checkMetadataValuesForItem(i);case 20:if(s.sent){s.next=22;break}throw"Looks like you have insered some ivalid inputs as Metadata";case 22:n.view.setState({metadata:i});case 23:case"end":return s.stop()}},r,this)}));return t}(),n.performDeploy=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,n.checkMetadata();case 2:e=n.view.getState(),t=n.toDecimals(e.selectedToken,e.itemSupply);if(!(parseInt(t)<=0)){y.next=6;break}throw"Supply must be greater than 0";case 6:n.view.setState({loadingMessage:"Uploading metadata"}),y.t0=e.metadataLink;if(y.t0){y.next=12;break}return y.next=11,window.uploadMetadata(e.metadata);case 11:y.t0=y.sent;case 12:return i=y.t0,n.view.setState({loadingMessage:n.deployingItemMessage}),y.next=16,window.blockchainCall(e.selectedToken.contract.methods.mint,t,e.itemName,e.itemSymbol,i,e.itemMintable);case 16:s=y.sent,n.view.emit("collections/refresh"),o=s.events,_instanceof(o,Array)||(o=Object.values(o)),u=window.web3.utils.toChecksumAddress(e.selectedToken.contract.options.address),a=[window.web3.utils.sha3("NewItem(uint256,address)"),window.web3.utils.sha3("Mint(uint256,address,uint256)")],l=o,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 23:if(!c){y.next=29;break}if(!(h>=l.length)){y.next=26;break}return y.abrupt("break",42);case 26:p=l[h++],y.next=33;break;case 29:h=l.next();if(!h.done){y.next=32;break}return y.abrupt("break",42);case 32:p=h.value;case 33:d=p;if(window.web3.utils.toChecksumAddress(d.address)===u){y.next=36;break}return y.abrupt("continue",40);case 36:if(a.indexOf(d.raw.topics[0])!==-1){y.next=38;break}return y.abrupt("continue",40);case 38:try{f=web3.eth.abi.decodeParameter("uint256",d.raw.topics[1])}catch(b){f=web3.eth.abi.decodeParameters(["uint256","address","uint256"],d.raw.data)[0]}return y.abrupt("break",42);case 40:y.next=23;break;case 42:return y.next=44,window.loadItemData({objectId:f,collection:e.selectedToken});case 44:return v=y.sent,y.next=47,window.AJAXRequest(window.formatLink(i));case 47:m=y.sent,g={name:m.name,image:m.image,external_url:m.external_url,collection:e.selectedToken,collectionAddress:u,item:v},g.created="item",n.view.emit("section/change","spa/successPage",g);case 51:case"end":return y.stop()}},r,this)}));return t}()};function CreateOrEditTraitTypes(e){function v(e){window.preventItem(e);var t=p.map(function(e){return e.split(" ").join("").toLowerCase()});t.push.apply(t,d.map(function(e){return e.split(" ").join("").toLowerCase()}));if(t.indexOf(c.split(" ").join("").toLowerCase())!==-1)return;var n=a.map(function(e){return e});n.push({trait_type:c,value:""}),f(n),h("")}function m(e){window.preventItem(e);var t=e.currentTarget.dataset.key,n=a.indexOf(a.filter(function(e){return e.trait_type===t})),r=a.map(function(e){return e});r.splice(n,1),f(r)}function g(e){try{return a.filter(function(t){return t.trait_type===e})[0].value}catch(t){return""}}function y(e){window.preventItem(e);var t=e.currentTarget.dataset.key,n=e.currentTarget.value,r=a.map(function(e){return e});try{r.filter(function(e){return e.trait_type===t})[0].value=n}catch(e){r.push({trait_type:t,value:n})}f(r)}function b(e,t){return React.createElement("section",{className:"MetaImputThings",key:e},t&&React.createElement("a",{className:"RemoveAthing",href:"javascript:;","data-key":e,onClick:m},"X"),React.createElement("label",{className:"createWhat"},React.createElement("p",null,e),React.createElement("input",{className:"ITEMURLINPUT",id:e.split(" ").join(""),"data-key":e,type:"text",value:g(e),onChange:y})))}function w(){return React.createElement("section",{className:"NewTrait"},React.createElement("h6",null,"Add Custom Trait"),React.createElement("input",{className:"ITEMURLINPUT",type:"text",value:c,onChange:function(t){return h(window.preventItem(t).currentTarget.value)}}),React.createElement("a",{className:"AddAthing",href:"javascript:;",onClick:v},"Add"))}var t=e.metadataType,n=e.state,r=e.onAttributes,i=(0,_react.useState)(window.traitTypesTemplates),s=i[0],o=i[1],u=(0,_react.useState)(n.attributes||[]),a=u[0],f=u[1],l=(0,_react.useState)(""),c=l[0],h=l[1];window.traitTypesTemplates=window.traitTypesTemplates||s,(0,_react.useEffect)(function(){!window.traitTypesTemplates&&window.AJAXRequest("data/traitTypesTemplates.json").then(o)},[]),(0,_react.useEffect)(function(){r&&r(a)},[a]);var p=[];s&&(p.push.apply(p,s.global),p.push.apply(p,s[t]));var d=a.filter(function(e){return e.trait_type&&p.indexOf(e.trait_type)===-1}).map(function(e){return e.trait_type});return s?React.createElement("section",{className:"MetaDataThings"},React.createElement("section",{className:"spacialImputs"},React.createElement("h3",null,"Traits"),p.map(function(e){return b(e)}),d.map(function(e){return b(e,!0)}),w())):React.createElement(InnerLoader,null)}var _react=require("react");var CreateItemWizard=React.createClass({displayName:"CreateItemWizard",requiredScripts:["spa/innerLoader.jsx","spa/fullLoader.jsx","spa/createItemWizard/createOrEditTraitTypes.jsx"],getState:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},onFileOrFolder:function(t){window.preventItem(t);var n=this;this.setState({fileOrFolder:t.currentTarget.value},function(){n.fileOrFolder.directory=n.state.fileOrFolder==="folder",n.fileOrFolder.webkitdirectory=n.state.fileOrFolder==="folder"})},onChange:function(t){window.preventItem(t);if(this.state&&this.state.performing)return;var n=t.currentTarget.value,r=this[t.currentTarget.dataset.action],i=t.currentTarget.dataset.action+"Timeout";this[i]&&window.clearTimeout(this[i]),this[i]=setTimeout(function(){return r(n)},window.context.inputTimeout)},onTokenAddressChange:function(t){this.controller.onTokenAddressChange(t)},onMetadataType:function(t){this.setState({metadataType:t.currentTarget.value,metadataLink:null,metadata:null})},"catch":function(t){if(!t)return;var n=t.message||t;if(n.toLowerCase().indexOf("user denied")!==-1)return;return alert(n)},next:function(t){window.preventItem(t);if(t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var n=this.getState().step||0,r=n+1;if(!this["renderStep"+r]||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var i=this,s=function(){i.setState({step:r})};try{var o=this.controller["checkStep"+n]&&this.controller["checkStep"+n]();if(!o||!o.then)return s();o.then(s).catch(this.catch)}catch(t){this.catch(t)}},back:function(t){window.preventItem(t);var n=(this.getState().step||0)-1;if(n<0||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;this.setState({step:n})},getMetadataValues:function(){var t=this.metadataPage?window.getData(this.metadataPage):this.state.metadata;return t.name=this.state.itemName,t.symbol=this.state.itemSymbol,t.attributes=this.state.attributes||[],t},onAttributes:function(t){this.setState({attributes:t})},getOwnedList:function(){var t=window.getState(this);return t&&t.collections&&t.collections.filter(function(e){return e.isOwner})||undefined},selectCollection:function(t){window.preventItem(t);var n=t.currentTarget.dataset.address;this.tokenAddressInput.value=n;var r=this;this.controller.onTokenAddressChange(this.tokenAddressInput.value=n).then(function(){return r.setState({step:1})})},renderMetadataBasic:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Item")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"ITEM Img content HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the image")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4, mp3 or gif file as a fancy animated version of your ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"}))),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any)."),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence File"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the ITEM (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataArt:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Artwork Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Artwork")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Artwork Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Artwork Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Artwork")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4 file as a fancy animated version of your Artwork")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Professional File:"),React.createElement("input",{id:"pro_url",type:"file"})),React.createElement("span",{className:"ExplBoom"},"Enter the professional/Raw file version of the Artwork (.psd, .ai...)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Artwork Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataMovie:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Movie / Video Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Movie / Video")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Movie / Video Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Movie / Video Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Artwork")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Movie / Video:"),React.createElement("input",{id:"animation_url",type:"file",accept:".mp4"})),React.createElement("span",{className:"ExplBoom"},"The mp4 file of the Movie / Video")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Specials:"),React.createElement("input",{id:"specials_url",type:"file",accept:".mp4"})),React.createElement("span",{className:"ExplBoom"},"The mp4 file of the making of or extra content from the Movie / Video")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Soundtrack File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="soundtrack_folder"?"soundtrack_folder":"soundtrack_file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The official soundtrack of this Movie / Video via an mp3 file or a folder (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Movie / Video Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataSong:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Song Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Song")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Song Cover",React.createElement("b",null,"*"),":"),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Song Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Artwork")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Song",React.createElement("b",null,"*"),":"),React.createElement("input",{id:"animation_url",type:"file",accept:".mp4, .mp3"})),React.createElement("span",{className:"ExplBoom"},"The mp3 file of the Song or the mp4 file of the music video")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Specials:"),React.createElement("input",{id:"specials_url",type:"file",accept:".mp4"})),React.createElement("span",{className:"ExplBoom"},"The mp4 file of the making of or extra content from the Song")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Song Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Song (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataGamecard:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Trading / Collectible Card Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Trading / Collectible Card")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Card Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Card Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Artwork")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4, mp3 or gif file as a fancy animated version of your Card")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Trading / Collectible Card Powers and rules",React.createElement("b",null,"*")),React.createElement("textarea",{id:"card_rules","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of rules and power involved in this Trading / Collectible Card")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Card Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataVoxel:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Voxel Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Voxel")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Voxel Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Voxel Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Voxel Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4, mp3 or gif file as a fancy animated version of your Voxel Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Voxel File:",React.createElement("b",null,"*")),React.createElement("input",{"data-mandatory":"true",id:"voxel_url",type:"file",accept:".vox"})),React.createElement("span",{className:"ExplBoom"},"The original .vox file")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Voxel Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataLand:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Virtual Land Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Virtual Land")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Virtual Land Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Virtual Land Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Virtual Land Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4, mp3 or gif file as a fancy animated version of your Virtual Land Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Virtual Land File:",React.createElement("b",null,"*")),React.createElement("input",{"data-mandatory":"true",id:"voxel_url",type:"file",accept:".vox"})),React.createElement("span",{className:"ExplBoom"},"The original .vox file")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Virtual Land Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadata3d:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"3D Printable File Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome 3D Printable File")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"3D Printable File Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"3D Printable File Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the 3D Printable File Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4, mp3 or gif file as a fancy animated version of your 3D Printable File Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"3D Printable File:",React.createElement("b",null,"*")),React.createElement("input",{"data-mandatory":"true",id:"voxel_url",type:"file",accept:".WRL, .AMF, .STL, .OBJ, .FBX, .3DS, .IGES, .STEP, .vox"})),React.createElement("span",{className:"ExplBoom"},"The original .WRL, .AMF, .STL, .OBJ, .FBX, .3DS, .IGES, .vox or .STEP 3D Printable File")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"3D Printable Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataGameitem:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Game Item Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome Game Item")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Game Item Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Game Item Cover HD"),React.createElement("input",{id:"image_data",type:"file",accept:".png, .jpeg, .gif"})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the Game Item Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Animation:"),React.createElement("input",{id:"animation_url",type:"file",accept:"."+Object.keys(window.context.supportedAnimationFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"An mp4, mp3 or gif file as a fancy animated version of your Game Item Cover")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Game Item File:",React.createElement("b",null,"*")),React.createElement("input",{"data-mandatory":"true",id:"gameitem_url",type:"file"})),React.createElement("span",{className:"ExplBoom"},"The original Game Item File")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Game Item Extra File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any).")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataDocument:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Document Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this Document")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Document Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"Document File or Folder ",React.createElement("b",null,"*")),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{"data-mandatory":"true",id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"})),React.createElement("span",{className:"ExplBoom"},"The file or folder of the Document.")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderMetadataToken:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Token Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this Document")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Token Cover",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at max 5mb lenght, due to users experience in IPFS download speed limitations (recommended size 350 x 200, 350 x 350 or 350 x 500)")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the Artwork (if Any). Accepted file: .pdf, .html, .md, .txt")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"discussion",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official social media discussion of the ITEM")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Website Link"),React.createElement("input",{className:"ITEMURLINPUT",id:"website",type:"url"})),React.createElement("span",{className:"ExplBoom"},"The link to the official website of the ITEM"))))},renderStep0:function(){var t=this;if(!this.state&&this.props.collectionAddress)return React.createElement(FullLoader,null);var n=this.getState(),r=this.getOwnedList();return React.createElement("section",{className:"createITEM"},React.createElement("section",{className:"FormCreateThing"},React.createElement("h2",null,"Collection:"),r&&r.length>0&&React.createElement("ul",{className:"SelectorToGo"},r.map(function(e){return React.createElement("li",{key:e.address},React.createElement("a",{href:"javascript:;","data-address":e.address,onClick:t.selectCollection},window.shortenWord(e.name,25)," ",e.symbol&&e.name?" ("+window.shortenWord(e.symbol,10)+")":window.shortenWord(e.symbol,10)))})),React.createElement("input",{ref:function(r){return(t.tokenAddressInput=r)&&(r.value=n.selectedToken&&n.selectedToken.address||"")},className:"addressWrapSelector",type:"text",placeholder:"Token address","data-action":"onTokenAddressChange",onKeyUp:this.onChange,onChange:this.onChange})),n.selectedToken&&React.createElement("section",{className:"CollectionLoaded"},React.createElement("p",null,n.selectedToken.name," ",React.createElement("span",null," (",n.selectedToken.symbol,")")),!n.selectedToken.canMint&&React.createElement("span",null,"This Collection cannot be extended any more")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN"+(n.selectedToken&&n.selectedToken.canMint?"":" disabled"),href:"javascript:;",onClick:this.next},"NEXT")))},renderStep1:function(){var t=this;return React.createElement("section",{className:"createITEM"},React.createElement("h2",null,"Let’s Start With the Basics"),React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Name"),React.createElement("input",{type:"text",ref:function(n){return t.itemName=n}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Symbol"),React.createElement("input",{type:"text",ref:function(n){return(t.itemSymbol=n)&&(n.value=t.state.itemSymbol||t.state.selectedToken.symbol)}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Supply"),React.createElement("input",{type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",ref:function(n){return(t.itemSupply=n)&&(n.value=t.state.itemSupply||"")}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("label",null,React.createElement("p",null,"You'll maintain the Host rights? (Mint and Metadata Edit)"),React.createElement("input",{type:"checkbox",ref:function(n){return(t.itemMintable=n)&&(n.checked=t.state.itemMintable)}}))),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT"))))},renderStep2:function(){var t=this,n=this.getState();if(n.loadingMessage===this.controller.deployingItemMessage)return React.createElement(FullLoader,null);var r=n.metadataType;return React.createElement("section",{className:"createITEM"},React.createElement("section",{className:"FormCreate"},React.createElement("h2",null,"Metadata"),React.createElement("select",{className:"",onChange:this.onMetadataType},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"basic",selected:r==="basic"},"Basic"),React.createElement("option",{value:"art",selected:r==="art"},"Crypto Art"),React.createElement("option",{value:"movie",selected:r==="movie"},"Movie / Video"),React.createElement("option",{value:"song",selected:r==="song"},"Song"),React.createElement("option",{value:"gameitem",selected:r==="gameitem"},"Game Item"),React.createElement("option",{value:"gamecard",selected:r==="gamecard"},"Trading / Collectible Card"),React.createElement("option",{value:"Voxel",selected:r==="Voxel"},"Voxel"),React.createElement("option",{value:"land",selected:r==="land"},"Virtual Land"),React.createElement("option",{value:"3d",selected:r==="3d"},"3D Printable File"),React.createElement("option",{value:"document",selected:r==="document"},"Document"),React.createElement("option",{value:"token",selected:r==="token"},"Token"),React.createElement("option",{value:"custom",selected:r==="custom"},"Custom")),r==="basic"&&this.renderMetadataBasic(),r==="art"&&this.renderMetadataArt(),r==="movie"&&this.renderMetadataMovie(),r==="song"&&this.renderMetadataSong(),r==="Voxel"&&this.renderMetadataVoxel(),r==="land"&&this.renderMetadataLand(),r==="3d"&&this.renderMetadata3d(),r==="gameitem"&&this.renderMetadataGameitem(),r==="gamecard"&&this.renderMetadataGamecard(),r==="document"&&this.renderMetadataDocument(),r==="token"&&this.renderMetadataToken(),r==="custom"&&React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Metadata Link"),React.createElement("input",{type:"text",ref:function(n){return(t.metadataLinkInput=n)&&t.state&&t.state.metadataLink&&(n.value=t.state&&t.state.metadataLink)}}),React.createElement("span",{className:"ExplBoom"},"The metadata file is a Json standard file containing all of the info and links to the file of the ITEM. ",React.createElement("a",{href:"/doc.html#6",target:"_blank"},"here")," You can find a step by step guide to build your json file correctly. | Link must be expressed in ipfs://ipfs/0000000000..")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB"+(this.state&&this.state.performing?" disabled":""),href:"javascript:;",onClick:this.back},"BACK"),r==="custom"&&(!this.state||this.state.performing!=="deploy")&&React.createElement("a",{href:"javascript:;","data-action":"deploy",className:"SuperActionBTN",onClick:window.perform},"DEPLOY"),r!=="custom"&&React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT"),this.state&&this.state.performing==="deploy"&&React.createElement(InnerLoader,null),this.state&&this.state.loadingMessage&&React.createElement("span",null,this.state.loadingMessage))))},renderStep3:function(){var t=this.getState();if(t.loadingMessage===this.controller.deployingItemMessage)return React.createElement(FullLoader,null);var n=t.metadataType;return React.createElement("section",{className:"createITEM"},React.createElement("section",{className:"FormCreate"},React.createElement(CreateOrEditTraitTypes,{state:t,metadataType:n,onAttributes:this.onAttributes}),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB"+(this.state&&this.state.performing?" disabled":""),href:"javascript:;",onClick:this.back},"BACK"),(!this.state||this.state.performing!=="deploy")&&React.createElement("a",{href:"javascript:;","data-action":"deploy",className:"SuperActionBTN",onClick:window.perform},"DEPLOY"),this.state&&this.state.performing==="deploy"&&React.createElement(InnerLoader,null),this.state&&this.state.loadingMessage&&React.createElement("span",null,this.state.loadingMessage))))},componentDidMount:function(){var t=this;this.props.collectionAddress&&this.controller.onTokenAddressChange(this.props.collectionAddress).then(function(){return t.setState({step:1})})},render:function(){return this["renderStep"+(this.getState().step||0)]()}});var EditorController=function(t){var n=this;n.view=t,n.loadContent=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n.view.emit("message","Retrieving Content Token..."),u.next=4,window.loadContent(e,t);case 4:s=u.sent,!n.view.props.secondCode&&!n.view.props.second&&n.view.editor.setValue(s);if(n.view.props.secondCode||n.view.props.second)o=n.view.editor.getModel(),o[i?"modified":"original"]=monaco.editor.createModel(s,"sol"),n.view.editor.setModel(o);n.view.contentTokenInput&&setTimeout(function(){return n.view.contentTokenInput.value=e}),n.view.emit("message"),u.next=14;break;case 11:u.prev=11,u.t0=u["catch"](0),n.view.emit("message",u.t0.message||u.t0,"error");case 14:case"end":return u.stop()}},r,this,[[0,11]])}));return t}(),n.tryCompile=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.view.emit("smartContract/compilation",undefined),n.view.emit("smartContract/compiling"),a.prev=2,i=n.view.editor.getValue(),s=window.extractComment(i),Object.keys(s).map(function(e){return n.view.emit("comment/changed",s[e],e)});if(i){a.next=15;break}if(!window.isEthereumAddress(n.view.functionalityAddressValue)){a.next=13;break}return t!==!0&&n.view.emit("message","Retrieving Solidity version..."),a.next=11,window.SolidityUtilities.getSolcVersion(n.view.functionalityAddressValue);case 11:n.view.solidityVersion.value=a.sent,t!==!0&&n.view.emit("message");case 13:return n.view.emit("smartContract/compilation",undefined),a.abrupt("return");case 15:if(!window.getCompleteCode){a.next=21;break}return a.next=18,window.getCompleteCode(i);case 18:a.t0=a.sent,a.next=22;break;case 21:a.t0=i;case 22:i=a.t0;if(window.isEthereumAddress(n.view.functionalityAddressValue)){a.next=31;break}return t!==!0&&n.view.emit("message","Compiling SmartContract..."),a.next=27,SolidityUtilities.compile(i,n.view.solidityVersion.value,e);case 27:return o=a.sent,t!==!0&&n.view.emit("message"),n.view.emit("smartContract/compilation",o),a.abrupt("return",o);case 31:return t!==!0&&n.view.emit("message","Comparing SmartContracts..."),a.next=34,window.SolidityUtilities.compare(n.view.functionalityAddressValue,i);case 34:return u=a.sent,u&&(n.view.solidityVersion.value=u.solcVersion),t!==!0&&n.view.emit("message"),n.view.emit("smartContract/compilation",u),a.abrupt("return",u);case 41:a.prev=41,a.t1=a["catch"](2),n.view.emit("smartContract/compilation",undefined),t!==!0&&n.view.emit("message",a.t1.message||a.t1,"error");case 45:case"end":return a.stop()}},r,this,[[2,41]])}));return t}()};var Editor=React.createClass({displayName:"Editor",requiredScripts:["assets/plugins/monaco.editor/monaco.editor.min.js"],getDefaultSubscriptions:function(){return{"solc/version/change":this.changeSolcVersion,"editor/compile":this.tryCompile}},onEditor:function(t){var n=this,r=this;if(!window.monaco)return setTimeout(function(){return r.onEditor(t)},300);t&&(r.props.secondCode===undefined||r.props.secondCode===null)&&(r.props.second===undefined||r.props.second===null)&&(r.editor=window.monaco.editor.create(t,{language:r.props.lang||"sol",theme:"vs-light",minimap:{enabled:!1},readOnly:r.props.readonly==="true"||r.props.firstCode!==undefined&&r.props.firstCode!==null||r.props.first!==undefined&&r.props.first!==null||r.props.link!==undefined&&r.props.link!==null,value:r.props.firstCode||""})).onDidChangeModelContent(function(){try{r.contentTokenInput&&(r.contentTokenInput.value=""),delete r.contentTokenValue}catch(e){}r.loadContentButton&&$(r.loadContentButton).removeClass("disabled");if(r.oneWay){delete r.oneWay;return}n.emit("smartContract/compilation",undefined)}),t&&(r.props.secondCode!==undefined&&r.props.secondCode!==null||r.props.second!==undefined&&r.props.second!==null)&&(r.editor=window.monaco.editor.createDiffEditor(t,{language:r.props.lang||"sol",theme:"vs-dark",minimap:{enabled:!1},readOnly:!0})).setModel({original:monaco.editor.createModel(r.props.firstCode||"","sol"),modified:monaco.editor.createModel(r.props.secondCode||"","sol")}),t&&r.props.link&&window.fetch(r.props.link,{mode:"no-cors"}).then(function(e){return e.text()}).then(function(e){return r.editor&&r.editor.setValue(e)}).catch(function(){return r.editor.setValue("Unable to show the code... Something shady is happening here.")}),t&&r.props.compileAtStart&&r.enqueue(r.tryCompile,500),t&&r.props.sourceLocationId&&r.loadContent(r.props.sourceLocationId,r.props.sourceLocation)},commentChanged:function(t,n){var r=window.putComment(this.editor.getValue(),n,t);r=window.putComment(r);var i=this;i.oneWay=!0,i.editor.setValue(r),setTimeout(function(){delete i.oneWay},300)},uploadFile:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target.files[0],r=this,i=new FileReader;i.addEventListener("load",function(){r.editor.setValue(Base64.decode(i.result.substring(i.result.indexOf(","))))},!1),i.readAsDataURL(n)},onChange:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target;n.dataset.change==="loadContent"&&delete this.contentTokenValue,n.dataset.change==="loadContent"&&this.loadContentButton&&$(this.loadContentButton).removeClass("disabled")},onKeyUp:function(t){if(!t||t.keyCode!==13)return this.onChange(t);t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if($(this[t.currentTarget.dataset.change+"Button"]).hasClass("disabled"))return;this[t.currentTarget.dataset.change]&&this[t.currentTarget.dataset.change](t),this.emit("editor/compile")},loadContent:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if(t&&t.target&&$(t.target).hasClass("disabled"))return;delete this.contentTokenValue;var r=!t||t.target?this.contentTokenInput:t,i=isNaN(r)?parseInt(r.value):r;if(isNaN(i))return;var s=this;s.controller.loadContent(i,n).then(function(){s.contentTokenValue=i,s.loadContentButton&&$(s.loadContentButton).addClass("disabled"),s.contentTokenInput&&!isNaN(r)&&s.enqueue(function(){return s.contentTokenInput.value=""}),s.tryCompile()})},tryCompile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.controller.tryCompile(200,t)},onSolidityVersion:function(t){var n=this;if(!(n.solidityVersion=t))return;window.SolidityUtilities.getCompilers().then(function(e){return n.solidityVersion&&(n.solidityVersion.innerHTML=Object.keys(e.releases).map(function(t){return'<option value="'+e.releases[t]+'">'+t+"</option>"}).join(""))})},changeSolcVersion:function(t){this.solidityVersion.value=t},recoverData:function(){var t=this;return new Promise(function(e,n){var r=parseInt(t.contentTokenInput&&t.contentTokenInput.value||0),i=function s(){var i=t.functionalityAddress.value;if(window.isEthereumAddress(i))return e([r,i]);t.controller.deploy().then(s).catch(n)};return isNaN(r)?i():t.controller.mint().then(i).catch(n)})},componentDidMount:function(){window.editorShortcut=window.editorShortcut||$(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0),$.publish("editor/compile")}}),!this.props.firstCode&&this.props.first&&this.controller.loadContent(this.props.first,this.props.firstLocation),!this.props.secondCode&&this.props.second&&this.controller.loadContent(this.props.second,this.props.secondLocation,!0)},render:function(){return React.createElement("section",{className:this.props.className},!this.props.readonly&&!this.props.firstCode&&!this.props.first&&!this.props.secondCode&&!this.props.second&&React.createElement("div",{className:"CodeEditorOptionsFrom"},React.createElement("p",{className:"CodeEditorOptionsWhat"},"Load: "),React.createElement("input",{className:"CodeEditorOptionsLoad",type:"file",onChange:this.uploadFile,accept:this.props.lang&&"."+this.props.lang||".sol"})),(this.props.readonly&&this.props.compileAtStart||!this.props.readonly&&!this.props.firstCode&&!this.props.first&&!this.props.secondCode&&!this.props.second)&&React.createElement("div",{className:"CodeEditorOptionsCoding"},React.createElement("p",{className:"CodeEditorOptionsWhat"},"Solidity: "),React.createElement("select",{id:"selectedSolidityVersion",className:"CodeEditorOptionsSelect",ref:this.onSolidityVersion})),React.createElement("section",{className:"NewProposaleditor",ref:this.onEditor}))}});var ExploreController=function(t){var n=this;n.view=t,n.onCollectionSearch=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(window.isEthereumAddress(e)){i.next=2;break}return i.abrupt("return",n.view.setState({searchedCollection:null}));case 2:e=window.web3.utils.toChecksumAddress(e);try{t=n.view.props.collections.filter(function(t){return t.address===e})[0]}catch(s){}if(t){i.next=8;break}return i.next=7,window.loadSingleCollection(e);case 7:t=i.sent;case 8:n.view.setState({searchedCollection:t});case 9:case"end":return i.stop()}},r,this)}));return t}()};function _instanceof(e,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var Explore=React.createClass({displayName:"Explore",getDefaultSubscriptions:function(){return{"collection/search":this.controller.onCollectionSearch}},requiredScripts:["spa/loader.jsx","spa/innerLoader.jsx","spa/lazyImageLoader.jsx","spa/fullLoader.jsx"],requiredModules:["spa/singleCollection","spa/collection"],onClick:function(t){window.preventItem(t);var n=t.currentTarget.dataset.key,r;n!==undefined&&n!==null&&(r=this.props.collections.filter(function(e){return e.key===n})[0]),this.emit("section/change","spa/collection",{collection:r})},componentDidMount:function(){window.setHomepageLink("?section=explore")},getCollections:function(t){var n,r,i=window.getState(this),s=[],o=i.collections.filter(function(e){return e.category!=="W20"});if(window.context.W1155GroupMode===!0){var u=o.filter(function(e){return e.category==="W1155"});u.forEach(function(e){return o.splice(o.indexOf(e),1)});var a={};for(var f=u,l=Array.isArray(f),c=0,f=l?f:f[Symbol.iterator]();;){var h;if(l){if(c>=f.length)break;h=f[c++]}else{c=f.next();if(c.done)break;h=c.value}var p=h;(a[p.sourceAddress]=a[p.sourceAddress]||[]).push(p)}Object.values(a).forEach(function(e){return o.unshift(e[0])})}return(n=s).push.apply(n,o),(r=s).push.apply(r,i.collections.filter(function(e){return e.category==="W20"})),s=s.filter(function(e){return window.context.pandorasBox.indexOf(e.address)===-1&&(!e.sourceAddress||window.context.pandorasBox.indexOf(e.sourceAddress)===-1)}),t=t?(_instanceof(t,Array)?t:[t]).map(function(e){return e.split("Wrapped ").join("W")}):t,t?s.filter(function(e){return e.symbol==="cFARM"?t.indexOf("fLPs")!==-1:t.indexOf(e.category)!==-1}):s},getCategories:function(){var t=Object.values(window.context.ethItemFactoryEvents);return t=t.filter(function(e,n){return t.indexOf(e)===n}).map(function(e){return e.split("ABI").join("").split("W").join("Wrapped ")}),t.push("fLPs"),t},onCategoryChange:function(t){window.preventItem(t),this.setState({categories:[t.currentTarget.dataset.key],showW20:t.currentTarget.dataset.key==="Wrapped 20"})},render:function(){var t=this,n=this,r=window.getState(this),i=r.categories||[this.getCategories()[0]];return r.loadingCollections?React.createElement(FullLoader,null):React.createElement("section",{className:"Pager"},React.createElement("section",{className:"collections"},React.createElement("section",{className:"CategoriesList"},this.getCategories().map(function(e){return React.createElement("a",{key:e,href:"javascript:;",className:"Category"+(i.indexOf(e)!==-1?" Selected":""),"data-key":e,onClick:t.onCategoryChange},e)})),React.createElement("section",{className:"ExploreSelectionDescription"},React.createElement("p",null,i[0]==="Native"&&"Native ITEMs are collections of objects on top of Ethereum built as ITEMs natively. The ITEM Standard makes these objects interoperable across all of the Ethereum Network using both the ERC20 Interface and the ERC1155 Interface. Native ITEMs can also perform complex behaviors specified optionally via their Extension. These extra capabilities are up to the developers writing the Extension logic. For more Info, read the ITEM Documentation.",i[0]==="Wrapped 20"&&"Wrapped ERC20 ITEMs are ERC20 Tokens Wrapped into the ITEM Standard. Wrapped ERC20, retain all the capabilities of the default ITEM standard, but lose any extra ones while wrapped. For example, once wrapped, A DAO or DFO governance token cannot interact with the DAO or DFO (until unwrapped, if not explicitly programmed) but can still be used like any ITEM using a gas-efficient method like BatchTransfer.",i[0]==="Wrapped 1155"&&"Wrapped ERC1155 ITEMs are ERC1155 NFTs Wrapped into the ITEM Standard. Wrapped ERC1155, retain all the capabilities of the default ITEM standard, but lose any extra ones while wrapped. For example, once wrapped, The NFT can't be used in a specific Game, if any until unwrapped (if not explicitly programmed in the application), but can still be used like any ITEM as an interoperable Object in every DeFi application via its Interoperable Interface (ERC20).",i[0]==="Wrapped 721"&&"Wrapped ERC721 ITEMs are ERC721 NFTs Wrapped into the ITEM Standard. Wrapped ERC721, retain all the capabilities of the default ITEM standard, but lose any extra ones while wrapped. For example, once wrapped, The NFT can't be used in a specific Game, if any until unwrapped (if not explicitly programmed in the application), but can still be used like any ITEM as an interoperable Object in every DeFi application via its Interoperable Interface (ERC20).",i[0]==="fLPs"&&"Covenants Farming LP Tokens Collection are Native ITEMs minted for Locked Setups. The Liquidity Pool stored in Locked Setups remains liquid to the owner via the fLP token. These tokens correspond 1:1 with the quantity of LP tokens locked and can be redeemed anytime after the end block of a Locked Farming Setup.")),!r.showW20&&React.createElement("section",{className:"collectionsList"},r.searchedCollection&&React.createElement(SingleCollection,{collection:r.searchedCollection,collectionKey:r.searchedCollection.key,onClick:n.onClick,miniature:!0}),!r.searchedCollection&&r.collections&&this.getCollections(i).map(function(e){return React.createElement(SingleCollection,{collection:e,collectionKey:e.key,key:e.key,onClick:n.onClick,miniature:!0})}))),r.showW20&&React.createElement(React.Fragment,null,React.createElement(Collection,{collection:this.props.collections.filter(function(e){return e.category==="W20"})[0]}),React.createElement("div",{className:"OLDVER"},React.createElement("h4",null,"Old Versions:")),this.props.collections.filter(function(e){return e.category==="W20"}).map(function(e,t){return t!==0&&React.createElement(Collection,{key:e.address,collection:e})})))}});var FarmController=function(t){var n=this;n.view=t};var Farm=React.createClass({displayName:"Farm",requiredScripts:["spa/farmComponents/farmViewer.jsx"],componentDidMount:function(){window.setHomepageLink("?section=farm")},render:function(){return React.createElement("section",null,React.createElement("section",null,React.createElement("br",null),React.createElement("br",null),React.createElement("br",null)),React.createElement(FarmViewer,null))}});function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var FarmViewer=React.createClass({displayName:"FarmViewer",requiredScripts:["spa/farmComponents/farmViewWrapped.jsx"],getProps:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},componentDidMount:function(){var t=this;window.loadFarmingContracts({collectionAddress:this.props.collectionAddress,itemAddress:this.props.itemAddress}).then(function(e){var n=[];Object.values(e).forEach(function(e){return Object.keys(e).forEach(function(e){return n.push(e)})}),t.setState({farmingContracts:n.filter(function(e){return window.context.farmingContractsToHide.indexOf(e)===-1})})})},render:function(){var t=this;return React.createElement("section",{className:"DappBox"},(!this.state||!this.state.farmingContracts)&&React.createElement(Loader,null),this.state&&this.state.farmingContracts&&this.state.farmingContracts.length===0&&React.createElement("h4",null,"No Farming Contracts"),this.state&&this.state.farmingContracts&&this.state.farmingContracts.map(function(e){return React.createElement(FarmViewWrapped,_extends({},t.getProps(),{farmAddress:e}))}))}});ImportReact({name:"FarmViewWrapped",requiredScripts:["spa/imported/farm/ExploreFarmingContract.jsx","spa/imported/farm/FarmingComponent.jsx","spa/imported/farm/SetupComponent.jsx","spa/imported/shared/Input.jsx","spa/imported/shared/Coin.jsx","spa/imported/shared/TokenInput.jsx","spa/imported/shared/Loading.jsx","spa/imported/shared/Link.jsx","spa/imported/shared/ApproveButton.jsx","spa/imported/farm/CreateOrEditFarmingSetup.jsx","spa/imported/farm/CreateOrEditFarmingSetups.jsx"],render:"ExploreFarmingContract"});var FullLoader=React.createClass({displayName:"FullLoader",render:function(){return React.createElement("section",{className:"LoaderFull"},React.createElement("figure",{className:"LoadImg"},React.createElement("img",{src:"assets/img/loadMonolith.png"})))}});exports.__esModule=!0,exports.default=void 0;var _react=require("react"),_reactRedux=require("react-redux"),_shared=require("../../../../components/shared"),CreateOrEditFarmingSetup=function(t){function ht(){if(a==="locked"&&window.formatNumber(V)<=0)return;P&&window.formatNumber(p)>0&&window.formatNumber(z)>0&&st(1)}var n=t.rewardToken,r=t.onAddFarmingSetup,i=t.editSetup,s=t.onEditFarmingSetup,o=t.dfoCore,u=t.onCancel,a=i?i.free?"free":"locked":t.selectedFarmingType,f=(0,_react.useState)(!1),l=f[0],c=f[1],h=(0,_react.useState)(i&&i.blockDuration?i.blockDuration:0),p=h[0],d=h[1],v=(0,_react.useState)(i&&i.minStakeable?i.minStakeable:!1),m=v[0],g=v[1],y=(0,_react.useState)(i&&i.minStakeable?i.minStakeable:0),b=y[0],w=y[1],E=(0,_react.useState)(i&&i.renewTimes?i.renewTimes>0:!1),S=E[0],x=E[1],T=(0,_react.useState)(i&&i.renewTimes?i.renewTimes:0),N=T[0],C=T[1],k=(0,_react.useState)(i&&i.involvingEth?i.involvingEth:!1),L=k[0],A=k[1],O=(0,_react.useState)(i&&i.ethSelectData?i.ethSelectData:null),M=O[0],_=O[1],D=(0,_react.useState)(i&&i.data?i.data:null),P=D[0],H=D[1],B=(0,_react.useState)(i&&i.mainTokenIndex?i.mainTokenIndex:0),j=B[0],F=B[1],I=(0,_react.useState)(i&&i.mainToken?i.mainToken:null),q=I[0],R=I[1],U=(0,_react.useState)(i&&i.rewardPerBlock?i.rewardPerBlock:0),z=U[0],W=U[1],X=(0,_react.useState)(i&&i.maxStakeable?i.maxStakeable:0),V=X[0],$=X[1],J=(0,_react.useState)(i&&i.penaltyFee?i.penaltyFee>0:!1),K=J[0],Q=J[1],G=(0,_react.useState)(i&&i.penaltyFee?i.penaltyFee:0),Y=G[0],Z=G[1],et=(0,_react.useState)(i&&i.ethAddress?i.ethAddress:""),tt=et[0],nt=et[1],rt=(0,_react.useState)(0),it=rt[0],st=rt[1];(0,_react.useEffect)(function(){i&&(i.liquidityPoolTokenAddress||i.liquidityPoolToken&&i.liquidityPoolToken.address)&&ot(i.liquidityPoolTokenAddress||i.liquidityPoolToken.address).then(function(){return i.mainToken&&R(i.mainToken)})},[]);var ot=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var n,r,i,s,u,a,f,l,h,p,d;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(e){v.next=2;break}return v.abrupt("return");case 2:return c(!0),v.prev=3,v.next=6,o.getContract(o.getContextElement("AMMAggregatorABI"),o.getContextElement("ammAggregatorAddress"));case 6:return n=v.sent,v.next=9,n.methods.info(e).call();case 9:return r=v.sent,i=r.name,s=r.amm,v.next=14,o.getContract(o.getContextElement("AMMABI"),s);case 14:return u=v.sent,v.next=17,u.methods.data().call();case 17:return a=v.sent,v.next=20,u.methods.byLiquidityPool(e).call();case 20:return f=v.sent,l=[],h=!1,A(!1),v.next=26,Promise.all(f[2].map(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var n,r,i,s;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e.toLowerCase()!==a[0].toLowerCase()){u.next=15;break}A(!0),h=!0,nt(a[0]);if(a[0]!==o.voidEthereumAddress){u.next=8;break}_(null),u.next=15;break;case 8:return u.next=10,o.getContract(o.getContextElement("ERC20ABI"),a[0]);case 10:return n=u.sent,u.next=13,n.methods.symbol().call();case 13:r=u.sent,_({symbol:r});case 15:return u.next=17,o.getContract(o.getContextElement("ERC20ABI"),e);case 17:i=u.sent;if(e!==window.voidEthereumAddress){u.next=22;break}u.t0="ETH",u.next=25;break;case 22:return u.next=24,i.methods.symbol().call();case 24:u.t0=u.sent;case 25:s=u.t0,l.push({symbol:s,address:e,isEth:e.toLowerCase()===a[0].toLowerCase()});case 27:case"end":return u.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()));case 26:return v.next=28,o.getContract(o.getContextElement("ERC20ABI"),e);case 28:return p=v.sent,v.next=31,p.methods.decimals().call();case 31:d=v.sent,h||_(null),H({address:e,name:i,tokens:l,decimals:d}),R(l[0]),v.next=43;break;case 37:v.prev=37,v.t0=v["catch"](3),A(!1),_(null),H(null),console.error(v.t0);case 43:return v.prev=43,c(!1),v.finish(43);case 46:case"end":return v.stop()}},t,this,[[3,37,43,46]])}));return function(n){return e.apply(this,arguments)}}(),ut=function(t){g(t),w(0)},at=function(t){Q(t),Z(0)},ft=function(t){Z(t>100?100:t)},lt=function(t){var r=o.fromDecimals(t,n.decimals);W(r<1?0:t)},ct=function(){if(m&&window.formatNumber(b)<=0)return;if(S&&window.formatNumber(N)<=0)return;var n={free:a==="free",blockDuration:p,minStakeable:b,renewTimes:N,involvingEth:L,ethSelectData:M,liquidityPoolToken:P,mainTokenIndex:j,mainToken:q,rewardPerBlock:z,maxStakeable:V,penaltyFee:Y,ethAddress:tt};i?s(n,t.editSetupIndex):r(n)},pt=function(){return React.createElement("div",{className:"CheckboxQuestions"},React.createElement("p",{className:"BreefRecapB"},"Load the Pool you want to reward for this setup by its Ethereum address."),React.createElement(_shared.TokenInput,{placeholder:"Liquidity pool address",tokenAddress:i&&(i.liquidityPoolTokenAddress||i.liquidityPoolToken&&i.liquidityPoolToken.address)||"",onClick:ot,text:"Load"}),l?React.createElement("div",{className:"row justify-content-center"},React.createElement("div",{className:"spinner-border text-secondary",role:"status"},React.createElement("span",{className:"visually-hidden"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"CheckboxQuestions"},P&&P.tokens.length>0&&React.createElement("h6",{className:"TokenSelectedB"},React.createElement("b",null,P.name," | ",P.tokens.map(function(e){return React.createElement(React.Fragment,null,e.isEth?L?"ETH":e.symbol:e.symbol," ")}))," ",P.tokens.map(function(e){return React.createElement(_shared.Coin,{address:e.isEth?L?t.dfoCore.voidEthereumAddress:e.address:e.address})}))),P&&React.createElement(React.Fragment,null,!1,a==="locked"&&React.createElement(React.Fragment,null,React.createElement("select",{className:"SelectRegular",value:j,onChange:function(t){F(t.target.value),R(P.tokens[t.target.value])}},P.tokens.map(function(e,t){return React.createElement("option",{key:e.address,value:t},e.isEth?L?"ETH":e.symbol:e.symbol)})),React.createElement("div",{className:"InputTokensRegular"},React.createElement("h6",null,"Max stakeable"),React.createElement("p",{className:"BreefRecapB"},"The maximum amount of main tokens staked simultaneously."),React.createElement(_shared.Input,{min:0,showCoin:!0,address:q.isEth&&L?t.dfoCore.voidEthereumAddress:q.address,value:V,name:q.isEth&&L?"ETH":q.symbol,onChange:function(t){return $(t.target.value)}}))),React.createElement("div",{className:"InputTokensRegular"},React.createElement("h6",null,"Reward per block"),React.createElement("p",{className:"BreefRecapB"},"The total amount of tokens per block to reward farmers."),React.createElement(_shared.Input,{min:0,showCoin:!0,address:n.address,value:z,name:n.symbol,onChange:function(t){return lt(t.target.value)}})),React.createElement("p",{className:"BreefRecapB"},"Select the duration of the setup. The selected timeband will determinate the end block once activated"),React.createElement("select",{className:"SelectRegular",value:p,onChange:function(t){return d(t.target.value)}},React.createElement("option",{value:0},"Choose setup duration"),Object.keys(t.dfoCore.getContextElement("blockIntervals")).map(function(e,n){return React.createElement("option",{key:e,value:t.dfoCore.getContextElement("blockIntervals")[e]},e)})),React.createElement("p",{className:"BreefRecapB"},React.createElement("b",null,"Total reward (",""+p," blocks): ",z*p," ",n.symbol))),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{onClick:u,className:"backActionBTN"},"Back"),React.createElement("a",{onClick:ht,className:"web2ActionBTN"},"Next"))))},dt=function(){return React.createElement("div",{className:"CheckboxQuestions"},React.createElement("h6",null,React.createElement("input",{type:"checkbox",checked:m,onChange:function(t){return ut(t.target.checked)},id:"minStakeable"})," Min stakeable"),m&&React.createElement("div",{className:"InputTokensRegular"},React.createElement(_shared.Input,{min:0,showCoin:!0,address:(q==null?!void 0:!q.isEth)&&!P.tokens[j].isEth?""+((q==null?void 0:q.address)||P.tokens[j].address):L?t.dfoCore.voidEthereumAddress:""+((q==null?void 0:q.address)||P.tokens[j].address),value:b,name:(q==null?!void 0:!q.isEth)&&!P.tokens[j].isEth?""+((q==null?void 0:q.symbol)||P.tokens[j].symbol):L?"ETH":""+((q==null?void 0:q.symbol)||P.tokens[j].symbol),onChange:function(t){return w(t.target.value)}}),a==="free"&&React.createElement(React.Fragment,null,React.createElement("h6",null,"Main Token"),React.createElement("select",{className:"SelectRegular",value:j,onChange:function(t){F(t.target.value),R(P.tokens[t.target.value])}},P.tokens.map(function(e,t){return React.createElement("option",{key:e.address,value:t},e.isEth?L?"ETH":e.symbol:e.symbol)})),React.createElement("br",null))),React.createElement("p",{className:"BreefRecapB"},"[Optional] A minimum amount of main tokens to stake to open a position"),a==="locked"&&React.createElement(React.Fragment,null,React.createElement("h6",null,React.createElement("input",{type:"checkbox",checked:K,onChange:function(t){return at(t.target.checked)},id:"penaltyFee"})," Penalty fee "),K&&React.createElement(React.Fragment,null,React.createElement("div",{className:"SpecialInputPerch"},React.createElement("aside",null,"%"),React.createElement("input",{placeholder:"Penalty Fee",type:"number",min:0,max:100,value:Y,onChange:function(t){return ft(t.target.value)},className:"TextRegular"})),React.createElement("p",{className:"BreefRecapB"},"Main Token: ",n.symbol)),React.createElement("p",{className:"BreefRecapB"},"[Optional] The penalty fee is a perchentange of the total reward of a position that must be paid to close it before the end block.")),React.createElement("h6",null,React.createElement("input",{type:"checkbox",checked:S,onChange:function(t){C(0),x(t.target.checked)},id:"repeat"})," Repeat"),S&&React.createElement("div",{className:"InputTokensRegular InputRegularB"},React.createElement(_shared.Input,{min:0,value:N,onChange:function(t){return C(t.target.value)}})),React.createElement("p",{className:"BreefRecapB"},"[Optional] Select the amount of time to automatically repete this setup after the block-end."),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{onClick:function(){return st(0)},className:"backActionBTN"},"Back"),React.createElement("a",{onClick:function(){return ct()},className:"web2ActionBTN"},i?"Edit":"Add")))};return it===0?pt():it===1?dt():React.createElement("div",null)},mapStateToProps=function(t){var n=t.core;return{dfoCore:n.dfoCore}},_default=(0,_reactRedux.connect)(mapStateToProps)(CreateOrEditFarmingSetup);exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _react=require("react"),_reactRedux=require("react-redux"),_CreateOrEditFarmingSetup=_interopRequireDefault(require("./CreateOrEditFarmingSetup")),CreateOrEditFarmingSetups=function(t){var n=t.rewardToken,r=t.farmingSetups,i=t.onAddFarmingSetup,s=t.onEditFarmingSetup,o=t.onRemoveFarmingSetup,u=t.onCancel,a=t.onFinish,f=(0,_react.useState)(!1),l=f[0],c=f[1],h=(0,_react.useState)(null),p=h[0],d=h[1],v=(0,_react.useState)(0),m=v[0],g=v[1],y=(0,_react.useState)(""),b=y[0],w=y[1],E=(0,_react.useState)(0),S=E[0],x=E[1];return S>0||p?React.createElement(_CreateOrEditFarmingSetup.default,{rewardToken:n,onAddFarmingSetup:function(t){i(t),x(0),c(!1)},editSetup:p,editSetupIndex:m,onEditFarmingSetup:function(t,n){s(t,n),d(null),g(0),x(0)},selectedFarmingType:p?p.maxLiquidity?"locked":"free":b,onCancel:function(){x(0),d(null),g(0)}}):r.length===0||l?React.createElement("div",{className:"CheckboxQuestions"},React.createElement("h6",null,React.createElement("b",null,"Create Setup by")),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{onClick:function(){return w(b!=="free"?"free":null)},className:(b==="free"?"web2ActionBTN":"backActionBTN")+" mr-4"},"Free"),React.createElement("a",{onClick:function(){return w(b!=="locked"?"locked":null)},className:""+(b==="locked"?"web2ActionBTN":"backActionBTN")},"Locked")),React.createElement("p",{className:"BreefRecapB"},"Farming setups can be either Free or Locked. In free farming, Farmers can stake / un-stake liquidity anytime, but the reward/block is shared btween them. In Locked setups Farmers lock the liquidity until it ends, but reawards are fixed."),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{className:"backActionBTN",onClick:u},"Back"),React.createElement("a",{onClick:function(){return b&&x(1)},disabled:!b,className:"web2ActionBTN"},"Next")),React.createElement("br",null),r.length===0&&!t.forEdit&&React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{className:"hiddenLink",onClick:a},"Deploy without setups"))):React.createElement("div",{className:"CheckboxQuestions"},r.map(function(e,t){return React.createElement("div",{key:t,className:"SetupListITEM"},React.createElement("div",{className:"SetupListITEMINFO"},React.createElement("p",null,e.free?"Free setup":"Locked setup"," ",e.free?" "+e.liquidityPoolToken.tokens.map(function(t){return""+(e.involvingEth&&t.address.toLowerCase()===e.ethAddress.toLowerCase()?"ETH":t.symbol)}):""+(e.mainToken.isEth&&e.involvingEth?"ETH":e.liquidityPoolToken.symbol)," (",e.liquidityPoolToken.name,") - Reward: ",e.rewardPerBlock," ",n.symbol,"/block ")),React.createElement("div",{className:"SetupListITEMACTIONS"},React.createElement("a",{className:"web2ActionBTN",onClick:function(){return o(t)}},React.createElement("b",null,"Delete")),React.createElement("a",{onClick:function(){d(e),g(t)},className:"web2ActionBTN"},React.createElement("b",null,"Edit"))))}),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{onClick:function(){return c(!0)},className:"web2ActionBTN"},"Add setup"),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("a",{onClick:function(){r.forEach(function(e,t){return o(t)}),u()},className:"backActionBTN mr-4"},"Back")," ",t.finishButton||React.createElement("a",{onClick:function(){return a()},className:"web2ActionBTN ml-4"},"Next"))))},mapStateToProps=function(t){var n=t.core;return{dfoCore:n.dfoCore}},_default=(0,_reactRedux.connect)(mapStateToProps)(CreateOrEditFarmingSetups);exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}exports.__esModule=!0,exports.default=void 0;var _react=require("react"),_reactRedux=require("react-redux"),_reactRouter=require("react-router"),_components=require("../../../../components"),_Create=_interopRequireDefault(require("./Create")),_CreateOrEditFarmingSetups=_interopRequireDefault(require("./CreateOrEditFarmingSetups")),_shared=require("../../../../components/shared"),_Loading=_interopRequireDefault(require("../../../../components/shared/Loading")),ExploreFarmingContract=function(t){var n=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var r,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:r=[{name:"Generate SmartContract Proposal",call:function(n){return _asyncToGenerator(regeneratorRuntime.mark(function r(){var t,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,window.SolidityUtilities.getCompilers();case 2:n.selectedSolidityVersion=u.sent.releases["0.7.6"],n.bypassFunctionalitySourceId=!0,n.contractName="ProposalCode",n.functionalityMethodSignature="callOneTime(address)",t="FarmingSetFarmingSetupsProposal",i="";for(s in e)o=e[s],i="        "+("farmingSetups["+s+"] = FarmingSetupConfiguration("+o.add+", "+o.disable+", "+o.index+", FarmingSetupInfo("+o.info.free+", "+o.info.blockDuration+", "+o.info.originalRewardPerBlock+", "+o.info.minStakeable+", "+o.info.maxStakeable+", "+o.info.renewTimes+", "+window.web3.utils.toChecksumAddress(o.info.ammPlugin)+", "+window.web3.utils.toChecksumAddress(o.info.liquidityPoolTokenAddress)+", "+window.web3.utils.toChecksumAddress(o.info.mainTokenAddress)+", "+window.web3.utils.toChecksumAddress(o.info.ethereumAddress)+", "+o.info.involvingETH+", "+o.info.penaltyFee+", "+o.info.setupsCount+", "+o.info.lastSetupIndex+"));")+"\n";return u.next=11,fetch("data/"+t+".sol");case 11:return u.next=13,u.sent.text();case 13:u.t0=e.length,u.t1=i.trim(),u.t2=m.metadata.fullExtension,n.sourceCode=u.sent.format(u.t0,u.t1,u.t2),console.log(n.sourceCode);case 18:case"end":return u.stop()}},r,this)}))()}}],i={element:t.element,sequentialOps:r,sourceCode:"test",title:"Manage Farming Setups"},window.showProposalLoader(i);case 3:case"end":return s.stop()}},n,this)}));return function(n){return e.apply(this,arguments)}}(),r=t.dfoCore,i=t.farmAddress,s=t.withoutBack,o=(0,_reactRouter.useParams)(),u=o.address;u||(u=i);var a=t.edit,f=(0,_react.useState)([]),l=f[0],c=f[1],h=(0,_react.useState)(null),p=h[0],d=h[1],v=(0,_react.useState)(null),m=v[0],g=v[1],y=(0,_react.useState)(!1),b=y[0],w=y[1],E=(0,_react.useState)(!0),S=E[0],x=E[1],T=(0,_react.useState)(null),N=T[0],C=T[1],k=(0,_react.useState)(!1),L=k[0],A=k[1],O=(0,_react.useState)(null),M=O[0],_=O[1],D=(0,_react.useState)(!1),P=D[0],H=D[1],B=(0,_react.useState)([]),j=B[0],F=B[1],I=(0,_react.useState)(0),q=I[0],R=I[1];(0,_react.useEffect)(function(){r&&U()},[]),(0,_react.useEffect)(function(){b&&!a&&w(!1)});var U=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,i,s,o,a,f,l,h,p,v,m,y,b,w,E,S,T,N,k,L,A,O,M,D,P;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return x(!0),H.prev=1,H.next=4,r.getContract(r.getContextElement("FarmMainABI"),u);case 4:return e=H.sent,d(e),H.next=8,e.methods._rewardTokenAddress().call();case 8:return n=H.sent,H.next=11,r.getContract(r.getContextElement("ERC20ABI"),n);case 11:return i=H.sent,H.next=14,i.methods.name().call();case 14:return s=H.sent,H.next=17,i.methods.symbol().call();case 17:return o=H.sent,H.next=20,i.methods.decimals().call();case 20:return a=H.sent,_({name:s,symbol:o,address:n,decimals:a}),H.next=24,e.methods._extension().call();case 24:return f=H.sent,H.next=27,r.getContract(r.getContextElement("FarmExtensionABI"),f);case 27:return l=H.sent,C(l),H.next=31,l.methods.data().call();case 31:return h=H.sent,p=h.host,v=h.byMint,H.next=36,e.methods.setups().call();case 36:return m=H.sent,H.next=39,r.getBlockNumber();case 39:y=H.sent,b=[],w=[],E=0,S=0,T=0,N=!1,k=[],L=0;case 48:if(!(L<m.length)){H.next=60;break}return H.next=51,e.methods.setup(L).call();case 51:A=H.sent,O=A[0],M=A[1],N||(N=parseInt(M.renewTimes)>0&&!O.active&&parseInt(M.lastSetupIndex)===parseInt(L)),O.rewardPerBlock!=="0"&&(M.free?E+=1:S+=1,k.push(_extends({},O,{setupInfo:M,rewardTokenAddress:n,setupIndex:L,finished:parseInt(y)>parseInt(O.endBlock)&&parseInt(O.endBlock)!==0||parseInt(O.endBlock)===0&&parseInt(M.renewTimes)===0}))),O.active&&parseInt(O.endBlock)>y&&(M.free?b.push(O):w.push(O),T+=parseInt(O.rewardPerBlock));case 57:L++,H.next=48;break;case 60:D=k.sort(function(e,t){return t.active-e.active}),c(D),P={name:"Farm "+o,contractAddress:e.options.address,rewardTokenAddress:i.options.address,rewardPerBlock:r.toDecimals(r.toFixed(T).toString(),a),n:s,symbol:o,byMint:v,freeSetups:b,lockedSetups:w,totalFreeSetups:E,totalLockedSetups:S,canActivateSetup:N,extension:f.substring(0,5)+"..."+f.substring(f.length-3,f.length),fullExtension:""+f,farmAddress:e.options.address.substring(0,5)+"..."+e.options.address.substring(e.options.address.length-3,e.options.address.length),host:p.substring(0,5)+"..."+p.substring(p.length-3,p.length),fullhost:""+p},g({contract:e,metadata:P,isActive:b+w>0||N}),H.next=69;break;case 66:H.prev=66,H.t0=H["catch"](1),console.error(H.t0);case 69:return H.prev=69,x(!1),H.finish(69);case 72:case"end":return H.stop()}},t,this,[[1,66,69,72]])}));return function(){return e.apply(this,arguments)}}(),z=function(t){return t.toLowerCase()===r.getContextElement("wethTokenAddress").toLowerCase()||t===r.voidEthereumAddress},W=function(t){F(j.concat(t))},X=function(t,n){var r=j.map(function(e,r){return r!==n?e:t});F(r)},V=function(t){var n=j.filter(function(e,n){return n!==t});F(n)},$=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function i(){var e,s,o,u,a,f,l,c,h,p,d,v;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log(j),A(!0),m.prev=2,e=[],m.next=6,r.getContract(r.getContextElement("AMMAggregatorABI"),r.getContextElement("ammAggregatorAddress"));case 6:s=m.sent,o="0",m.t0=regeneratorRuntime.keys(j);case 9:if((m.t1=m.t0()).done){m.next=34;break}return u=m.t1.value,a=j[u],o=t.dfoCore.web3.utils.toBN(o).add(t.dfoCore.web3.utils.toBN(window.numberToString(t.dfoCore.fromDecimals(window.numberToString(a.rewardPerBlock),M.decimals))).mul(t.dfoCore.web3.utils.toBN(window.numberToString(a.blockDuration)))).toString(),f=a.free,m.next=16,s.methods.findByLiquidityPool(a.liquidityPoolToken.address).call();case 16:return l=m.sent,c=l.amm,h=f?a.liquidityPoolToken.tokens[0].address:a.mainToken.address,m.next=21,t.dfoCore.getContract(t.dfoCore.getContextElement("ERC20ABI"),h);case 21:p=m.sent;if(h!==window.voidEthereumAddress){m.next=26;break}m.t2=18,m.next=29;break;case 26:return m.next=28,p.methods.decimals().call();case 28:m.t2=m.sent;case 29:d=m.t2,v={add:!0,disable:!1,index:0,info:{free:f,blockDuration:parseInt(a.blockDuration),originalRewardPerBlock:window.numberToString(t.dfoCore.fromDecimals(window.numberToString(a.rewardPerBlock),M.decimals)),minStakeable:window.numberToString(t.dfoCore.fromDecimals(window.numberToString(a.minStakeable),d)),maxStakeable:f?0:window.numberToString(t.dfoCore.fromDecimals(window.numberToString(a.maxStakeable)),d),renewTimes:a.renewTimes,ammPlugin:c,liquidityPoolTokenAddress:a.liquidityPoolToken.address,mainTokenAddress:h,ethereumAddress:r.voidEthereumAddress,involvingETH:a.involvingEth,penaltyFee:f?0:t.dfoCore.fromDecimals(window.numberToString(parseFloat(a.penaltyFee)/100)),setupsCount:0,lastSetupIndex:0}},e.push(v),m.next=9;break;case 34:return m.next=36,n(e);case 36:m.next=41;break;case 38:m.prev=38,m.t3=m["catch"](2),console.error(m.t3);case 41:case"end":return m.stop()}},i,this,[[2,38]])}));return function(){return e.apply(this,arguments)}}();if(S)return React.createElement(_Loading.default,null);var J=l.filter(function(e){return!e.setupInfo.free&&!e.finished}),K=l.filter(function(e){return e.setupInfo.free&&!e.finished}),Q=l.filter(function(e){return e.finished});return q?React.createElement("div",null,React.createElement("h3",null,"Congratulations!"),React.createElement("p",null,"In order to be able to activate the new setups you created, ",m.metadata.byMint?"be sure to grant the permission to mint at least":"you must send"," ",React.createElement("b",null,window.fromDecimals(q,M.decimals,!0))," ",M.symbol," ",React.createElement(_shared.Coin,{address:M.address})," ",m.metadata.byMint?"for the extension":"to its extension, having address"," ",React.createElement("a",{href:t.dfoCore.getContextElement("etherscanURL")+"address/"+m.metadata.fullExtension,target:"_blank"},m.metadata.fullExtension)),React.createElement("a",{href:"javascript:;",onClick:function(){return R("")}},"Got it")):React.createElement("div",{className:"ListOfThings"},p&&m?React.createElement("div",{className:"row"},React.createElement(_components.FarmingComponent,{className:"FarmContractOpen",dfoCore:r,contract:m.contract,metadata:m.metadata,goBack:!1,withoutBack:s,hostedBy:a})):React.createElement("div",null),a&&React.createElement(React.Fragment,null,!b&&React.createElement("button",{className:"btn btn-primary",onClick:function(){return w(!0)}},"Add new setups")),!1)},mapStateToProps=function(t){var n=t.core;return{dfoCore:n.dfoCore}},_default=(0,_reactRedux.connect)(mapStateToProps)(ExploreFarmingContract);exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _Coin=_interopRequireDefault(require("../coin/Coin")),_reactRouterDom=require("react-router-dom"),FarmingComponent=function(t){var n=t.className,r=t.goBack,i=t.metadata,s=t.dfoCore,o=t.withoutBack,u=i.name.replace("Farm ","");return React.createElement("div",{className:n},i?React.createElement(React.Fragment,null,React.createElement("div",{className:"FarmTitle"},React.createElement("figure",null,i.rewardTokenAddress!==s.voidEthereumAddress?React.createElement("a",{target:"_blank",href:t.dfoCore.getContextElement("etherscanURL")+"token/"+i.rewardTokenAddress},React.createElement(_Coin.default,{height:45,address:i.rewardTokenAddress})):React.createElement(_Coin.default,{height:45,address:i.rewardTokenAddress})),React.createElement("aside",null,React.createElement("h6",null,React.createElement("b",null,"Farm ",i.n)," ",i.freeSetups.length+i.lockedSetups.length===0&&!i.canActivateSetup?React.createElement("span",{className:"text-danger"},React.createElement("b",null,"(inactive)")):React.createElement(React.Fragment,null)),!o&&React.createElement(_reactRouterDom.Link,{to:r?"/farm/dapp/":"/farm/dapp/"+i.contractAddress,className:r?"backActionBTN":"web2ActionBTN"},r?"Back":"Open"))),React.createElement("div",{className:"FarmThings"},React.createElement("p",null,React.createElement("b",null,"Daily Rate"),": ",i.rewardPerBlock*6400," ",u),React.createElement("p",null,React.createElement("b",null,"Active Setups"),": ",i.freeSetups.length+i.lockedSetups.length," "),React.createElement("div",{className:"StatsLink"},React.createElement("a",{target:"_blank",href:t.dfoCore.getContextElement("etherscanURL")+"address/"+i.contractAddress},"Contract"),React.createElement("a",{target:"_blank",href:t.dfoCore.getContextElement("etherscanURL")+"address/"+i.fullhost},"Host"),React.createElement("a",{target:"_blank",href:t.dfoCore.getContextElement("etherscanURL")+"address/"+i.fullExtension},"Extension"))),r&&React.createElement(React.Fragment,null,React.createElement("div",{className:"FarmThings"}))):React.createElement("div",{className:"col-12 justify-content-center"},React.createElement("div",{className:"spinner-border text-secondary",role:"status"},React.createElement("span",{className:"visually-hidden"}))))},_default=FarmingComponent;exports.default=_default;exports.__esModule=!0,exports.default=void 0;var _react=require("react"),_reactRedux=require("react-redux"),_components=require("../../../../components"),Hosted=function(t){var n=t.dfoCore,r=(0,_react.useState)(""),i=r[0],s=r[1],o=(0,_react.useState)([]),u=o[0],a=o[1],f=(0,_react.useState)([]),l=f[0],c=f[1],h=(0,_react.useState)(!0),p=h[0],d=h[1];(0,_react.useEffect)(function(){n&&v()},[]);var v=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return d(!0),i.prev=1,i.next=4,n.getHostedFarmingContracts();case 4:return e=i.sent,i.next=7,Promise.all(e.map(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,S.next=3,n.getContract(n.getContextElement("FarmMainABI"),e.address);case 3:return r=S.sent,S.next=6,r.methods._rewardTokenAddress().call();case 6:return i=S.sent,S.next=9,n.getContract(n.getContextElement("ERC20ABI"),i);case 9:return s=S.sent,S.next=12,s.methods.symbol().call();case 12:return o=S.sent,S.next=15,s.methods.decimals().call();case 15:return u=S.sent,S.next=18,r.methods._extension().call();case 18:return a=S.sent,S.next=21,n.getContract(n.getContextElement("FarmExtensionABI"),a);case 21:return f=S.sent,S.next=24,f.methods.data().call();case 24:return l=S.sent,c=l.host,h=l.byMint,S.next=29,n.getBlockNumber();case 29:return p=S.sent,S.next=32,r.methods.setups().call();case 32:return d=S.sent,v=[],m=[],g=0,y=0,b=0,w=!1,S.next=41,Promise.all(d.map(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.methods.setup(n).call();case 2:i=u.sent,s=i[0],o=i[1],w||(w=parseInt(o.renewTimes)>0&&!e.active&&parseInt(o.lastSetupIndex)===parseInt(n)),e.active&&parseInt(e.endBlock)>p&&(o.free?v.push(e):m.push(e),b+=parseInt(e.rewardPerBlock)),e.rewardPerBlock!=="0"&&(o.free?g+=1:y+=1);case 8:case"end":return u.stop()}},t,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 41:return E={name:"Farm "+o,contractAddress:r.options.address,rewardTokenAddress:s.options.address,rewardPerBlock:n.toDecimals(n.toFixed(b).toString(),u),byMint:h,freeSetups:v,lockedSetups:m,totalFreeSetups:g,totalLockedSetups:y,canActivateSetup:w,extension:a.substring(0,5)+"..."+a.substring(a.length-3,a.length),fullExtension:""+a,farmAddress:r.options.address.substring(0,5)+"..."+r.options.address.substring(r.options.address.length-3,r.options.address.length),host:c.substring(0,5)+"..."+c.substring(c.length-3,c.length),fullhost:""+c},S.abrupt("return",{contract:r,metadata:E,isActive:v.length+m.length>0||w});case 45:S.prev=45,S.t0=S["catch"](0),console.error(S.t0);case 48:case"end":return S.stop()}},t,this,[[0,45]])}));return function(t){return e.apply(this,arguments)}}()));case 7:r=i.sent,a(r.filter(function(e){return e}).sort(function(e,t){return e.isActive===t.isActive?0:e.isActive?-1:1})),c(r.filter(function(e){return e}).sort(function(e,t){return e.isActive===t.isActive?0:e.isActive?-1:1})),i.next=17;break;case 12:i.prev=12,i.t0=i["catch"](1),console.error(i.t0),a([]),c([]);case 17:return i.prev=17,d(!1),i.finish(17);case 20:case"end":return i.stop()}},t,this,[[1,12,17,20]])}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=4;break}return s(""),a(l),r.abrupt("return");case 4:return d(!0),r.prev=5,s(e),n=[],r.next=10,Promise.all(l.map(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function r(t){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.methods._rewardTokenAddress().call();case 2:i=s.sent,i.toLowerCase().includes(e.toLowerCase())&&n.push(t);case 4:case"end":return s.stop()}},r,this)}));return function(e){return t.apply(this,arguments)}}()));case 10:a(n),r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](5),console.error(r.t0);case 16:return r.prev=16,d(!1),r.finish(16);case 19:case"end":return r.stop()}},t,this,[[5,13,16,19]])}));return function(n){return e.apply(this,arguments)}}();return React.createElement("div",{className:"MainExploration"},React.createElement("h6",null,React.createElement("b",null,"Reward token address")),React.createElement("input",{type:"text",className:"TextRegular",placeholder:"Reward token address..",value:i,onChange:function(t){return m(t.target.value)}}),p?React.createElement("div",{className:"row mt-4"},React.createElement("div",{className:"col-12 justify-content-center"},React.createElement("div",{className:"spinner-border text-secondary",role:"status"},React.createElement("span",{className:"visually-hidden"})))):React.createElement("div",{className:"ListOfThings"},u.length===0&&React.createElement("div",{className:"col-12 text-left"},React.createElement("h6",null,React.createElement("b",null,"No farming contract available!"))),u.length>0&&u.map(function(e){return React.createElement(_components.FarmingComponent,{key:e.contract.options.address,className:"FarmContract",dfoCore:n,metadata:e.metadata,hostedBy:!0,hasBorder:!0})})))},mapStateToProps=function(t){var n=t.core;return{dfoCore:n.dfoCore}},_default=(0,_reactRedux.connect)(mapStateToProps)(Hosted);exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _react=require("react"),_ApproveButton=_interopRequireDefault(require("../buttons/ApproveButton")),LockedPositionComponent=function(t){var n=t.position,r=t.dfoCore,i=t.blockNumber,s=t.setup,o=t.setupInfo,u=t.mainTokenInfo,a=t.onRewardTokenApproval,f=t.setupTokens,l=t.rewardTokenInfo,c=t.lockedPositionReward,h=t.lockedPositionStatus,p=t.lpTokenInfo,d=t.lmContract,v=t.onComplete,m=t.farmTokenSymbol,g=t.farmTokenDecimals,y=(0,_react.useState)(!1),b=y[0],w=y[1],E=(0,_react.useState)(!1),S=E[0],x=E[1],T=(0,_react.useState)(!1),N=T[0],C=T[1],k=(0,_react.useState)(!1),L=k[0],A=k[1],O=(0,_react.useState)(!1),M=O[0],_=O[1],D=(0,_react.useState)(""),P=D[0],H=D[1],B=0;f.forEach(function(e,t){e.address===o.mainTokenAddress&&(B=t)});var j=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(P){s.next=2;break}return s.abrupt("return");case 2:return A(!0),s.prev=3,s.next=6,d.methods.transferPosition(P,n.positionId).estimateGas({from:r.address});case 6:return e=s.sent,s.next=9,d.methods.transferPosition(P,n.positionId).send({from:r.address,gasLimit:e,gas:e});case 9:i=s.sent,v(i),s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](3),console.error(s.t0);case 16:return s.prev=16,A(!1),s.finish(16);case 19:case"end":return s.stop()}},t,this,[[3,13,16,19]])}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return C(!0),s.prev=1,s.next=4,d.methods.unlock(n.positionId,!1).estimateGas({from:r.address});case 4:return e=s.sent,s.next=7,d.methods.unlock(n.positionId,!1).send({from:r.address,gasLimit:e,gas:e});case 7:i=s.sent,v(i),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](1),console.error(s.t0);case 14:return s.prev=14,C(!1),s.finish(14);case 17:case"end":return s.stop()}},t,this,[[1,11,14,17]])}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return _(!0),s.prev=1,s.next=4,d.methods.withdrawReward(n.positionId).estimateGas({from:r.address});case 4:return e=s.sent,s.next=7,d.methods.withdrawReward(n.positionId).send({from:r.address,gasLimit:e,gas:e});case 7:i=s.sent,v(i),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](1),console.error(s.t0);case 14:return s.prev=14,_(!1),s.finish(14);case 17:case"end":return s.stop()}},t,this,[[1,11,14,17]])}));return function(){return e.apply(this,arguments)}}(),q=parseInt(parseInt(n.reward)*(parseInt(o.penaltyFee)/1e18));return React.createElement("div",{className:"LockedFarmPositions"},React.createElement("div",{className:"FarmYou"},React.createElement("p",null,React.createElement("b",null,"Position Weight"),": ",window.formatMoney(window.fromDecimals(n.mainTokenAmount,u.decimals,!0),6)," ",u.symbol),parseInt(i)<parseInt(s.endBlock)&&!S&&React.createElement("a",{onClick:function(){return x(!0)},className:"web2ActionBTN"},"Unlock"),S&&React.createElement("a",{onClick:function(){return x(!1)},className:"backActionBTN"},"Close"),S&&React.createElement("div",{className:"UnlockDiv"},React.createElement("p",{className:"UnlockInfo"},window.formatMoney(window.fromDecimals(q+parseInt(h.partiallyRedeemed),l.decimals,!0),6)," ",l.symbol," - ",window.formatMoney(r.toDecimals(n.liquidityPoolTokenAmount,parseInt(p.decimals)),parseInt(p.decimals))," ","fLP"," needed to Unlock this position"),React.createElement("p",{className:"UnlockInfoBal"},"Balance: ",window.formatMoney(window.fromDecimals(l.balance,l.decimals,!0),6)," ",l.symbol," - ",window.formatMoney(window.fromDecimals(n.liquidityPoolTokenAmount,parseInt(p.decimals),!0),9)," fLP"),l.approval?N?React.createElement("a",{className:"Web3ActionBTN",disabled:N},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):parseInt(i)<parseInt(s.endBlock)?React.createElement("a",{onClick:function(){return F()},className:"Web3ActionBTN"},"Unlock"):React.createElement(React.Fragment,null):React.createElement(_ApproveButton.default,{contract:l.contract,from:r.address,spender:d.options.address,onApproval:function(){return a()},onError:function(t){return console.error(t)},text:"Approve "+l.symbol}))),React.createElement("div",{className:"Farmed"},React.createElement("p",null,React.createElement("b",null,"Reward"),": ",window.formatMoney(r.toDecimals(r.toFixed(n.reward),l.decimals),l.decimals)," ",l.symbol),React.createElement("p",null,React.createElement("b",null,"Available"),": ",window.formatMoney(r.toDecimals(r.toFixed(c),l.decimals),l.decimals)," ",l.symbol),b?React.createElement("a",{onClick:function(){return w(!1)},className:"backActionBTN"},"Close"):React.createElement("a",{onClick:function(){return w(!0)},className:"web2ActionBTN"},"Transfer"),M?React.createElement("a",{className:"Web3ActionBTN",disabled:M},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{onClick:function(){return I()},className:"Web3ActionBTN"},"Claim"),b&&React.createElement("div",{className:"Tranferpos"},React.createElement("input",{type:"text",className:"TextRegular",placeholder:"Position receiver",value:P,onChange:function(t){return H(t.target.value)},id:"transferAddress"}),L?React.createElement("a",{className:"Web3ActionBTN",disabled:L},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{onClick:function(){return j()},className:"Web3ActionBTN"},"Transfer"))))},_default=LockedPositionComponent;exports.default=_default;exports.__esModule=!0,exports.default=void 0;var _react=require("react"),_reactRedux=require("react-redux"),_components=require("../../../../components"),Positions=function(t){var n=(0,_react.useState)([]),r=n[0],i=n[1],s=(0,_react.useState)(!0),o=s[0],u=s[1];(0,_react.useEffect)(function(){a()},[]);var a=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.prev=1,n.next=4,t.dfoCore.loadPositions();case 4:i(t.dfoCore.positions),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error(n.t0),i([]);case 11:return n.prev=11,u(!1),n.finish(11);case 14:case"end":return n.stop()}},n,this,[[1,7,11,14]])}));return function(){return e.apply(this,arguments)}}();return React.createElement("div",{className:"MainExploration"},o?React.createElement("div",{className:"row mt-4"},React.createElement("div",{className:"col-12 justify-content-center"},React.createElement("div",{className:"spinner-border text-secondary",role:"status"},React.createElement("span",{className:"visually-hidden"})))):React.createElement("div",{className:"ListOfThings"},r.length===0&&React.createElement("div",{className:"col-12 text-left"},React.createElement("h6",null,React.createElement("b",null,"No opened positions!"))),r.length>0&&r.map(function(e){return React.createElement(_components.SetupComponent,{className:"FarmSetup",setupIndex:e.setupIndex,setupInfo:e.setupInfo,key:e.contract.options.address+"-"+e.setupInfo,lmContract:e.contract,dfoCore:t.dfoCore,setup:e,hasBorder:!0})})))},mapStateToProps=function(t){var n=t.core;return{dfoCore:n.dfoCore}},_default=(0,_reactRedux.connect)(mapStateToProps)(Positions);exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}exports.__esModule=!0,exports.default=void 0;var _Coin=_interopRequireDefault(require("../coin/Coin")),_react=require("react"),_2=require(".."),_reactRedux=require("react-redux"),_actions=require("../../../store/actions"),_axios=_interopRequireDefault(require("axios")),_LockedPositionComponent=_interopRequireDefault(require("./LockedPositionComponent")),_metamaskFox=_interopRequireDefault(require("../../../assets/images/metamask-fox.svg")),_Loading=_interopRequireDefault(require("../Loading")),SetupComponent=function(t){var n=t.className,r=t.dfoCore,i=t.setupIndex,s=t.lmContract,o=t.hostedBy,u=(0,_react.useState)(null),a=u[0],f=u[1],l=(0,_react.useState)(null),c=l[0],h=l[1],p=(0,_react.useState)(0),d=p[0],v=p[1],m=(0,_react.useState)(!0),g=m[0],y=m[1],b=(0,_react.useState)(!1),w=b[0],E=b[1],S=(0,_react.useState)(!1),x=S[0],T=S[1],N=(0,_react.useState)(!1),C=N[0],k=N[1],L=(0,_react.useState)(!1),A=L[0],O=L[1],M=(0,_react.useState)(!1),_=M[0],D=M[1],P=(0,_react.useState)(!1),H=P[0],B=P[1],j=(0,_react.useState)(!1),F=j[0],I=j[1],q=(0,_react.useState)(!1),R=q[0],U=q[1],z=(0,_react.useState)(!1),W=z[0],X=z[1],V=(0,_react.useState)(!1),$=V[0],J=V[1],K=(0,_react.useState)(!1),Q=K[0],G=K[1],Y=(0,_react.useState)(!1),Z=Y[0],et=Y[1],tt=(0,_react.useState)({name:"",version:""}),nt=tt[0],rt=tt[1],it=(0,_react.useState)(null),st=it[0],ot=it[1],ut=(0,_react.useState)(""),at=ut[0],ft=ut[1],lt=(0,_react.useState)(null),ct=lt[0],ht=lt[1],pt=(0,_react.useState)(18),dt=pt[0],vt=pt[1],mt=(0,_react.useState)(""),gt=mt[0],yt=mt[1],bt=(0,_react.useState)(""),wt=bt[0],Et=bt[1],St=(0,_react.useState)("0"),xt=St[0],Tt=St[1],Nt=(0,_react.useState)([]),Ct=Nt[0],kt=Nt[1],Lt=(0,_react.useState)([]),At=Lt[0],Ot=Lt[1],Mt=(0,_react.useState)([]),_t=Mt[0],Dt=Mt[1],Pt=(0,_react.useState)([]),Ht=Pt[0],Bt=Pt[1],jt=(0,_react.useState)([]),Ft=jt[0],It=jt[1],qt=(0,_react.useState)(0),Rt=qt[0],Ut=qt[1],zt=(0,_react.useState)(0),Wt=zt[0],Xt=zt[1],Vt=(0,_react.useState)(0),$t=Vt[0],Jt=Vt[1],Kt=(0,_react.useState)(null),Qt=Kt[0],Gt=Kt[1],Yt=(0,_react.useState)(null),Zt=Yt[0],en=Yt[1],tn=(0,_react.useState)(null),nn=tn[0],rn=tn[1],sn=(0,_react.useState)(0),on=sn[0],un=sn[1],an=(0,_react.useState)(null),fn=an[0],ln=an[1],cn=(0,_react.useState)(null),hn=cn[0],pn=cn[1],dn=(0,_react.useState)(0),vn=dn[0],mn=dn[1],gn=(0,_react.useState)([]),yn=gn[0],bn=gn[1],wn=(0,_react.useState)([]),En=wn[0],Sn=wn[1],xn=(0,_react.useState)([]),Tn=xn[0],Nn=xn[1],Cn=(0,_react.useState)(0),kn=Cn[0],Ln=Cn[1],An=(0,_react.useState)(0),On=An[0],Mn=An[1],_n=(0,_react.useState)(!1),Dn=_n[0],Pn=_n[1],Hn=(0,_react.useState)(""),Bn=Hn[0],jn=Hn[1],Fn=(0,_react.useState)(0),In=Fn[0],qn=Fn[1],Rn=(0,_react.useState)("add-pair"),Un=Rn[0],zn=Rn[1],Wn=(0,_react.useState)("to-pair"),Xn=Wn[0],Vn=Wn[1],$n=(0,_react.useState)(0),Jn=$n[0],Kn=$n[1],Qn=(0,_react.useState)("0"),Gn=Qn[0],Yn=Qn[1],Zn=(0,_react.useRef)(null),er=(0,_react.useState)(null),tr=er[0],nr=er[1],rr=(0,_react.useState)(0),ir=rr[0],sr=rr[1],or=(0,_react.useState)(0),ur=or[0],ar=or[1],fr=(0,_react.useState)(!1),lr=fr[0],cr=fr[1],hr=new t.dfoCore.web3.eth.Contract(t.dfoCore.getContextElement("FarmingPrestoABI"),t.dfoCore.getContextElement("farmingPrestoAddress"));(0,_react.useEffect)(function(){return pr(),setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function e(){var n,r,i,s,o,u,a,f,l,c,h,p;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return n=[],d.next=3,t.dfoCore.getContract(t.dfoCore.getContextElement("AMMAggregatorABI"),t.dfoCore.getContextElement("ammAggregatorAddress"));case 3:return r=d.sent,d.next=6,r.methods.amms().call();case 6:i=d.sent,s=i,o=Array.isArray(s),u=0,s=o?s:s[Symbol.iterator]();case 8:if(!o){d.next=14;break}if(!(u>=s.length)){d.next=11;break}return d.abrupt("break",34);case 11:a=s[u++],d.next=18;break;case 14:u=s.next();if(!u.done){d.next=17;break}return d.abrupt("break",34);case 17:a=u.value;case 18:return f=a,d.next=21,t.dfoCore.getContract(t.dfoCore.getContextElement("AMMABI"),f);case 21:return l=d.sent,d.t0=f,d.t1=l,d.next=26,l.methods.info().call();case 26:return d.t2=d.sent,d.next=29,l.methods.data().call();case 29:d.t3=d.sent,c={address:d.t0,contract:d.t1,info:d.t2,data:d.t3},c.data[2]&&n.push(c);case 32:d.next=8;break;case 34:sr(0),h=n.filter(function(e){return e.info[0]==="UniswapV2"})[0],p=n.indexOf(h),n.splice(p,1),n.unshift(h),ar(n);case 40:case"end":return d.stop()}},e,this)}))),function(){clearInterval(Zn.current)}},[]),(0,_react.useEffect)(function(){Or(Jn)},[Bn,ir]);var pr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return y(!0),o.prev=1,o.next=4,s.methods.setup(i).call();case 4:return e=o.sent,n=e[0],r=e[1],f(n),h(r),et(!1),o.next=12,dr(n,r,!0);case 12:Zn.current||(Zn.current=setInterval(_asyncToGenerator(regeneratorRuntime.mark(function u(){var e,t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,s.methods.setup(i).call();case 2:return e=o.sent,t=e[0],n=e[1],f(t),h(n),o.next=9,dr(t,n);case 9:case"end":return o.stop()}},u,this)})),5e3)),o.next=18;break;case 15:o.prev=15,o.t0=o["catch"](1),console.error(o.t0);case 18:return o.prev=18,y(!1),o.finish(18);case 21:case"end":return o.stop()}},t,this,[[1,15,18,21]])}));return function(){return e.apply(this,arguments)}}(),dr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,o,u){var a,f,l,c,h,p,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,j,F,I,q,R,z,W,X,V,$,K,Q,Y,Z,et,tt,nt,it,st,ut,at,ft,lt,ct,pt,dt,mt,gt,bt,wt,St,xt,Nt,Ct,Lt,At,Mt,_t,Pt,Ht,jt,Ft,qt,Rt,zt,Wt,Vt,$t,Jt,Kt,Qt;return regeneratorRuntime.wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return a=null,f=[],l=[],Yt.next=5,s.methods._farmTokenCollection().call();case 5:return c=Yt.sent,Yt.next=8,t.dfoCore.getContract(t.dfoCore.getContextElement("INativeV1ABI"),c);case 8:return h=Yt.sent,Yt.next=11,r.getContract(r.getContextElement("AMMABI"),o.ammPlugin);case 11:p=Yt.sent,ot(p);if(e.free){Yt.next=39;break}m=e.objectId;if(m==="0"){Yt.next=38;break}return Yt.next=18,h.methods.balanceOf(t.dfoCore.address,m).call();case 18:return g=Yt.sent,Yt.next=21,h.methods.symbol(m).call();case 21:return y=Yt.sent,Yt.next=24,h.methods.decimals(m).call();case 24:return b=Yt.sent,Yt.next=27,h.methods.asInteroperable(m).call();case 27:return w=Yt.sent,yt(w),Et(y),Tt(g),vt(b),Yt.next=34,p.methods.byLiquidityPoolAmount(o.liquidityPoolTokenAddress,g).call();case 34:E=Yt.sent,kt(E.tokensAmounts),Yt.next=39;break;case 38:Tt("0");case 39:return u&&Xt(0),Mn(o.renewTimes),Ln(e.rewardPerBlock),Yt.next=44,window.getLogs({address:s.options.address,topics:[window.web3.utils.sha3("Transfer(uint256,address,address)")],fromBlock:t.dfoCore.getContextElement("deploySearchStart"),toBlock:"latest"});case 44:S=Yt.sent,x=0;case 46:if(!(x<S.length)){Yt.next=57;break}return T=S[x],N=T.topics,C=t.dfoCore.web3.eth.abi.decodeParameter("uint256",N[1]),Yt.next=52,s.methods.position(C).call();case 52:k=Yt.sent,r.isValidPosition(k)&&parseInt(k.setupIndex)===parseInt(i)&&(o.free?a=_extends({},k,{positionId:C}):l.includes(C)||(f.push(_extends({},k,{positionId:C})),l.push(C)));case 54:x++,Yt.next=46;break;case 57:return ln(a),bn(f),!a&&u&&(B(!1),U(!1)),Yt.next=62,s.methods._extension().call();case 62:return L=Yt.sent,Yt.next=65,r.getContract(r.getContextElement("FarmExtensionABI"),L);case 65:return A=Yt.sent,u&&ht(A),Yt.next=69,s.methods._rewardTokenAddress().call();case 69:O=Yt.sent,M=O===r.voidEthereumAddress;if(M){Yt.next=77;break}return Yt.next=74,r.getContract(r.getContextElement("ERC20ABI"),O);case 74:Yt.t0=Yt.sent,Yt.next=78;break;case 77:Yt.t0=null;case 78:_=Yt.t0;if(M){Yt.next=85;break}return Yt.next=82,_.methods.symbol().call();case 82:Yt.t1=Yt.sent,Yt.next=86;break;case 85:Yt.t1="ETH";case 86:D=Yt.t1;if(M){Yt.next=93;break}return Yt.next=90,_.methods.decimals().call();case 90:Yt.t2=Yt.sent,Yt.next=94;break;case 93:Yt.t2=18;case 94:P=Yt.t2;if(M){Yt.next=101;break}return Yt.next=98,_.methods.allowance(r.address,s.options.address).call();case 98:Yt.t3=Yt.sent,Yt.next=102;break;case 101:Yt.t3=253;case 102:H=Yt.t3;if(M){Yt.next=109;break}return Yt.next=106,_.methods.balanceOf(r.address).call();case 106:Yt.t4=Yt.sent,Yt.next=112;break;case 109:return Yt.next=111,r.web3.eth.getBalance(r.address);case 111:Yt.t4=Yt.sent;case 112:return j=Yt.t4,rn({contract:_,symbol:D,decimals:P,balance:j,address:O,approval:parseInt(H)!==0&&parseInt(H)>=parseInt(j)}),Yt.next=116,r.getBlockNumber();case 116:return F=Yt.sent,v(F),Yt.next=120,r.getContract(r.getContextElement("ERC20ABI"),o.liquidityPoolTokenAddress);case 120:return I=Yt.sent,Yt.next=123,I.methods.symbol().call();case 123:return q=Yt.sent,Yt.next=126,I.methods.decimals().call();case 126:return R=Yt.sent,Yt.next=129,I.methods.balanceOf(r.address).call();case 129:return z=Yt.sent,Yt.next=132,I.methods.allowance(r.address,s.options.address).call();case 132:return W=Yt.sent,Gt({contract:I,symbol:q,decimals:R,balance:z,approval:parseInt(W)!==0&&parseInt(W)>=parseInt(z)}),X=parseInt(o.renewTimes)>0&&!e.active&&parseInt(o.lastSetupIndex)===parseInt(i),J(X),Yt.next=138,A.methods.data().call();case 138:V=Yt.sent,$=V.host,K=V.byMint,Q=!1;if(M){Yt.next=148;break}return Yt.next=145,_.methods.balanceOf(L).call();case 145:Yt.t5=Yt.sent,Yt.next=151;break;case 148:return Yt.next=150,r.web3.eth.getBalance(L);case 150:Yt.t5=Yt.sent;case 151:return Y=Yt.t5,Yt.prev=152,Yt.next=155,r.getContract(r.getContextElement("dfoDoubleProxyABI"),$);case 155:return Z=Yt.sent,Yt.t6=r,Yt.t7=r.getContextElement("dfoProxyABI"),Yt.next=160,Z.methods.proxy().call();case 160:return Yt.t8=Yt.sent,Yt.next=163,Yt.t6.getContract.call(Yt.t6,Yt.t7,Yt.t8);case 163:return et=Yt.sent,Yt.t9=r,Yt.t10=r.getContextElement("dfoStateHolderABI"),Yt.next=168,et.methods.getStateHolderAddress().call();case 168:return Yt.t11=Yt.sent,Yt.next=171,Yt.t9.getContract.call(Yt.t9,Yt.t10,Yt.t11);case 171:return tt=Yt.sent,Yt.next=174,tt.methods.getBool("farming.authorized."+L.toLowerCase()).call();case 174:Q=Yt.sent,Yt.next=180;break;case 177:Yt.prev=177,Yt.t12=Yt["catch"](152),Q=K||parseInt(Y)>=parseInt(e.rewardPerBlock)*parseInt(o.blockDuration);case 180:G(Q),nt=o.liquidityPoolTokenAddress;if(!o.free){Yt.next=188;break}return Yt.next=185,p.methods.byLiquidityPoolAmount(nt,e.totalSupply).call();case 185:it=Yt.sent,Yt.next=194;break;case 188:return Yt.next=190,p.methods.byTokenAmount(nt,o.mainTokenAddress,e.totalSupply).call();case 190:return it=Yt.sent,Yt.next=193,p.methods.byLiquidityPoolAmount(nt,it.liquidityPoolAmount).call();case 193:it=Yt.sent;case 194:st=null,ut=[],at=[],ft=[],lt=0;case 199:if(!(lt<it.liquidityPoolTokens.length)){Yt.next=250;break}ct=it.liquidityPoolTokens[lt];if(mr(o,ct)){Yt.next=207;break}return Yt.next=204,r.getContract(r.getContextElement("ERC20ABI"),ct);case 204:Yt.t13=Yt.sent,Yt.next=208;break;case 207:Yt.t13=null;case 208:pt=Yt.t13;if(!pt){Yt.next=215;break}return Yt.next=212,pt.methods.symbol().call();case 212:Yt.t14=Yt.sent,Yt.next=216;break;case 215:Yt.t14="ETH";case 216:dt=Yt.t14;if(!pt){Yt.next=223;break}return Yt.next=220,pt.methods.decimals().call();case 220:Yt.t15=Yt.sent,Yt.next=224;break;case 223:Yt.t15=18;case 224:mt=Yt.t15;if(!pt){Yt.next=231;break}return Yt.next=228,pt.methods.balanceOf(r.address).call();case 228:Yt.t16=Yt.sent,Yt.next=234;break;case 231:return Yt.next=233,r.web3.eth.getBalance(r.address);case 233:Yt.t16=Yt.sent;case 234:gt=Yt.t16;if(!pt){Yt.next=241;break}return Yt.next=238,pt.methods.allowance(r.address,s.options.address).call();case 238:Yt.t17=Yt.sent,Yt.next=242;break;case 241:Yt.t17=!0;case 242:bt=Yt.t17,at.push(parseInt(bt)!==0&&(parseInt(bt)>=parseInt(gt)||!pt)),ut.push({amount:0,balance:r.toDecimals(r.toFixed(gt),mt),liquidity:it.tokensAmounts[lt],decimals:mt,address:pt?ct:r.voidEthereumAddress,symbol:dt}),ft.push(pt),ct.toLowerCase()===o.mainTokenAddress.toLowerCase()&&(st={approval:parseInt(bt)!==0&&(parseInt(bt)>=parseInt(gt)||!pt),decimals:mt,contract:pt,address:pt?ct:r.voidEthereumAddress,symbol:dt},en(st));case 247:lt++,Yt.next=199;break;case 250:return Yt.next=252,p.methods.info().call();case 252:wt=Yt.sent,rt({name:wt[0],version:wt[1]}),Ot(ut),It(ft),u&&Ut(0),u&&Dt((new Array(ut.length)).fill(0)),Bt(at);if(!a){Yt.next=279;break}return St=a.free,xt=a.creationBlock,Nt=a.setupIndex,Ct=a.liquidityPoolTokenAmount,Lt=a.mainTokenAmount,Yt.next=267,p.methods.byLiquidityPoolAmount(o.liquidityPoolTokenAddress,Ct).call();case 267:return At=Yt.sent,console.log(a.positionId),Yt.next=271,s.methods.calculateFreeFarmingReward(a.positionId,!0).call();case 271:Mt=Yt.sent,_t=parseInt(Mt),d<parseInt(e.endBlock)&&(_t+=parseInt(e.rewardPerBlock)*(parseInt(a.liquidityPoolTokenAmount)/parseInt(e.totalSupply))),_t=window.numberToString(_t).split(".")[0],mn(_t),pn({free:St,creationBlock:xt,positionSetupIndex:Nt,liquidityPoolAmount:Ct,mainTokenAmount:Lt,tokensAmounts:At.tokensAmounts,tokens:ut}),Yt.next=307;break;case 279:if(!(f.length>0)){Yt.next=307;break}Pt=[],Ht=[],jt=0;case 283:if(!(jt<f.length)){Yt.next=305;break}return Ft=f[jt],qt=Ft.free,Rt=Ft.creationBlock,zt=Ft.setupIndex,Wt=Ft.liquidityPoolTokenAmount,Vt=Ft.mainTokenAmount,Yt.next=292,p.methods.byLiquidityPoolAmount(o.liquidityPoolTokenAddress,Wt).call();case 292:return $t=Yt.sent,Yt.next=295,s.methods.calculateLockedFarmingReward(0,0,!0,Ft.positionId).call();case 295:return Jt=Yt.sent,Kt=parseInt(Jt.reward)+(parseInt(e.endBlock)<=parseInt(d)?0:parseInt(Ft.lockedRewardPerBlock)),Yt.next=299,s.methods._partiallyRedeemed(Ft.positionId).call();case 299:Qt=Yt.sent,Ht.push(Kt),Pt.push({free:qt,creationBlock:Rt,positionSetupIndex:zt,partiallyRedeemed:Qt,liquidityPoolAmount:Wt,mainTokenAmount:Vt,tokensAmounts:$t.tokensAmounts,tokens:ut});case 302:jt++,Yt.next=283;break;case 305:Sn(Pt),Nn(Ht);case 307:return Yt.t18=qn,Yt.next=310,vr(e,o,O,P,ut);case 310:Yt.t19=Yt.sent,(0,Yt.t18)(Yt.t19);case 312:case"end":return Yt.stop()}},n,this,[[152,177]])}));return function(n,r,i){return e.apply(this,arguments)}}(),vr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n,i,s,o){var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(parseInt(e.totalSupply)!==0){C.next=2;break}return C.abrupt("return",-1);case 2:return u=2304e3,C.prev=3,C.next=6,_axios.default.get(r.getContextElement("coingeckoEthereumPriceURL"));case 6:return a=C.sent,C.next=9,r.getContextElement("WUSDAddress");case 9:f=C.sent;if(!n.free){C.next=24;break}return l=(i+","+o.map(function(e){return e&&e.address?e.address+",":""})).slice(0,-1),C.next=14,_axios.default.get(r.getContextElement("coingeckoCoinPriceURL")+l);case 14:return c=C.sent,h=c.data,p=i!==r.voidEthereumAddress?i.toLowerCase()===f.toLowerCase()?1:h[i.toLowerCase()].usd:a,d=0,C.next=20,Promise.all(o.map(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e&&e.address&&(n=e.address!==r.voidEthereumAddress?e.address.toLowerCase()===f.toLowerCase()?1:h[e.address.toLowerCase()].usd:a.data[0].current_price,d+=n*e.liquidity*Math.pow(10,18-e.decimals));case 1:case"end":return i.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()));case 20:return v=parseInt(e.rewardPerBlock)*Math.pow(10,18-s)*u*p,C.abrupt("return",v*100/d);case 24:m=n.mainTokenAddress;if(m===r.voidEthereumAddress){C.next=31;break}return C.next=28,r.getContract(r.getContextElement("ERC20ABI"),m);case 28:C.t0=C.sent,C.next=32;break;case 31:C.t0=null;case 32:g=C.t0;if(m===r.voidEthereumAddress){C.next=39;break}return C.next=36,g.methods.decimals().call();case 36:C.t1=C.sent,C.next=40;break;case 39:C.t1=18;case 40:return y=C.t1,b=i+","+m,C.next=44,_axios.default.get(r.getContextElement("coingeckoCoinPriceURL")+b);case 44:return w=C.sent,E=w.data,S=i!==r.voidEthereumAddress?i.toLowerCase()===f.toLowerCase()?1:E[i.toLowerCase()].usd:a,x=m!==r.voidEthereumAddress?m.toLowerCase()===f.toLowerCase()?1:E[m.toLowerCase()].usd:a,T=parseInt(e.rewardPerBlock)*Math.pow(10,18-s)*u*S*100,N=parseInt(n.maxStakeable)*Math.pow(10,18-y)*x*2,C.abrupt("return",T/N);case 51:C.next=56;break;case 53:return C.prev=53,C.t2=C["catch"](3),C.abrupt("return",0);case 56:case"end":return C.stop()}},t,this,[[3,53]])}));return function(n,r,i,s,o){return e.apply(this,arguments)}}(),mr=function(t,n){return n.toLowerCase()===t.ethereumAddress.toLowerCase()&&t.involvingETH},gr=function(t){var n=r.getContextElement("blockIntervals"),i=Object.entries(n).reduce(function(e,t){var n=t[0],r=t[1];return e[r]=n,e},{});return i[t]},yr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){var e,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(Q){o.next=2;break}return o.abrupt("return");case 2:return E(!0),o.prev=3,o.next=6,s.methods.activateSetup(i).estimateGas({from:t.dfoCore.address});case 6:return e=o.sent,o.next=9,s.methods.activateSetup(i).send({from:t.dfoCore.address,gas:e});case 9:return r=o.sent,t.addTransaction(r),o.next=13,pr();case 13:o.next=18;break;case 15:o.prev=15,o.t0=o["catch"](3),console.error(o.t0);case 18:return o.prev=18,E(!1),o.finish(18);case 21:case"end":return o.stop()}},n,this,[[3,15,18,21]])}));return function(){return e.apply(this,arguments)}}(),br=function(t,n){if(n){Gt(_extends({},Qt,{approval:!0}));return}Bt(Ht.map(function(e,n){return n===t?!0:e}))},wr,Er=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,r){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:wr&&clearTimeout(wr);if(e){o.next=6;break}return Xt(0),Jt(0),Dt(_t.map(function(){return 0})),o.abrupt("return");case 6:wr=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function u(){var n,o,f,l,h,p,v,m,g,y;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,st.methods.data().call();case 2:return n=b.sent[0],o=At[r].address,o=o===window.voidEthereumAddress?n:o,f=t.dfoCore.toFixed(t.dfoCore.fromDecimals(e,parseInt(At[r].decimals))),b.next=8,st.methods.byTokenAmount(c.liquidityPoolTokenAddress,o,f).call();case 8:return l=b.sent,h=l,p=h.liquidityPoolAmount,b.next=12,st.methods.byLiquidityPoolAmount(c.liquidityPoolTokenAddress,p).call();case 12:l=b.sent,v=l.tokensAmounts,Ut(p),Dt(v.map(function(t,n){return r===n?{value:window.numberToString(e),full:f}:v[n]}));if(c.free){b.next=26;break}m=0,At.forEach(function(e,t){e.address===c.mainTokenAddress&&(m=t)});if(!(parseInt(v[m])>0)){b.next=24;break}return b.next=22,s.methods.calculateLockedFarmingReward(i,v[m],!1,0).call();case 22:g=b.sent,Xt(t.dfoCore.toDecimals(t.dfoCore.toFixed(parseInt(g.relativeRewardPerBlock)*(parseInt(a.endBlock)-d)),nn.decimals));case 24:b.next=27;break;case 26:parseInt(a.totalSupply)+parseInt(p)>0&&(y=parseInt(p)*6400*parseInt(a.rewardPerBlock)/(parseInt(a.totalSupply)+parseInt(p)),isNaN(y)||Jt(t.dfoCore.toDecimals(t.dfoCore.toFixed(y),nn.decimals)));case 27:case"end":return b.stop()}},u,this)})),300);case 7:case"end":return o.stop()}},n,this)}));return function(n,r){return e.apply(this,arguments)}}(),Sr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,r,o){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:wr&&clearTimeout(wr);if(!!e&&e!=="NaN"){r.next=5;break}return Xt(0),Jt(0),r.abrupt("return");case 5:wr=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function u(){var n,r,f,l,h,p;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,n=o?e:t.dfoCore.toFixed(t.dfoCore.fromDecimals(e,parseInt(Qt.decimals))),Ut({value:window.numberToString(e),full:n}),v.next=5,st.methods.byLiquidityPoolAmount(c.liquidityPoolTokenAddress,n).call();case 5:r=v.sent,f=r.tokensAmounts,Dt(f);if(c.free){v.next=19;break}return l=0,v.next=12,At.map(function(e,t){e.address===c.mainTokenAddress&&(l=t)});case 12:if(!(parseInt(f[l])>0)){v.next=17;break}return v.next=15,s.methods.calculateLockedFarmingReward(i,f[l],!1,0).call();case 15:h=v.sent,Xt(t.dfoCore.toDecimals(t.dfoCore.toFixed(parseInt(h.relativeRewardPerBlock)*(parseInt(a.endBlock)-d)),nn.decimals));case 17:v.next=21;break;case 19:p=parseInt(t.dfoCore.fromDecimals(e,parseInt(Qt.decimals)))*6400*parseInt(a.rewardPerBlock)/(parseInt(a.totalSupply)+parseInt(t.dfoCore.fromDecimals(e,parseInt(Qt.decimals)))),isNaN(p)||Jt(t.dfoCore.toDecimals(window.numberToString(p),nn.decimals));case 21:v.next=26;break;case 23:v.prev=23,v.t0=v["catch"](0),console.error(v.t0);case 26:case"end":return v.stop()}},u,this,[[0,23]])})),300);case 6:case"end":return r.stop()}},n,this)}));return function(n,r,i){return e.apply(this,arguments)}}(),xr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){var e,o,u,a,f,l,h,p,d,v,m,g,y,b,w,E;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:T(!0),S.prev=1;if(Rt){S.next=4;break}return S.abrupt("return");case 4:return e={setupIndex:i,amount:0,amountIsLiquidityPool:Un==="add-lp"?!0:!1,positionOwner:Dn?Bn:r.voidEthereumAddress},o=null,u=0,a=0,S.next=10,Promise.all(At.map(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,r){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:c.involvingETH&&e.address===t.dfoCore.voidEthereumAddress?o=r:e.address===c.mainTokenAddress&&(a=r);case 1:case"end":return i.stop()}},n,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 10:return f=Rt.full||Rt.toString(),S.next=13,st.methods.byLiquidityPoolAmount(c.liquidityPoolTokenAddress,f).call();case 13:l=S.sent,h=l.tokensAmounts,e.amount=e.amountIsLiquidityPool?f:h[a],u=h[o],p=c.involvingETH&&!e.amountIsLiquidityPool?u:0;if(!tr){S.next=32;break}return console.log("using presto!"),d={from:r.address,value:tr.ethValue,gasLimit:9999999},S.next=23,tr.transaction.estimateGas(d);case 23:return d.gasLimit=S.sent,d.gasLimit=parseInt(d.gasLimit*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),d.gas=d.gasLimit,S.next=28,tr.transaction.send(d);case 28:v=S.sent,t.addTransaction(v),S.next=60;break;case 32:if(!c.free){S.next=53;break}if(!!fn&&!Dn){S.next=43;break}return S.next=36,s.methods.openPosition(e).estimateGas({from:r.address,value:p});case 36:return m=S.sent,S.next=39,s.methods.openPosition(e).send({from:r.address,gas:parseInt(m*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),gasLimit:parseInt(m*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),value:p});case 39:g=S.sent,t.addTransaction(g),S.next=51;break;case 43:if(!fn){S.next=51;break}return S.next=46,s.methods.addLiquidity(fn.positionId,e).estimateGas({from:r.address,value:p});case 46:return y=S.sent,S.next=49,s.methods.addLiquidity(fn.positionId,e).send({from:r.address,gas:parseInt(y*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),gasLimit:parseInt(y*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),value:p});case 49:b=S.sent,t.addTransaction(b);case 51:S.next=60;break;case 53:return S.next=55,s.methods.openPosition(e).estimateGas({from:r.address,value:p});case 55:return w=S.sent,S.next=58,s.methods.openPosition(e).send({from:r.address,gas:parseInt(w*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),gasLimit:parseInt(w*(t.dfoCore.getContextElement("farmGasMultiplier")||1)),value:p});case 58:E=S.sent,t.addTransaction(E);case 60:return S.next=62,pr();case 62:S.next=68;break;case 64:S.prev=64,S.t0=S["catch"](1),console.error(S.t0),Un==="add-eth"&&S.t0.code&&S.t0.code!==4001&&et(!0);case 68:return S.prev=68,T(!1),S.finish(68);case 71:case"end":return S.stop()}},n,this,[[1,64,68,71]])}));return function(){return e.apply(this,arguments)}}(),Tr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){var e,i,o,u,f;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!c.free||!!on&&on!==0){l.next=2;break}return l.abrupt("return");case 2:k(!0),l.prev=3;if(!c.free){l.next=15;break}return e=on===100?hn.liquidityPoolAmount:t.dfoCore.toFixed(parseInt(hn.liquidityPoolAmount)*on/100).toString().split(".")[0],l.next=8,s.methods.withdrawLiquidity(fn.positionId,0,Xn==="to-pair",e).estimateGas({from:r.address});case 8:return i=l.sent,l.next=11,s.methods.withdrawLiquidity(fn.positionId,0,Xn==="to-pair",e).send({from:r.address,gasLimit:i,gas:i});case 11:o=l.sent,t.addTransaction(o),l.next=22;break;case 15:return l.next=17,s.methods.withdrawLiquidity(0,a.objectId,Xn==="to-pair",xt).estimateGas({from:r.address});case 17:return u=l.sent,l.next=20,s.methods.withdrawLiquidity(0,a.objectId,Xn==="to-pair",xt).send({from:r.address,gasLimit:u,gas:u});case 20:f=l.sent,t.addTransaction(f);case 22:return l.next=24,pr();case 24:l.next=29;break;case 26:l.prev=26,l.t0=l["catch"](3),console.error(l.t0);case 29:return l.prev=29,k(!1),l.finish(29);case 32:case"end":return l.stop()}},n,this,[[3,26,29,32]])}));return function(){return e.apply(this,arguments)}}(),Nr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){var e,i;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return O(!0),o.prev=1,o.next=4,s.methods.withdrawReward(fn.positionId).estimateGas({from:r.address});case 4:return e=o.sent,o.next=7,s.methods.withdrawReward(fn.positionId).send({from:r.address,gasLimit:e,gas:e});case 7:return i=o.sent,t.addTransaction(i),o.next=11,pr();case 11:o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](1),console.error(o.t0);case 16:return o.prev=16,O(!1),o.finish(16);case 19:case"end":return o.stop()}},n,this,[[1,13,16,19]])}));return function(){return e.apply(this,arguments)}}(),Cr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,i){var o,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e){i.next=2;break}return i.abrupt("return");case 2:if(!c.free){i.next=22;break}return D(!0),i.prev=4,i.next=7,s.methods.transferPosition(at,e).estimateGas({from:r.address});case 7:return o=i.sent,i.next=10,s.methods.transferPosition(at,e).send({from:r.address,gasLimit:o,gas:o});case 10:return u=i.sent,t.addTransaction(u),i.next=14,pr();case 14:i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](4),console.error(i.t0);case 19:return i.prev=19,D(!1),i.finish(19);case 22:case"end":return i.stop()}},n,this,[[4,16,19,22]])}));return function(n,r){return e.apply(this,arguments)}}(),kr=function(n){if(!n){var r=Ht.findIndex(function(e){return!e});return r!==-1?React.createElement(_2.ApproveButton,{contract:Ft[r],from:t.dfoCore.address,spender:s.options.address,onApproval:function(){return br(r,!1)},onError:function(t){return console.error(t)},text:"Approve "+At[r].symbol}):React.createElement("div",null)}return Qt.approval?React.createElement("div",null):React.createElement(_2.ApproveButton,{contract:Qt.contract,from:t.dfoCore.address,spender:s.options.address,onApproval:function(){return br(null,!0)},onError:function(t){return console.error(t)},text:"Approve "+Qt.symbol})},Lr=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return zn(e.target.value),i.next=3,t.dfoCore.web3.eth.getBalance(t.dfoCore.address);case 3:r=i.sent,Yn(r),nr(null),et(!1),Kn(0),e.target.value==="add-eth"&&(Ut(0),Dt((new Array(At.length)).fill(0)),Jt("0"),Xt("0"));case 9:case"end":return i.stop()}},n,this)}));return function(n){return e.apply(this,arguments)}}(),Ar=function(t){Vn(t.target.value)},Or=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var r,o,u,f,l,h,p,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:H.prev=0,r=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n,i,s,o){var a,f,l,c,p,d,v,m,g,y,b,S,x,T,N,C,k,L,A;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,w.methods.byTokens([E,e]).call();case 2:a=O.sent,f=a[2];if(f!==window.voidEthereumAddress){O.next=6;break}return O.abrupt("return",{});case 6:return l=a[3].indexOf(e),c=a[3].indexOf(E),p=window.formatNumber(window.normalizeValue(a[1][l],i)),d=window.formatNumber(window.normalizeValue(a[1][c],18)),v=p*d,m=d+window.formatNumber(window.normalizeValue(u,18)),g=v/m,y=p-g,b=f,O.next=17,w.methods.getSwapOutput(E,o||u,[f],[e]).call();case 17:S=O.sent[1],x=g/p;if(o){O.next=23;break}return O.next=22,r(e,n,i,s,u=window.numberToString(window.formatNumber(u)*x).split(".")[0]);case 22:return O.abrupt("return",O.sent);case 23:return O.next=25,st.methods.byTokenAmount(h,e,S).call();case 25:return T=O.sent,N=T[0],T=T[1][T[2].indexOf(n)],N=window.numberToString(parseInt(N)/x).split(".")[0],T=window.numberToString(parseInt(T)/x).split(".")[0],C=window.formatNumber(window.normalizeValue(S,i)),k=window.formatNumber(window.normalizeValue(T,s)),O.next=34,w.methods.byTokens([E,n]).call();case 34:f=O.sent[2],L=f,A="0";if(L===window.voidEthereumAddress){O.next=41;break}return O.next=40,w.methods.getSwapOutput(n,T,[f],[E]).call();case 40:A=O.sent[1];case 41:return O.abrupt("return",{lpAmount:N,updatedFirstTokenAmount:C,updatedSecondTokenAmount:k,token0Value:S,token1Value:T,token1ValueETH:A,firstTokenEthLiquidityPoolAddress:b,secondTokenEthLiquidityPoolAddress:L});case 42:case"end":return O.stop()}},t,this)}));return function(n,r,i,s,o){return e.apply(this,arguments)}}(),cr(!0),nr(null),Kn(e||"0");if(parseFloat(e)){H.next=7;break}return H.abrupt("return",cr(!1));case 7:return o=window.toDecimals(window.numberToString(e),18),u=t.dfoCore.web3.utils.toBN(o).div(t.dfoCore.web3.utils.toBN(2)).toString(),H.next=12,st.methods.data().call();case 12:return f=H.sent[0],l=c,h=l.liquidityPoolTokenAddress,H.next=17,st.methods.byLiquidityPool(h).call();case 17:p=H.sent,v=new window.web3.eth.Contract(t.dfoCore.getContextElement("ERC20ABI"),p[2][0]),m=new window.web3.eth.Contract(t.dfoCore.getContextElement("ERC20ABI"),p[2][1]);if(p[2][0]!==window.voidEthereumAddress){H.next=24;break}H.t0=18,H.next=27;break;case 24:return H.next=26,v.methods.decimals().call();case 26:H.t0=H.sent;case 27:g=H.t0;if(p[2][1]!==window.voidEthereumAddress){H.next=32;break}H.t1=18,H.next=35;break;case 32:return H.next=34,m.methods.decimals().call();case 34:H.t1=H.sent;case 35:return y=H.t1,b=p[2].indexOf(l.mainTokenAddress),w=st,H.next=40,w.methods.data().call();case 40:return E=H.sent[0],H.next=43,r(v.options.address,m.options.address,g,y);case 43:S=H.sent,x=S.lpAmount,T=S.token0Value,N=S.token1Value,C=u,k=S.token1ValueETH,L=S.firstTokenEthLiquidityPoolAddress,A=S.secondTokenEthLiquidityPoolAddress;if(!(v.options.address===f||!x||S.updatedSecondTokenAmount>S.updatedFirstTokenAmount)){H.next=62;break}return H.next=54,r(m.options.address,v.options.address,y,g);case 54:S=H.sent,x=S.lpAmount,T=S.token1Value,N=S.token0Value,C=S.token1ValueETH,k=u,L=S.secondTokenEthLiquidityPoolAddress,A=S.firstTokenEthLiquidityPoolAddress;case 62:O=[],L!==window.voidEthereumAddress&&O.push({inputTokenAddress:E,inputTokenAmount:C,ammPlugin:w.options.address,liquidityPoolAddresses:[L],swapPath:[v.options.address],enterInETH:!0,exitInETH:!1,receivers:[hr.options.address],receiversPercentages:[]}),A!==window.voidEthereumAddress&&O.push({inputTokenAddress:E,inputTokenAmount:k,ammPlugin:w.options.address,liquidityPoolAddresses:[A],swapPath:[m.options.address],enterInETH:!0,exitInETH:!1,receivers:[hr.options.address],receiversPercentages:[]}),M=0,L!==window.voidEthereumAddress&&(M=t.dfoCore.web3.utils.toBN(M).add(t.dfoCore.web3.utils.toBN(C)).toString()),A!==window.voidEthereumAddress&&(M=t.dfoCore.web3.utils.toBN(M).add(t.dfoCore.web3.utils.toBN(k)).toString()),l.involvingETH&&v.options.address===f&&(M=t.dfoCore.web3.utils.toBN(M).add(t.dfoCore.web3.utils.toBN(T)).toString()),l.involvingETH&&m.options.address===f&&(M=t.dfoCore.web3.utils.toBN(M).add(t.dfoCore.web3.utils.toBN(N)).toString()),_={setupIndex:i,amount:b===0?T:N,amountIsLiquidityPool:!1,positionOwner:window.isEthereumAddress(Bn)?Bn:t.dfoCore.address};if(c.free){H.next=78;break}return H.next=74,s.methods.calculateLockedFarmingReward(i,b===0?T:N,!1,0).call();case 74:D=H.sent,Xt(t.dfoCore.toDecimals(t.dfoCore.toFixed(parseInt(D.relativeRewardPerBlock)*(parseInt(a.endBlock)-d)),nn.decimals)),H.next=80;break;case 78:P=parseInt(x)*6400*parseInt(a.rewardPerBlock)/(parseInt(a.totalSupply)+parseInt(x)),isNaN(P)||Jt(t.dfoCore.toDecimals(t.dfoCore.toFixed(P),nn.decimals));case 80:H.t2=nr,H.t3=o,H.t4=hr.methods.openPosition(t.dfoCore.getContextElement("prestoAddress"),O,s.options.address,_),H.t5=T,H.t6=N,H.t7=g,H.t8=y,H.t9=v.options.address,H.t10=m.options.address;if(!l.involvingETH||v.options.address!==f){H.next=93;break}H.t11="ETH",H.next=96;break;case 93:return H.next=95,v.methods.symbol().call();case 95:H.t11=H.sent;case 96:H.t12=H.t11;if(!l.involvingETH||m.options.address!==f){H.next=101;break}H.t13="ETH",H.next=104;break;case 101:return H.next=103,m.methods.symbol().call();case 103:H.t13=H.sent;case 104:H.t14=H.t13,H.t15={ethValue:H.t3,transaction:H.t4,firstTokenAmount:H.t5,secondTokenAmount:H.t6,token0decimals:H.t7,token1decimals:H.t8,token0Address:H.t9,token1Address:H.t10,token0Symbol:H.t12,token1Symbol:H.t14},(0,H.t2)(H.t15),H.next=112;break;case 109:H.prev=109,H.t16=H["catch"](0),console.error(H.t16);case 112:cr(!1);case 113:case"end":return H.stop()}},n,this,[[0,109]])}));return function(n){return e.apply(this,arguments)}}(),Mr=function(){var t=a.rewardPerBlock,n=c.maxStakeable,r=parseInt(t)*Math.pow(10,18-nn.decimals),i=parseInt(n)*Math.pow(10,18-Zt.decimals),s=r*(1/i);return $?window.formatMoney(s*parseInt(c.blockDuration),6):parseInt(d)>=parseInt(a.endBlock)?0:window.formatMoney(s*(parseInt(a.endBlock)-parseInt(d)),6)},_r=function(){return F?Dr():Pr()},Dr=function(){return},Pr=function(){return R&&fn&&c.free?React.createElement("div",{className:"FarmActions"},React.createElement("input",{type:"range",value:on,onChange:function(t){return un(parseInt(t.target.value))},className:"form-control-range",id:"formControlRange"}),React.createElement("div",{className:"Web2ActionsBTNs"},React.createElement("p",{className:"BreefRecap"},React.createElement("b",null,"Amount:")," ",on,"% (",window.formatMoney(r.toDecimals(r.toFixed(parseInt(hn.liquidityPoolAmount)*on/100).toString(),Qt.decimals),Qt.decimals)," ",Qt.symbol," - ",hn.tokens.map(function(e,t){return React.createElement("span",{key:e.address}," ",window.formatMoney(r.toDecimals(r.toFixed(parseInt(hn.tokensAmounts[t].full||hn.tokensAmounts[t])*on/100).toString(),e.decimals),e.decimals)," ",e.symbol," ")}),")"),React.createElement("a",{className:"web2ActionBTN",onClick:function(){return un(10)}},"10%"),React.createElement("a",{className:"web2ActionBTN",onClick:function(){return un(25)}},"25%"),React.createElement("a",{className:"web2ActionBTN",onClick:function(){return un(50)}},"50%"),React.createElement("a",{className:"web2ActionBTN",onClick:function(){return un(75)}},"75%"),React.createElement("a",{className:"web2ActionBTN",onClick:function(){return un(90)}},"90%"),React.createElement("a",{className:"web2ActionBTN",onClick:function(){return un(100)}},"MAX")),React.createElement("div",{className:"row"},React.createElement("div",{className:"QuestionRegular"},React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"To Pair"),React.createElement("input",{name:"outputType",type:"radio",value:"to-pair",checked:Xn==="to-pair",onChange:Ar})),React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"To LP Token"),React.createElement("input",{name:"outputType",type:"radio",value:"to-lp",checked:Xn==="to-lp",onChange:Ar})))),React.createElement("div",{className:"Web2ActionsBTNs"},C?React.createElement("a",{className:"Web3ActionBTN",disabled:C},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{onClick:function(){return Tr()},className:"Web3ActionBTN"},"Remove"))):React.createElement("div",{className:"FarmActions"},(parseInt(a.endBlock)>parseInt(d)||fn)&&React.createElement("div",{className:"QuestionRegular"},a.active&&(c.free||!fn)&&parseInt(a.endBlock)>parseInt(d)&&React.createElement(React.Fragment,null,React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"From Pair"),React.createElement("input",{name:"inputType-"+s.options.address+"-"+i,type:"radio",value:"add-pair",checked:Un==="add-pair",onChange:function(t){return Lr(t)}})),(!fn||Dn||!c.free)&&React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"From ETH (BETA)"),React.createElement("input",{name:"inputType-"+s.options.address+"-"+i,type:"radio",value:"add-eth",checked:Un==="add-eth",onChange:function(t){return Lr(t)}})),React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"From LP Token"),React.createElement("input",{name:"inputType-"+s.options.address+"-"+i,type:"radio",value:"add-lp",checked:Un==="add-lp",onChange:function(t){return Lr(t)}})))),Un==="add-pair"?React.createElement(React.Fragment,null,At.map(function(e,t){return React.createElement("div",{key:e.address,className:"InputTokenRegular"},React.createElement(_2.Input,{showMax:!0,address:e.address,value:_t[t].value||window.fromDecimals(_t[t],e.decimals,!0),balance:e.balance,min:0,onChange:function(n){return Er(n.target.value,t)},showCoin:!0,showBalance:!0,name:e.symbol}))}),parseFloat(Rt)>0&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},React.createElement("b",null,"LP tokens"),":",React.createElement("span",null," ",window.formatMoney(r.toDecimals(Rt,Qt.decimals),Qt.decimals)," ",Qt.symbol))),React.createElement("label",{className:"OptionalThingsFarmers",htmlFor:"openPositionWallet1"},React.createElement("input",{className:"form-check-input",type:"checkbox",checked:Dn,onChange:function(t){t.target.checked||jn(""),Pn(t.target.checked)},id:"openPositionWallet1"}),React.createElement("p",null,"External Owner")),Dn&&React.createElement("div",{className:"DiffWallet"},React.createElement("input",{type:"text",className:"TextRegular",placeholder:"Position owner address",value:Bn,onChange:function(t){return jn(t.target.value)},id:"uniqueOwner"}),React.createElement("p",{className:"BreefExpl"},'Open this farming position as another wallet - The wallet you insert here will be the owner of the entire position and Farm Tokens (if "Locked Position")')),!c.free&&nn&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},"Total Rewards until end block: ",React.createElement("br",null),React.createElement("b",null,window.formatMoney(Wt,nn.decimals)," ",nn.symbol)),React.createElement("p",{className:"BreefExpl"},"Once you lock this liquidity you'll be able to withdraw it at the Setup End Block. If you want to Unlock this position earlier, you'll need to pay a Penalty Fee (in Reward Tokens) + all of the Reward Tokens you Claimed from this position + All of the Farm Token you're minting (representing your LP tokens locked).")),c.free&&nn&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},"Estimated reward per day: ",React.createElement("br",null),React.createElement("b",null,window.formatMoney($t,nn.decimals)," ",nn.symbol))),React.createElement("div",{className:"Web3BTNs"},Ht.some(function(e){return!e})&&React.createElement(React.Fragment,null,kr()),x?React.createElement("a",{className:"Web3ActionBTN",disabled:x},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{className:"Web3ActionBTN",onClick:function(){return xr()},disabled:Ht.some(function(e){return!e})||_t.some(function(e){return e===0})},"Add Liquidity"))):Un==="add-lp"?React.createElement(React.Fragment,null,React.createElement("div",{className:"InputTokenRegular"},React.createElement(_2.Input,{showMax:!0,address:Qt.contract.options.address,value:Rt.value||window.fromDecimals(Rt,Qt.decimals,!0),balance:window.fromDecimals(Qt.balance,Qt.decimals,!0),min:0,onChange:function(t){return Sr(t.target.value)},showCoin:!0,showBalance:!0,name:Qt.symbol})),parseFloat(Rt.value||Rt)>0&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},React.createElement("b",null,"Pair"),":",At.map(function(e,t){return React.createElement("span",{key:e.address}," ",_t[t].value||window.formatMoney(r.toDecimals(_t[t],e.decimals),e.decimals)," ",e.symbol)}))),React.createElement("label",{className:"OptionalThingsFarmers",htmlFor:"openPosition2"},React.createElement("input",{className:"form-check-input",type:"checkbox",checked:Dn,onChange:function(t){t.target.checked||jn(""),Pn(t.target.checked)},id:"openPosition2"}),React.createElement("p",null,"External Owner")),Dn&&React.createElement("div",{className:"DiffWallet"},React.createElement("input",{type:"text",className:"TextRegular",placeholder:"Position owner address",value:Bn,onChange:function(t){return jn(t.target.value)},id:"uniqueOwner"}),React.createElement("p",{className:"BreefExpl"},'Open this farming position as another wallet - The wallet you insert here will be the owner of the entire position and Farm Tokens (if "Locked Position")')),!c.free&&nn&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},"Total Rewards until end block: ",React.createElement("br",null),React.createElement("b",null,window.formatMoney(Wt,nn.decimals)," ",nn.symbol)),React.createElement("p",{className:"BreefExpl"},"Once you lock this liquidity you'll be able to withdraw it at the Setup End Block. If you want to Unlock this position earlier, you'll need to pay a Penalty Fee (in Reward Tokens) + all of the Reward Tokens you Claimed from this position + All of the Farm Token you're minting (representing your LP tokens locked).")),c.free&&nn&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},React.createElement("b",null,"Estimated reward per day"),": ",window.formatMoney($t,nn.decimals)," ",nn.symbol)),React.createElement("div",{className:"Web3BTNs"},!Qt.approval&&React.createElement(React.Fragment,null,kr(!0)),x?React.createElement("a",{className:"Web3ActionBTN",disabled:x},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{className:"Web3ActionBTN",onClick:function(){return xr()},disabled:!Qt.approval||parseFloat(Rt)===0},"Add Liquidity"))):Un==="add-eth"?React.createElement(React.Fragment,null,React.createElement("div",{className:"InputTokenRegular"},React.createElement(_2.Input,{showMax:!0,address:r.voidEthereumAddress,value:Jn,balance:r.toDecimals(Gn,18),min:0,onChange:function(t){return Or(t.target.value)},showCoin:!0,showBalance:!0,name:"ETH"})),React.createElement("div",{className:"DiffWallet"},!1,lr&&React.createElement(_Loading.default,null),tr&&React.createElement("p",{className:"BreefRecap"},"Position Weight: ",React.createElement("br",null),React.createElement("b",null,window.fromDecimals(tr.firstTokenAmount,tr.token0decimals)," ",tr.token0Symbol)," and ",React.createElement("b",null,window.fromDecimals(tr.secondTokenAmount,tr.token1decimals)," ",tr.token1Symbol))),React.createElement("label",{className:"OptionalThingsFarmers",htmlFor:"openPosition2"},React.createElement("input",{className:"form-check-input",type:"checkbox",checked:Dn,onChange:function(t){t.target.checked||jn(""),Pn(t.target.checked)},id:"openPosition2"}),React.createElement("p",null,"External Owner")),Dn&&React.createElement("div",{className:"DiffWallet"},React.createElement("input",{type:"text",className:"TextRegular",placeholder:"Position owner address",value:Bn,onChange:function(t){return jn(t.target.value)},id:"uniqueOwner"}),React.createElement("p",{className:"BreefExpl"},'Open this farming position as another wallet - The wallet you insert here will be the owner of the entire position and Farm Tokens (if "Locked Position")')),!c.free&&nn&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},"Total Rewards until end block: ",React.createElement("br",null),React.createElement("b",null,window.formatMoney(Wt,nn.decimals)," ",nn.symbol)),React.createElement("p",{className:"BreefExpl"},"Once you lock this liquidity you'll be able to withdraw it at the Setup End Block. If you want to Unlock this position earlier, you'll need to pay a Penalty Fee (in Reward Tokens) + all of the Reward Tokens you Claimed from this position + All of the Farm Token you're minting (representing your LP tokens locked).")),c.free&&nn&&React.createElement("div",{className:"DiffWallet"},React.createElement("p",{className:"BreefRecap"},"Estimated reward per day: ",React.createElement("br",null),React.createElement("b",null,window.formatMoney($t,nn.decimals)," ",nn.symbol))),React.createElement("div",{className:"Web3BTNs"},x?React.createElement("a",{className:"Web3ActionBTN",disabled:x},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{className:"Web3ActionBTN",onClick:function(){return xr()},disabled:parseFloat(Jn)===0},"Add Liquidity")),Z&&Un==="add-eth"&&React.createElement("div",{className:"BetaAllert"},React.createElement("p",{className:"BreefRecap"},React.createElement("b",null,'The Presto "From ETH" feature is in beta. You might received a failed transaction. Use it at your own risk!')))):React.createElement(React.Fragment,null))};return g||!a?React.createElement("div",{className:n},React.createElement("div",{className:"row px-2 farming-component-main-row"},React.createElement("div",{className:"col-12 flex justify-content-center align-items-center"},React.createElement("div",{className:"spinner-border text-secondary",role:"status"},React.createElement("span",{className:"visually-hidden"}))))):React.createElement("div",{className:n},React.createElement("div",{className:"FarmSetupMain"},React.createElement("h5",null,React.createElement("b",null,c.free?"Free Farming":"Locked Farming"," ",!a.active&&$?React.createElement("span",{className:"text-secondary"},Q?"(new)":"(soon)"):a.active?React.createElement(React.Fragment,null):React.createElement("span",{className:"text-danger"},"(inactive)")," ",parseInt(a.endBlock)<=d&&parseInt(a.endBlock)!==0&&React.createElement("span",null,"(ended)"))," ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"/token/"+c.liquidityPoolTokenAddress},nt.name)),React.createElement("aside",null,parseInt(a.endBlock)>0?React.createElement("p",null,React.createElement("b",null,"block end"),": ",React.createElement("a",{className:"BLKEMD",target:"_blank",href:t.dfoCore.getContextElement("etherscanURL")+"block/"+a.endBlock},a.endBlock)):React.createElement("p",null,React.createElement("b",null,"Duration"),": ",gr(c.blockDuration)),!c.free&&React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("b",null,"Limit"),": ",t.dfoCore.toDecimals(c.maxStakeable,Zt.decimals)," ",Zt.symbol),React.createElement("p",null,React.createElement("b",null,"Penalty fee"),": ",parseInt(c.penaltyFee)===0?"0":t.dfoCore.formatMoney(t.dfoCore.toDecimals(t.dfoCore.toFixed(c.penaltyFee),18)*100,18),"%")),c.minStakeable>0&&React.createElement("p",null,React.createElement("b",null,"Min to Farm"),": ",window.formatMoney(window.fromDecimals(c.minStakeable,Zt.decimals,!0),6)," ",Zt.symbol)),React.createElement("div",{className:"SetupFarmingInstructions"},React.createElement("p",null,At.map(function(e,n){return React.createElement("figure",{key:e.address},n!==0?"+ ":"",e.address!==t.dfoCore.voidEthereumAddress?React.createElement("a",{target:"_blank",href:t.dfoCore.getContextElement("etherscanURL")+"token/"+e.address},React.createElement(_Coin.default,{address:e.address})):React.createElement(_Coin.default,{address:e.address})," ")})," = ",React.createElement("b",null,"APY"),": ",In<0?"(Insufficient Liquidity)":In===0?"(Missing Price Feed)":window.formatMoney(In,3)+"%")),React.createElement("div",{className:"SetupFarmingOthers"},c.free?React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("b",null,"Daily Rate"),": ",t.dfoCore.toDecimals(parseInt(a.rewardPerBlock)*6400,nn.decimals,6)," ",nn.symbol," ",React.createElement("span",null,"(Shared)")),React.createElement("p",null,React.createElement("b",null,"Total Deposited"),": ",t.dfoCore.toDecimals(parseInt(a.totalSupply),Qt.decimals,6)," LP (",At.map(function(e,n){return React.createElement("span",{key:e.address},t.dfoCore.toDecimals(e.liquidity,e.decimals,6)," ",e.symbol,n!==At.length-1?" - ":"")}),")")):React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("b",null,"Available to Farm"),": ",window.fromDecimals(parseInt(c.maxStakeable)-parseInt(a.totalSupply),Zt.decimals)," ",Zt.symbol),React.createElement("p",null,React.createElement("b",null,"Rate"),": ",Mr()," ",nn.symbol," (fixed) (for every ",Zt.symbol," locked until the end block)")))),React.createElement("div",{className:"YourFarmingPositions"},c.free?React.createElement(React.Fragment,null,React.createElement("div",{className:"FarmYou"},fn&&React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("b",null,"Your Deposit"),": ",window.formatMoney(window.fromDecimals(hn.liquidityPoolAmount,Qt.decimals,!0),6)," ",Qt.symbol," - ",hn.tokens.map(function(e,t){return React.createElement("span",{key:e.address}," ",window.formatMoney(window.fromDecimals(hn.tokensAmounts[t],e.decimals,!0),6)," ",e.symbol," ")}))),$&&React.createElement(React.Fragment,null,Q&&React.createElement(React.Fragment,null,w?React.createElement("a",{className:"Web3ActionBTN",disabled:w},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{className:"Web3ActionBTN",onClick:function(){yr()}},"Activate")),!Q&&React.createElement(React.Fragment,null,React.createElement("p",{className:"BreefRecap"},"Not ready to be activated, come back at another time"))),o&&ct&&!F&&parseInt(c.lastSetupIndex)===parseInt(i)&&o&&React.createElement("a",{className:"web2ActionBTN",onClick:function(){B(!1),U(!1),I(!0)}},"Edit"),F&&React.createElement("a",{className:"backActionBTN",onClick:function(){B(!1),U(!1),I(!1)}},"Close"),!H&&parseInt(a.endBlock)>parseInt(d)&&React.createElement("a",{className:"web2ActionBTN",onClick:function(){B(!0),U(!1),I(!1)}},"Farm"),H&&React.createElement("a",{className:"backActionBTN",onClick:function(){B(!1),U(!1),I(!1)}},"Close"),!R&&fn&&React.createElement("a",{className:"web2ActionBTN",onClick:function(){B(!1),U(!0),I(!1)}},"Remove"),R&&React.createElement("a",{className:"backActionBTN",onClick:function(){B(!1),U(!1),I(!1)}},"Close")),fn&&React.createElement("div",{className:"Farmed"},React.createElement("p",null,React.createElement("b",null,"Daily Earnings"),": ",window.formatMoney(r.toDecimals((parseInt(a.rewardPerBlock)*6400*parseInt(hn.liquidityPoolAmount)/parseInt(a.totalSupply)).toString().split(".")[0],nn.decimals),9)," ",nn.symbol),React.createElement("p",null,React.createElement("b",null,"Available"),": ",window.fromDecimals(vn,nn.decimals,!0)," ",nn.symbol),W?React.createElement("a",{onClick:function(){return X(!1)},className:"backActionBTN"},"Close"):React.createElement("a",{onClick:function(){return X(!0)},className:"web2ActionBTN"},"Transfer"),A?React.createElement("a",{className:"Web3ActionBTN",disabled:A},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{onClick:function(){return Nr()},className:"Web3ActionBTN"},"Claim"),W&&React.createElement("div",{className:"Tranferpos"},React.createElement("input",{type:"text",className:"TextRegular",placeholder:"Position receiver",value:at,onChange:function(t){return ft(t.target.value)},id:"transferAddress"}),_?React.createElement("a",{className:"Web3ActionBTN",disabled:_},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{onClick:function(){return Cr(fn.positionId)},className:"Web3ActionBTN"},"Transfer")))):React.createElement(React.Fragment,null,parseInt(xt)>0&&React.createElement("div",{className:"LockedFarmTokensPosition"},React.createElement("p",null,React.createElement("b",null,"Your Farm ITEM (fLP) Balance"),":"),React.createElement("p",null,window.formatMoney(window.fromDecimals(xt,dt,!0),9)," (",At.map(function(e,t){return(parseInt(xt)===0?0:window.formatMoney(window.fromDecimals(Ct[t],e.decimals,!0),3))+" "+e.symbol+(t!==At.length-1?" - ":"")}),")",React.createElement("a",{className:"MetamaskAddButton",onClick:function(){return t.dfoCore.addTokenToMetamask(gt,"fLP",dt)}},React.createElement("img",{height:14,src:_metamaskFox.default,alt:"Metamask",className:"mb-1"})," Add ","fLP"))),parseInt(d)>=parseInt(a.endBlock)&&parseInt(xt)>0&&React.createElement(React.Fragment,null,React.createElement("div",{className:"QuestionRegular"},React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"To Pair"),React.createElement("input",{name:"outputType-"+s.options.address+"-"+i,type:"radio",value:"to-pair",checked:Xn==="to-pair",onChange:Ar})),React.createElement("label",{className:"PrestoSelector"},React.createElement("span",null,"To LP Token"),React.createElement("input",{name:"outputType-"+s.options.address+"-"+i,type:"radio",value:"to-lp",checked:Xn==="to-lp",onChange:Ar}))),C?React.createElement("a",{className:"Web3ActionBTN Web3ActionBTNV",disabled:C},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):parseInt(d)>=parseInt(a.endBlock)?React.createElement("a",{className:"Web3ActionBTN Web3ActionBTNV",onClick:function(){return Tr()}},"Withdraw Liquidity"):React.createElement(React.Fragment,null)),yn.length>0&&React.createElement(React.Fragment,null,yn.map(function(e,n){return React.createElement(_LockedPositionComponent.default,{key:n,farmTokenBalance:xt,farmTokenSymbol:wt,farmTokenDecimals:dt,onComplete:function(n){t.addTransaction(n),pr()},lmContract:s,position:e,blockNumber:d,setup:a,setupInfo:c,dfoCore:r,rewardTokenInfo:nn,setupTokens:At,lpTokenInfo:Qt,lockedPositionStatus:En[n],lockedPositionReward:Tn[n],mainTokenInfo:Zt,onRewardTokenApproval:function(){return rn(_extends({},nn,{approval:!0}))}})})),($||o&&ct&&parseInt(c.lastSetupIndex)===parseInt(i)||parseInt(a.endBlock)>parseInt(d))&&React.createElement("div",{className:"FarmYou"},$&&React.createElement(React.Fragment,null,Q&&React.createElement(React.Fragment,null,w?React.createElement("a",{className:"Web3ActionBTN",disabled:w},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{className:"Web3ActionBTN",onClick:function(){yr()}},"Activate")),!Q&&React.createElement(React.Fragment,null,React.createElement("p",{className:"BreefRecap"},"Not ready to be activated, come back at another time"))),o&&ct&&!F&&parseInt(c.lastSetupIndex)===parseInt(i)&&React.createElement("a",{className:"web2ActionBTN",onClick:function(){B(!1),U(!1),I(!0)}},"Edit"),F&&React.createElement("a",{className:"backActionBTN",onClick:function(){B(!1),U(!1),I(!1)}},"Close"),!H&&parseInt(a.endBlock)>parseInt(d)&&React.createElement("a",{className:"web2ActionBTN",onClick:function(){B(!0),U(!1),I(!1)}},"Farm"),H&&React.createElement("a",{className:"backActionBTN",onClick:function(){B(!1),U(!1),I(!1)}},"Close")))),(H||R)&&!F?React.createElement(React.Fragment,null,React.createElement("hr",null),_r()):React.createElement("div",null),F&&!H&&!R?Dr():React.createElement("div",null))},mapStateToProps=function(t){return{}},mapDispatchToProps=function(t){return{addTransaction:function(n){return t((0,_actions.addTransaction)(n))}}},_default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(SetupComponent);exports.default=_default;function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function require(e){if(e==="react")return React;if(e==="prop-types")return PropTypes;if(e==="react-redux")return{connect:function(){return function(t){window[t.name]=function(e){return t(injectGlobalProps(e))}}}};if(e==="react-router")return{useParams:function(){return{}}};var t=e.substring(e.lastIndexOf("/")+1);return t==="context.json"?_extends({},window.context,{"default":window.context}):t.endsWith(".png")?"assets/img/"+t:t.substring(0)===t.substring(0).toLowerCase()?window:window[t]}function injectGlobalProps(e){var t=_extends({},e);return t.dfoCore=_extends({},window,t.dfoCore),t.dfoCore.address=window.walletAddress,t.dfoCore.web3=window.web3,t.dfoCore.networkId=window.networkId,t.dfoCore.getContextElement=function(t){return window.getNetworkElement(t)||window.context[t]},t.dfoCore.getContract=function(t,n){return new Promise(function(e){e(window.newContract(t,n||undefined))})},t.dfoCore.toDecimals=function(){return window.fromDecimals.apply(window,arguments)},t.dfoCore.fromDecimals=function(){return window.toDecimals.apply(window,arguments)},t.dfoCore.toFixed=function(t){return window.numberToString(t)},t.dfoCore.getBlockNumber=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=parseInt,t.next=3,window.web3.eth.getBlockNumber();case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}},n,this)}));return t}(),t}function ImportReact(e){var t=e.name||e.displayName,n=e.render;return window[t]=window[t]||React.createClass(_extends({},e,{displayName:t,render:function(){var r={};return this.props&&Object.entries(this.props).forEach(function(e){return r[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return r[e[0]]=e[1]}),r.props&&Object.entries(r.props).forEach(function(e){return r[e[0]]=e[1]}),delete r.props,r.parentReactElement=this,r.element=this.props.element,React.createElement("div",{className:e.className},React.createElement(window[n],injectGlobalProps(r)))}}))}window.exports=window.exports||{};function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _propTypes=_interopRequireDefault(require("prop-types")),_react=require("react"),ApproveButton=function(t){var n=t.contract,r=t.spender,i=t.from,s=t.text,o=t.onApproval,u=t.isERC1155,a=t.onError,f=t.disabled,l=(0,_react.useState)(!1),c=l[0],h=l[1],p=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,s,f,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:h(!0);if(u){c.next=19;break}return c.prev=2,c.next=5,n.methods.approve(r,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").estimateGas({from:i});case 5:return e=c.sent,c.next=8,n.methods.approve(r,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").send({from:i,gas:e});case 8:s=c.sent,h(!1),o(s),c.next=17;break;case 13:c.prev=13,c.t0=c["catch"](2),h(!1),a(c.t0);case 17:c.next=34;break;case 19:return c.prev=19,c.next=22,n.methods.setApprovalForAll(r,!0).estimateGas({from:i});case 22:return f=c.sent,c.next=25,n.methods.setApprovalForAll(r,!0).send({from:i,gas:f});case 25:l=c.sent,h(!1),o(l),c.next=34;break;case 30:c.prev=30,c.t1=c["catch"](19),h(!1),a(c.t1);case 34:case"end":return c.stop()}},t,this,[[2,13],[19,30]])}));return function(){return e.apply(this,arguments)}}();return c?React.createElement("a",{className:"ApproveBTN",disabled:c},React.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})):React.createElement("a",{onClick:function(){return p()},disabled:f,className:"ApproveBTN"},s||"Approve")};ApproveButton.propTypes={from:_propTypes.default.string,contract:_propTypes.default.any,spender:_propTypes.default.string,text:_propTypes.default.string,onApproval:_propTypes.default.func,onError:_propTypes.default.func};var _default=ApproveButton;exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _propTypes=_interopRequireDefault(require("prop-types")),_react=require("react"),_defaultLogo=_interopRequireDefault(require("../../../assets/images/default-logo.png")),_eth=_interopRequireDefault(require("../../../assets/images/eth.png")),_reactRedux=require("react-redux"),Coin=function(t){var n=t.forcedImage,r=t.height,i=(0,_react.useState)(t.dfoCore.getContextElement("trustwalletImgURLTemplate").split("{0}").join(window.web3.utils.toChecksumAddress(t.address))),s=i[0],o=i[1],u=t.address===window.voidEthereumAddress?_eth.default:s,a=t.dfoCore.web3.utils.toChecksumAddress(t.address),f=t.dfoCore.itemsTokens.filter(function(e){return e.address===a})[0];f&&(u=f.logoURI);var l=function(){o("assets/img/loadMonolith.png"),window.tryRetrieveItemImage(a).then(o)};return React.createElement("img",{className:t.className,height:r||24,src:window.formatLink(n||u),onError:l})};Coin.propTypes={className:_propTypes.default.string,address:_propTypes.default.string,height:_propTypes.default.number};var mapStateToProps=function(t){var n=t.core,r=t.session,i=n.dfoCore,s=r.inflationSetups;return{dfoCore:i,inflationSetups:s}},_default=(0,_reactRedux.connect)(mapStateToProps)(Coin);exports.default=_default;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _Coin=_interopRequireDefault(require("../coin/Coin")),_propTypes=_interopRequireDefault(require("prop-types")),_react=require("react"),Input=function(t){var n=t.label,r=t.min,i=t.max,s=t.value,o=t.onChange,u=t.showBalance,a=t.balance,f=t.showMax,l=t.showCoin,c=t.address,h=t.name,p=t.tokenImage,d=t.extra,v=(0,_react.useState)(s),m=v[0],g=v[1];(0,_react.useEffect)(function(){g(s)},[s]);var y=function(t){g(t),o(b(t))},b=function(t,n){return n?{target:{value:a}}:t?{target:{value:t}}:{target:{value:0}}};return React.createElement(React.Fragment,null,n&&React.createElement("h6",null,React.createElement("b",null,n)),React.createElement("div",{className:"input-group",tabIndex:0},React.createElement("input",{disabled:t.disabled,type:"number",lang:"en-US",step:"any",className:"form-control "+(parseFloat(m)>parseFloat(a)?"is-invalid":""),value:m,min:r,max:i||a,onChange:function(t){return y(t.target.value)}}),l&&React.createElement("div",{className:"input-group-append"},React.createElement("span",{className:"input-group-text "+(parseFloat(m)>parseFloat(a)?"is-invalid":""),id:""},React.createElement(_Coin.default,{address:c,forcedImage:p})," ",h))),React.createElement("aside",null,f&&React.createElement("a",{onClick:function(){return o(b(0,a))},type:"button"},"MAX"),u&&React.createElement("span",null,"Balance: ",window.formatMoney(a,2)," ",h," ",d?d:"")))},_default=Input;exports.default=_default;function Link(e){return React.createElement("a",{target:"_blank",href:e.href||window.context.covenantsURL+e.to,className:e.className},e.children)};function Loading(){return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-12"},React.createElement("div",{className:"row justify-content-center"},React.createElement("div",{className:"spinner-border text-secondary",role:"status"},React.createElement("span",{className:"visually-hidden"})))))}exports.__esModule=!0,exports.default=Loading;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}exports.__esModule=!0,exports.default=void 0;var _propTypes=_interopRequireDefault(require("prop-types")),_react=require("react"),TokenInput=function(t){function l(){if(!a)return;n(a),t.deleteAfterInsert&&f("")}var n=t.onClick,r=t.placeholder,i=t.text,s=t.width,o=t.label,u=(0,_react.useState)(t.tokenAddress||""),a=u[0],f=u[1];return React.createElement("div",{className:"LoadInput"},o&&React.createElement("h6",null,React.createElement("b",null,o)),React.createElement("input",{type:"text",className:"TextRegular",value:a,onChange:function(t){return f(t.target.value)},placeholder:r,"aria-label":r}),React.createElement("a",{className:"web2ActionBTN",onClick:l},i))};TokenInput.propTypes={label:_propTypes.default.string,onClick:_propTypes.default.func.isRequired,placeholder:_propTypes.default.string,text:_propTypes.default.string.isRequired,width:_propTypes.default.number};var _default=TokenInput;exports.default=_default;var IndexController=function(t){var n=this;n.view=t,n.tryCheckAddressBarParams=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=window.consumeAddressBarParam("collection"),t=window.consumeAddressBarParam("interoperable");if(!!e||!!t){u.next=4;break}return u.abrupt("return");case 4:n.view.setState({loadingCollections:!0}),i=window.consumeAddressBarParam("item");if(!t){u.next=24;break}return s=window.newContract(window.context.IEthItemInteroperableInterfaceABI,t),u.next=10,window.blockchainCall(s.methods.objectId);case 10:return i=u.sent,u.prev=11,u.next=14,window.blockchainCall(s.methods.mainInterface);case 14:e=u.sent,u.next=24;break;case 17:return u.prev=17,u.t0=u["catch"](11),u.t1=window.web3.utils,u.next=22,window.blockchainCall(window.newContract(window.context.IERC20ItemWrapperABI,t).methods.mainWrapper);case 22:u.t2=u.sent,e=u.t1.toChecksumAddress.call(u.t1,u.t2);case 24:return u.next=26,window.loadSingleCollection(e);case 26:u.t3=u.sent,o={collection:u.t3},u.t4=o.objectId=i;if(!u.t4){u.next=33;break}return u.next=32,window.loadItemData(o);case 32:o.item=u.sent;case 33:return n.view.emit("section/change","spa/"+(o.item?"item":"collection"),o),u.abrupt("return",!0);case 35:case"end":return u.stop()}},r,this,[[11,17]])}));return t}(),n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.ethItemOrchestrator=window.newContract(window.context.ethItemOrchestratorABI,window.getNetworkElement("ethItemOrchestratorAddress")),t.prev=1,t.t0=window,t.t1=window.context.KnowledgeBaseABI,t.next=6,window.blockchainCall(window.ethItemOrchestrator.methods.knowledgeBase);case 6:t.t2=t.sent,window.currentEthItemKnowledgeBase=t.t0.newContract.call(t.t0,t.t1,t.t2),t.next=12;break;case 10:t.prev=10,t.t3=t["catch"](1);case 12:return t.prev=12,t.t4=window,t.t5=window.context.IEthItemFactoryABI,t.next=17,window.blockchainCall(window.ethItemOrchestrator.methods.factory);case 17:t.t6=t.sent,window.currentEthItemFactory=t.t4.newContract.call(t.t4,t.t5,t.t6),t.next=23;break;case 21:t.prev=21,t.t7=t["catch"](12);case 23:return t.prev=23,t.t8=window,t.t9=window.context.W20ABI,t.next=28,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.erc20Wrapper);case 28:t.t10=t.sent,window.currentEthItemERC20Wrapper=t.t8.newContract.call(t.t8,t.t9,t.t10),t.next=34;break;case 32:t.prev=32,t.t11=t["catch"](23);case 34:try{window.ENSController=window.newContract(window.context.ENSABI,window.context.ENSControllerAddres)}catch(r){}return t.next=37,n.tryCheckAddressBarParams();case 37:return t.next=39,n.loadCollections(!0);case 39:case"end":return t.stop()}},r,this,[[1,10],[12,21],[23,32]])}));return t}(),n.loadCollections=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return e&&n.view.setState({collections:null}),(!n.view.state||!n.view.state.collections)&&n.view.setState({loadingCollections:!0}),t={},Object.entries(window.context.ethItemFactoryEvents).forEach(function(e){return t[window.web3.utils.sha3(e[0])]=e[1]}),i=[[Object.keys(t).filter(function(e){return window.networkId!==1?!0:t[e].indexOf("721")===-1})]],window.networkId===1&&i.push([Object.keys(t).filter(function(e){return t[e].indexOf("721")!==-1}),[],[window.web3.eth.abi.encodeParameter("uint256","2"),window.web3.eth.abi.encodeParameter("uint256","3")]]),T.next=8,window.blockchainCall(window.ethItemOrchestrator.methods.factories);case 8:return s=T.sent,(window.getNetworkElement("additionalFactories")||[]).map(function(e){return window.web3.utils.toChecksumAddress(e)}).filter(function(e){return s.indexOf(e)===-1}).forEach(function(e){return s.push(e)}),o=[],T.next=13,window.loadBlockSearchTranches();case 13:u=T.sent,a=function(t){return new Promise(function(e,r){o.push.apply(o,t),n.view.setState({collections:o},function(){return n.refreshCollectionData(t).then(e).catch(r)})})},f=[],l=u,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 17:if(!c){T.next=23;break}if(!(h>=l.length)){T.next=20;break}return T.abrupt("break",57);case 20:p=l[h++],T.next=27;break;case 23:h=l.next();if(!h.done){T.next=26;break}return T.abrupt("break",57);case 26:p=h.value;case 27:d=p,v=[],m=[],g=0;case 31:if(!(g<i.length)){T.next=42;break}return y=i[g],T.t0=m.push,T.t1=m,T.next=37,window.getLogs({address:s,topics:y,fromBlock:d[0],toBlock:d[1]});case 37:T.t2=T.sent,T.t0.apply.call(T.t0,T.t1,T.t2);case 39:g++,T.next=31;break;case 42:b=0;case 43:if(!(b<m.length)){T.next=54;break}w=m[b],E=window.web3.eth.abi.decodeParameter("address",w.topics[1]),S=window.web3.utils.toChecksumAddress(window.web3.eth.abi.decodeParameter("address",w.topics[w.topics.length-1]));if(window.context.excludingCollections.indexOf(S)===-1){T.next=49;break}return T.abrupt("continue",51);case 49:x=t[w.topics[0]],v.push(window.packCollection(S,x,E));case 51:b++,T.next=43;break;case 54:f.push(a(v));case 55:T.next=17;break;case 57:return T.next=59,Promise.all(f);case 59:n.view.setState({loadingCollections:null}),n.view.emit("collections/refreshed");case 61:case"end":return T.stop()}},r,this)}));return t}(),n.refreshCollectionData=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a,f,l,c,h;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=e||n.view&&n.view.state&&n.view.state.collections;if(e){p.next=3;break}return p.abrupt("return");case 3:t=e,i=Array.isArray(t),s=0,t=i?t:t[Symbol.iterator]();case 4:if(!i){p.next=10;break}if(!(s>=t.length)){p.next=7;break}return p.abrupt("break",17);case 7:o=t[s++],p.next=14;break;case 10:s=t.next();if(!s.done){p.next=13;break}return p.abrupt("break",17);case 13:o=s.value;case 14:u=o;case 15:p.next=4;break;case 17:n.view.setState({collections:n.view.state.collections}),a=[],f=e,l=Array.isArray(f),c=0,f=l?f:f[Symbol.iterator]();case 20:if(!l){p.next=26;break}if(!(c>=f.length)){p.next=23;break}return p.abrupt("break",34);case 23:h=f[c++],p.next=30;break;case 26:c=f.next();if(!c.done){p.next=29;break}return p.abrupt("break",34);case 29:h=c.value;case 30:u=h,a.push(window.refreshSingleCollection(u,n.view));case 32:p.next=20;break;case 34:return p.next=36,Promise.all(a);case 36:n.view.setState({collections:n.view.state.collections});case 37:case"end":return p.stop()}},r,this)}));return t}()};var Index=React.createClass({displayName:"Index",requiredModules:["spa/menu","spa/wallet"],requiredScripts:["spa/connect.jsx","spa/fullLoader.jsx","spa/imported/ReactImporter.jsx"],getDefaultSubscriptions:function(){return{"ethereum/update":this.controller.loadData,"ethereum/ping":this.controller.refreshCollectionData,"collections/refresh":this.controller.loadCollections,"section/change":this.sectionChange,"wallet/toggle":this.toggleWallet}},toggleWallet:function(t){var n=t;if(n===undefined||n===null)n=!this.state||!this.state.wallet;n&&$("body").addClass("noScroll"),!n&&$("body").removeClass("noScroll"),this.setState({wallet:n})},componentDidMount:function(){this.controller.loadData()},sectionChange:function(t,n){var r=this,i=t.split("/");i=i[i.length-1].firstLetterToUpperCase(),ReactModuleLoader.load({modules:[t],callback:function(){return r.setState({section:i,props:n},function(){return r.toggleWallet(!1)})}})},render:function(){var t,n={};return this.props&&Object.entries(this.props).forEach(function(e){return n[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return n[e[0]]=e[1]}),n.props&&Object.entries(n.props).forEach(function(e){return n[e[0]]=e[1]}),delete n.props,window.walletAddress?React.createElement("section",null,React.createElement("section",null,React.createElement(Menu,{onSelection:this.sectionChange})),n.section&&React.createElement("section",{className:"loadedSection"},React.createElement(window[n.section],n)),React.createElement(Wallet,n),React.createElement("footer",null,React.createElement("section",null,React.createElement("a",{target:"_blank",href:"https://github.com/EthereansOS/"},"Github"),React.createElement("a",{target:"_blank",href:"https://docs.ethos.wiki/items/"},"Documentation"),React.createElement("a",{target:"_blank",href:"https://dapp.dfohub.com/?addr=0x7cB2Aa86fC0F3dA708783168BFd25B80F045d183"},"ETHITEM Governance"),React.createElement("a",{target:"_blank",href:"https://covenants.eth.link/#/farm/dapp/0x0074f1D1D1F0086F46EA102380635fCC460c212b"},"Farm ARTE"),React.createElement("a",(t={target:"_blank",href:"https://ethos.eth.link/"},t.target="_blank",t),"EthOS"),React.createElement("a",{href:"javascript:;","data-section":"explore",onclick:"window.connectFromHomepage(this)"},"Explore Items"),React.createElement("a",{href:"javascript:;","data-section":"wrap",onclick:"window.connectFromHomepage(this)"},"Wrap to Items"),React.createElement("a",{href:"javascript:;","data-section":"create",onclick:"window.connectFromHomepage(this)"},"Create Items"),React.createElement("a",{href:"javascript:;","data-section":"farm",onclick:"window.connectFromHomepage(this)"},"Farm Items"),React.createElement("a",{target:"_blank",href:"https://whereismydragon.eth.link","class":"Brandized"},"Where is my dragon?")),React.createElement("section",null,React.createElement("p",null,"ITEMS is a permissionless R&D protocol on top of Ethereum by the EthOS team. Use it at your own risk!")),React.createElement("img",{className:"FooterImg",src:"assets/img/footer.png"}))):React.createElement(Connect,null)}});var InnerLoader=React.createClass({displayName:"InnerLoader",render:function(){return React.createElement("span",null,"Loading...")}});var ItemController=function(t){var n=this;n.view=t,n.performMint=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=n.view.mintMoreInput.value.split(",").join(""),t=window.asNumber(e);if(!(isNaN(t)||t<=0)){o.next=4;break}throw"Amount to mint must be a number greater than 0";case 4:return i=window.asNumber(n.view.props.item.collection.decimals),s=i===1?e:window.toDecimals(e,i),o.next=8,window.blockchainCall(n.view.props.item.collection.contract.methods["mint(uint256,uint256)"],n.view.props.item.objectId,s);case 8:window.updateItemDynamicData(this.props.item,n.view),n.view.emit("collections/refresh");case 10:case"end":return o.stop()}},r,this)}));return t}(),n.performUnwrap=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=n.view.unwrapInput.value.split(",").join(""),t=window.asNumber(e);if(!(isNaN(t)||t<=0)){o.next=4;break}throw"Amount to unwrap must be a number greater than 0";case 4:i=window.asNumber(n.view.props.item.collectionDecimals),s=i===1?e:window.toDecimals(e,i);if(!(window.asNumber(s)>window.asNumber(n.view.props.item.dynamicData.balanceOfCollectionSide))){o.next=8;break}throw"You specified an insufficient amount";case 8:return o.next=10,window.blockchainCall(n.view.props.item.collection.contract.methods.burn,n.view.props.item.objectId,s);case 10:window.updateItemDynamicData(this.props.item,n.view),n.view.emit("collections/refresh");case 12:case"end":return o.stop()}},r,this)}));return t}()};function _instanceof(e,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}var Item=React.createClass({displayName:"Item",requiredScripts:["spa/lazyImageLoader.jsx","spa/innerLoader.jsx","spa/loader.jsx","spa/farmComponents/farmViewer.jsx"],requiredModules:["spa/editor"],getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return window.loadItemData(undefined,undefined,t)},"ethereum/ping":function(){return window.updateItemDynamicData(undefined,t)},"wallet/update":function(){return t.forceUpdate()}}},onClick:function(t){window.preventItem(t),this.emit("section/change","spa/collection",{collection:this.getItem().collection})},toggle:function e(t){window.preventItem(t);var n=this.state&&this.state.toggle,e=t.currentTarget.innerHTML.toLowerCase();e=n===e?null:e,this.setState({toggle:e})},renderMetadata:function(t){var n=this.state&&this.state.item||this.props.item,r=Object.keys(n.metadata);r=t?r.filter(function(e){return window.context.allowedMetadataFields.indexOf(e)===-1}):r.filter(function(e){return window.context.allowedMetadataFields.indexOf(e)!==-1});var i={};return r.forEach(function(e){return i[e]=n.metadata[e]}),this.renderMetadataObject(i,!1,t)},renderMetadataValue:function(t,n){if(_instanceof(t,Array))return this.renderMetadataArray(t,n);if(_typeof(t).toLowerCase()==="object")return this.renderMetadataObject(t);var r=React.createElement("section",{className:"subMetaValue"},t);return _typeof(t).toLowerCase()==="string"&&t.length>30&&(r=React.createElement("p",{className:"subMetaValueString",ref:function(n){return n&&(n.innerHTML=window.convertTextWithLinksInHTML(t))}})),_typeof(t).toLowerCase()==="string"&&(t.toLowerCase().indexOf("http")===0||t.toLowerCase().indexOf("ipfs")===0||t.indexOf("//")===0)&&(r=React.createElement("a",{className:"subMetaValueLink",href:window.formatLink(t),target:"_blank"},window.shortenWord(t,30))),n?this.renderShowButton(r):r},renderMetadataObject:function(t,n,r){var i=this,s=Object.entries(t).map(function(e){return React.createElement("section",{className:"subMetaValueList",key:e[0]},React.createElement("section",{className:"subMetaValueOpen"},n||r?e[0]:window.normalizeName(e[0])),i.renderMetadataValue(e[1],n||r))});return n?this.renderShowButton(s):s},renderMetadataArray:function(t,n){var r=this,i=React.createElement("ul",{className:"subMetaValueArrayList"},t.map(function(e,t){return React.createElement("li",{key:t},r.renderMetadataValue(e))}));return n?this.renderShowButton(i):i},renderShowButton:function(t){var n;t.props=t.props||{},t.props.style=t.props.style||{},t.props.style.display="none";var r=t.ref;t.ref=function(e){n=e,r&&r(e)};var i=function(t){window.preventItem(t),t.currentTarget.innerHTML=t.currentTarget.innerHTML==="Show"?"Hide":"Show",n.style.display=t.currentTarget.innerHTML==="Show"?"none":"inline-block"};return React.createElement("section",null,React.createElement("a",{className:"swowThis",href:"javascript:;",onClick:i},"Show"),t)},max:function(t){window.preventItem(t),this.unwrapInput.value=this.getItem().dynamicData.balanceOfCollectionSidePlain.split(",").join()},componentDidMount:function(){var t=this.getItem();window.setHomepageLink("?interoperable="+t.address);var n=this;window.retrieveWrappedCode(t).then(function(){return n.forceUpdate()})},wrap:function(t){window.preventItem(t);var n=this.getItem();this.emit("section/change","spa/wrap",{selectedTokenType:n.collection.category.split("W").join("ERC"),collectionAddress:n.collection.address,sourceAddress:n.sourceAddress&&n.sourceAddress!=="blank"?n.sourceAddress:n.collection.sourceAddress,tokenId:n.objectId})},transfer:function(t){window.preventItem(t);var n=this.getItem();this.emit("section/change","spa/transfer",{collectionAddress:n.collection.address,objectId:n.objectId})},getItem:function(){return this.state&&this.state.item||this.props.item},render:function(){var t=this,n=this.getItem();this.state&&this.state.item&&this.state.item.objectId!==this.props.item.objectId&&(n=this.props.item);var r=this.state?this.state.toggle:n.metadata?"metadata":"farm";return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"returntocollection"},React.createElement("a",{href:"javascript:;",onClick:this.onClick},React.createElement("img",{src:window.getElementImage(n.collection)})," ← From the ",React.createElement("b",null,n.collection.name," ",React.createElement("span",null,"(",n.collection.symbol,")"))," collection")),React.createElement("section",{className:"itemPage"},React.createElement("section",{className:"itemPageInfo"},React.createElement("figure",{className:"itemIcon"},React.createElement(LazyImageLoader,{src:window.getElementImage(n)})),React.createElement("article",{className:"itemInfo"},React.createElement("section",{className:"itemFundamentals"},React.createElement("h3",{className:"ItemTitle"},n.name," ",React.createElement("span",null," (",n.symbol,")")),React.createElement("section",{className:"itemFundamentalsThing"},n.dynamicData&&React.createElement("h5",{className:"ItemSupply"},"Supply: ",window.fromDecimals(n.dynamicData.totalSupply,n.decimals)),React.createElement("br",null),React.createElement("h5",{className:"itemaddress"},React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.collection.address+"/"+n.objectId},"NFT Address")),React.createElement("h5",{className:"itemaddress"},React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"token/"+n.address},"ERC20 Address")),React.createElement("br",null),n.collection.licence_url&&React.createElement("h5",{className:"itemaddress"},React.createElement("a",{target:"_blank",href:window.formatLink(n.collection.licence_url)},"Collection Licence")),this.props.item.licence_url&&React.createElement("h5",{className:"itemaddress"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.item.licence_url)},"Item Licence"))),React.createElement("section",{className:"collectionInfoSide"},React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",onClick:window.copyHREF,href:window.getHomepageLink("?wrappedItem="+this.props.item.address),className:"collectionLink collectionLinkS BrandizedS superlink"},"Copy Link"))),React.createElement("section",{className:"itemFundamentalsThing"},n.dynamicData&&n.dynamicData.isEditable&&n.collection.extensionAddress&&n.collection.extensionAddress!==window.voidEthereumAddress&&React.createElement("span",{className:"HostInfo"},"Host ",n.collection.extensionIsContract?"Contract":"Wallet",": ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.collection.extensionAddress},window.shortenWord(n.collection.extensionAddress,6))),(n.sourceAddress!=="blank"&&n.sourceAddress!==window.voidEthereumAddress||n.collection.sourceAddress!=="blank")&&React.createElement("span",{className:"HostInfo"},"Wrapped from: ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+(n.sourceAddress!=="blank"?n.sourceAddress:n.collection.sourceAddress)},n.sourceAddress!=="blank"?n.sourceAddress:window.shortenWord(n.collection.sourceAddress,6))),React.createElement("section",{className:"itemSide"},React.createElement("a",{className:"ItemPrice",target:"_blank",href:window.context.uniswapInfoUrlTemplate.format(n.address)},"Pair Info"),React.createElement("a",{className:"ItemPrice",target:"_blank",href:window.context.uniswapSpawUrlTemplate.format(n.address)},"Uniswap | ",n.dynamicData&&React.createElement("span",null,"$ ",n.dynamicData.tokenPriceInDollarsOnUniswap?window.formatMoney(n.dynamicData.tokenPriceInDollarsOnUniswap,1):"")),React.createElement("a",{className:"ItemPrice",target:"_blank",href:window.context.openSeaItemLinkTemplate.format(n.collection.address,n.objectId)},"Opensea | ",n.dynamicData&&React.createElement("span",null," $ ",n.dynamicData.tokenPriceInDollarsOnOpenSea?window.formatMoney(n.dynamicData.tokenPriceInDollarsOnOpenSea,1):""))),n.dynamicData&&React.createElement("section",{className:"itemSide"},window.walletAddress&&n.dynamicData&&n.dynamicData.balanceOf&&n.dynamicData.balanceOf!=="0"&&React.createElement("span",{className:"ItemBalance"},"| You own: ",window.formatMoney(window.fromDecimals(n.dynamicData.balanceOf,n.decimals,!0),2)),React.createElement("br",null),this.props.item.dynamicData&&this.props.item.dynamicData.canMint&&React.createElement("section",{className:"itemSidebySide"},React.createElement("section",{className:"SettingsForOwn"},React.createElement("label",null,React.createElement("input",{type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",ref:function(n){return t.mintMoreInput=n}})),(!this.state||this.state.performing!=="mint")&&React.createElement("a",{className:""+(this.state&&this.state.performing?" disabled":""),href:"javascript:;","data-action":"mint",onClick:window.perform},"Mint"),this.state&&this.state.performing==="mint"&&React.createElement(InnerLoader,null))),React.createElement("section",{className:"SettingsForOwn"},this.props.item.collection.category!=="Native"&&this.props.item.dynamicData&&this.props.item.dynamicData.balanceOf&&this.props.item.dynamicData.balanceOf!=="0"&&React.createElement("a",{href:"javascript:;",className:"WrapButton",onClick:this.wrap},"Wrap"),this.props.item.dynamicData&&this.props.item.dynamicData.balanceOf&&this.props.item.dynamicData.balanceOf!=="0"&&React.createElement("a",{href:"javascript:;",className:"WrapButton",onClick:this.transfer},"Transfer")),this.props.item.collection.category!=="Native"&&this.props.item.dynamicData&&parseFloat(this.props.item.dynamicData.balanceOfCollectionSidePlain)>0&&React.createElement("section",{className:"SettingsForOwn"},React.createElement("label",null,React.createElement("a",{className:"MaximumBro",href:"javascript:;",onClick:this.max},"Max"),React.createElement("input",{type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",ref:function(n){return t.unwrapInput=n}})),(!this.state||this.state.performing!=="unwrap")&&React.createElement("a",{className:""+(this.state&&this.state.performing?" disabled":""),href:"javascript:;","data-action":"unwrap",onClick:window.perform},"Unwrap"),this.state&&this.state.performing==="unwrap"&&React.createElement(InnerLoader,null))))),window.renderExpandibleElement(n.description?window.convertTextWithLinksInHTML(n.description):"No description available",React.createElement("p",{className:"itemDesc"})),n.metadataMessage&&React.createElement("p",{className:"itemDesc",ref:function(t){return t&&(t.innerHTML=n.metadataMessage)}}))),React.createElement("section",{className:"collectionNav"},React.createElement("ul",null,n.metadata&&React.createElement("li",{className:r==="metadata"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle},"METADATA")),React.createElement("li",{className:r==="farm"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle},"FARM")),(this.props.item.collection.extensionCode||this.props.item.collection.modelCode||this.props.item.collection.wrappedCode)&&React.createElement("li",{className:r==="code"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"code"},"CODE")))),React.createElement("section",{className:"ItemStuff"},r==="metadata"&&React.createElement("section",{className:"ItemData"},React.createElement("section",{className:"ItemStuffOpen"}),this.renderMetadata(),this.renderMetadata(!0)),r==="code"&&React.createElement("section",{className:"collectionPageItemsCode"},this.props.item.collection.extensionCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Extension ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.collection.address}," (Etherscan)")),React.createElement(Editor,{readonly:!0,firstCode:this.props.item.collection.extensionCode})),this.props.item.collection.modelCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Main Interface ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.collection.address}," (Etherscan)")),React.createElement(Editor,{readonly:!0,firstCode:this.props.item.collection.modelCode})),this.props.item.collection.wrappedCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Interoperable Interface ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.collection.address}," (Etherscan)")),React.createElement(Editor,{readonly:!0,firstCode:this.props.item.collection.wrappedCode}))),r==="farm"&&React.createElement("section",{className:"ItemFarm"},React.createElement(FarmViewer,{itemAddress:n.address}),React.createElement("section",{className:"NewFarm"},React.createElement("a",{href:window.context.createFarmingContractURLTemplate.format(n.address),target:"_blank"},"New Farming Contract"))))))}});var LazyImageLoader=React.createClass({displayName:"LazyImageLoader",onLoad:function(){this.loader&&(this.loader.style.display="none"),this.image&&(this.image.style.display="inline-block")},onError:function(){this.loader&&(this.loader.style.display="none"),this.errorMessage&&(this.errorMessage.style.display="inline-block")},render:function(){var t=this,n=this.props.src;return n=window.formatLink(n),n.startsWith("//data")&&(n=n.substring(2)),React.createElement("section",null,React.createElement("section",{className:"LoadImg",ref:function(n){return t.loader=n}},React.createElement("img",{src:"assets/img/loadMonolith.png"})),React.createElement("img",{src:n,ref:function(n){return t.image=n},style:{display:"none"},onLoad:this.onLoad,onError:this.onError}),React.createElement("p",{ref:function(n){return t.errorMessage=n},style:{display:"none"}},"An error occurred while trying to load ",React.createElement("a",{href:window.formatLink(n),target:"_blank"},"this image")))}});var Loader=React.createClass({displayName:"Loader",render:function(){return React.createElement("figure",{className:"LoadImg"},React.createElement("img",{src:"assets/img/loadMonolith.png"}))}});var MenuController=function(t){var n=this;n.view=t,n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.AJAXRequest("data/menu.json");case 2:e=s.sent,t=0,i=n.onSection();try{t=e.indexOf(e.filter(function(e){return i?e.module===i:e.selected})[0])}catch(o){}n.view.setState({menu:e,selected:t},function(){n.view.onSelection({currentTarget:{dataset:{index:t}}})});case 7:case"end":return s.stop()}},r,this)}));return t}(),n.onSection=function(){var t=window.consumeAddressBarParam("section");return window.context.domainData&&window.location.hostname.indexOf(window.context.domainData.name)!==-1&&(t=window.location.hostname.split(".")[0],t=window.context.domainData.sections[t]),t}};var Menu=React.createClass({displayName:"Menu",getDefaultSubscriptions:function(){return{"section/change":this.onSection}},onSection:function(t){this.setState({selected:this.state.menu.indexOf(this.state.menu.filter(function(e){return e.module===t||e.otherModules&&e.otherModules.filter(function(e){return e===t}).length>0})[0])})},componentDidMount:function(){this.controller.loadData()},onSelection:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;n.setState({selected:t.currentTarget.dataset.index},function(){n.state.menu[n.state.selected]&&n.props.onSelection(n.state.menu[n.state.selected].module)})},onCollectionAddress:function(t){window.preventItem(t),this.emit("collection/search",this.searchInput.value)},render:function(){var t=this,n=this;return React.createElement("section",{className:"menuMenu"},React.createElement("a",{href:"./",className:"logo"},React.createElement("section",{className:"logoimg"}),React.createElement("span",{className:"BrandizedSSxY"}," ETHITEM")),React.createElement("section",{className:"menuSelections"},this.state&&this.state.menu&&this.state.menu.map(function(e,r){return React.createElement("section",{className:"menuSelection NoMobileForNow",key:e.module},React.createElement("a",{href:"javascript:;","data-index":r,className:"menuSelection BrandizedSSx"+(r+""==t.state.selected+""?" Selected":""),onClick:n.onSelection},e.name))}),React.createElement("section",{className:"menuSelection NoMobileForNow"},React.createElement("a",{target:"_blank",href:"https://docs.ethos.wiki/items/",className:"menuSelection BrandizedSSx"},"DOC"))),React.createElement("section",{className:"search NoMobileForNow"},React.createElement("input",{ref:function(n){return t.searchInput=n},type:"search","data-action":"onCollectionAddress",placeholder:"Search by Address",onChange:window.onTextChange,onKeyUp:window.onTextChange}),React.createElement("a",{href:"javascript:;",onClick:this.onCollectionAddress},"↵")),!window.walletAddress&&React.createElement("a",{className:"connectWallet Brandized",href:"javascript:;",onClick:window.ethereum.enable},"CONNECT"),window.walletAddress&&React.createElement("a",{className:"connectWallet",href:"javascript:;",onClick:function(){return t.emit("wallet/toggle")}},React.createElement("img",{src:window.makeBlockie(window.walletAddress)}),React.createElement("span",null,window.shortenWord(window.walletAddress,5,!0)," ←")))}});var SearchController=function(t){var n=this;n.view=t};var Search=React.createClass({displayName:"Search",render:function(){return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"searchPage"},React.createElement("section",{className:"searchPageCollection"},React.createElement("h2",null,"COLLECTIONS")),React.createElement("section",{className:"searchPageITEMS"},React.createElement("h2",null,"ITEMS"))))}});var SingleCollectionController=function(t){var n=this;n.view=t,n.loadData=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.props.showItemsCount&&n.loadItemsCount(e);case 1:case"end":return r.stop()}},r,this)}));return t}(),n.loadItemsCount=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.loadCollectionItems(e.props.collection.address);case 2:t=r.sent,e.setState({itemsCount:t.filter(function(e){return window.context.pandorasBox.indexOf(e.address)===-1}).length}),e.props.onCollectionObjectIds&&e.props.onCollectionObjectIds(t);case 5:case"end":return r.stop()}},n,this)}));return t}()};var SingleCollection=React.createClass({displayName:"SingleCollection",requiredScripts:["spa/loader.jsx","spa/innerLoader.jsx","spa/lazyImageLoader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return t.controller.loadData(t)},"collections/refreshed":function(){return window.context.W1155GroupMode===!0&&t.props.collection.category==="W1155"&&t.controller.loadData(t)}}},componentDidMount:function(){this.controller.loadData(this)},renderCollectionProblems:function(t){return React.createElement("p",null,React.createElement("h4",null,"Some error where found in this collection:"),t.map(function(e){return React.createElement("span",null,e)}))},render:function(){var t=this;if(window.context.excludingCollections.indexOf(this.props.collection.address)!==-1)return null;var n=[React.createElement(Loader,null)];return this.props.collection&&(n=[React.createElement("figure",{className:"collectionIcon"},React.createElement(LazyImageLoader,{src:window.getElementImage(this.props.collection)}),this.props.collection.isOwner&&React.createElement("h6",null,"Host"),React.createElement("span",{className:"VersionId"},"v. ",this.props.collection.modelVersion)),React.createElement("article",{className:"collectionInfo"},!this.props.miniature&&React.createElement("h3",{className:"collectionTitle"},this.props.collection.name," ",React.createElement("span",null,"(",this.props.collection.symbol,")")),this.props.miniature&&React.createElement("h3",{className:"collectionTitle"},window.shortenWord(this.props.collection.name,25)," ",React.createElement("span",null,"(",window.shortenWord(this.props.collection.symbol,6),")")),!this.props.miniature&&window.renderExpandibleElement(this.props.collection.description?window.convertTextWithLinksInHTML(this.props.collection.description):"No description available",React.createElement("p",{className:"collectionDesc"})),this.props.miniature&&React.createElement("p",{className:"collectionDesc"},this.props.collection.description?window.shortenWord(this.props.collection.description,100):"No description available"),!this.props.miniature&&this.props.collection.metadataMessage&&React.createElement("p",{className:"collectionDesc",ref:function(n){return n&&(n.innerHTML=t.props.collection.metadataMessage)}}),React.createElement("section",{className:"collectionInfoSide"},this.props.showItemsCount&&React.createElement("span",{className:"collectionItems BrandizedS"},(!this.state||this.state.itemsCount!==0&&!this.state.itemsCount)&&React.createElement(InnerLoader,null),this.state&&this.state.itemsCount>0&&this.state.itemsCount+" ITEMS"),!this.props.miniature&&React.createElement("p",null,"Version: ",React.createElement("b",null,this.props.collection.category+"_"+this.props.collection.standardVersion+"."+this.props.collection.erc20WrappedItemVersion+"."+this.props.collection.modelVersion)),this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",onClick:window.copyHREF,href:window.getHomepageLink("?collection="+this.props.collection.address),className:"collectionLink superlink"},"Copy Link"))),React.createElement("section",{className:"collectionInfoSideLinks"},this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+this.props.collection.address,className:"collectionLink"},"Contract")),this.props.showLink&&this.props.collection.extensionAddress&&this.props.collection.extensionAddress!==window.voidEthereumAddress&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+this.props.collection.extensionAddress,className:"collectionLink"},"Host")),this.props.collection.externalDNS&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.externalDNS),className:"collectionLink"},"External DNS")),this.props.collection.externalENS&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.externalENS),className:"collectionLink"},"External ENS")),this.props.collection.repoUri&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.repoUri),className:"collectionLink"},"Repo")),this.props.collection.licence_url&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.licence_url),className:"collectionLink"},"Licence")),this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{className:"collectionLink",href:window.context.openSeaItemLinkTemplate.format(this.props.collection.address),target:"_blank"},"Opensea"))))]),this.props.onClick&&(n=React.createElement("a",{href:"javascript:;","data-key":this.props.collectionKey,onClick:this.props.onClick},n)),React.createElement("section",{className:this.props.className||"collection"},n)}});var SuccessPageController=function(t){var n=this;n.view=t};var SuccessPage=React.createClass({displayName:"SuccessPage",requiredScripts:["spa/lazyImageLoader.jsx"],createItem:function(t){window.preventItem(t),this.emit("section/change","spa/create",{create:"CreateItemWizard",collectionAddress:this.props.collectionAddress})},wrapItem:function(t){window.preventItem(t),this.emit("section/change","spa/wrap")},goToItem:function(t){window.preventItem(t),this.emit("section/change","spa/item",{collection:this.props.collection,item:this.props.item})},goToCollection:function(t){window.preventItem(t),this.emit("section/change","spa/collection",{collection:this.props.collection})},render:function(){var t=window.getState(this);return React.createElement("section",{className:"Pager yeahPage"},t.created==="collection"&&React.createElement("section",{className:"AllDoneBro"},React.createElement("h2",null,t.name," is now a real thing!"),React.createElement("figure",null,React.createElement(LazyImageLoader,{src:window.formatLink(t.image)})),React.createElement("p",null,"Spread the word using this link ",React.createElement("a",{onClick:window.copyHREF,href:window.getHomepageLink("?collection="+this.props.collection.address),target:"_blank"},window.getHomepageLink("?collection="+this.props.collection.address))),React.createElement("h2",null,"And now?"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.createItem},"Create the first Item"),React.createElement("p",null,React.createElement("a",{href:"javascript:;",onClick:this.goToCollection},"Go to the Collection page"))),t.created==="item"&&React.createElement("section",{className:"AllDoneBro"},React.createElement("h2",null,"You have successfully created this amazing new ITEM!"),React.createElement("figure",null,React.createElement(LazyImageLoader,{src:window.formatLink(t.image)})),React.createElement("p",null,"Spread the word using this link ",React.createElement("a",{onClick:window.copyHREF,href:window.getHomepageLink("?wrappedItem="+this.props.item.address),target:"_blank"},window.getHomepageLink("?wrappedItem="+this.props.item.address))),React.createElement("h2",null,"And now?"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.createItem},"Create another Item"),React.createElement("p",null,React.createElement("a",{href:"javascript:;",onClick:this.goToItem},"Go to the ITEM page"))),t.created==="wrap"&&React.createElement("section",{className:"AllDoneBro"},React.createElement("h2",null,"You have successfully wrapped ",t.tokenAmount," ",t.name),React.createElement("h2",null,"And now?"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.wrapItem},"Wrap another Item"),React.createElement("p",null,React.createElement("a",{href:"javascript:;",onClick:this.goToItem},"Go to the ITEM page"))))}});var TransferController=function(t){var n=this;n.view=t,n.onCollectionAddressChange=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n.view.setState({selectedCollection:null,objectIds:null});try{e=window.web3.utils.toChecksumAddress(e)}catch(s){e=undefined}if(window.isEthereumAddress(e)){i.next=4;break}return i.abrupt("return");case 4:t=n.view.props.collections&&n.view.props.collections.filter(function(t){return t.address===e})[0],i.t0=t;if(i.t0){i.next=10;break}return i.next=9,window.loadSingleCollection(e,!0);case 9:i.t0=i.sent;case 10:t=i.t0,n.view.setState({selectedCollection:t,objectIds:null},n.view.addObjectIdField);case 12:case"end":return i.stop()}},r,this)}));return t}(),n.performTransfer=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:e=window.getState(n.view),t=e.selectedCollection;if(t){S.next=4;break}return S.abrupt("return");case 4:i=n.view.receiverInput.value;if(!!i&&!!window.isEthereumAddress(i)){S.next=7;break}throw"Receiver must be a valid Ethereum address";case 7:try{s=n.view.payloadInput.value}catch(x){}o={},u=[],a=[],f=!1,l=e.objectIds,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 13:if(!c){S.next=19;break}if(!(h>=l.length)){S.next=16;break}return S.abrupt("break",51);case 16:p=l[h++],S.next=23;break;case 19:h=l.next();if(!h.done){S.next=22;break}return S.abrupt("break",51);case 22:p=h.value;case 23:d=p,v=d.instance,v.errorField.innerHTML="",m=t.items[v.objectIdInput.value];if(m){S.next=31;break}return v.errorField.innerHTML="Item id not valid",f=!0,S.abrupt("continue",49);case 31:return g=m.objectId,o[g]=o[g]||"0",y=v.objectValueInput.value,S.next=36,window.blockchainCall(t.contract.methods.decimals,g);case 36:b=S.sent,w=window.toDecimals(y,b);if(w!=="0"){S.next=42;break}return v.errorField.innerHTML="Amount must be greater than 0",f=!0,S.abrupt("continue",49);case 42:o[g]=window.web3.utils.toBN(o[g]).add(window.web3.utils.toBN(w)).toString();if(!(parseInt(o[g])>parseInt(m.dynamicData.balanceOf))){S.next=47;break}return v.errorField.innerHTML="Total amount to transfer exceedes allowance",f=!0,S.abrupt("continue",49);case 47:u.push(g),a.push(w);case 49:S.next=13;break;case 51:if(!f){S.next=53;break}return S.abrupt("return");case 53:if(u.length!==0){S.next=55;break}throw"At least an Item must be chosen";case 55:return E="safeBatchTransferFrom",e.batch||(E="safeTransferFrom",u=u[0],a=a[0]),S.next=59,window.blockchainCall(t.contract.methods[E],window.walletAddress,i,u,a,s||"0x");case 59:case"end":return S.stop()}},r,this)}));return t}()};var TransferInput=React.createClass({displayName:"TransferInput",max:function(t){window.preventItem(t),this.objectValueInput.value="";try{this.objectValueInput.value=this.props.selectedCollection.items[this.objectIdInput.value].dynamicData.balanceOfPlain}catch(t){}},onItemChange:function(t){var n=this.props.selectedCollection.items[t];if(!n)return this.setState({name:null,symbol:null,balanceOfPlain:null});this.setState({name:n.name,symbol:n.symbol,balanceOfPlain:n.dynamicData&&n.dynamicData.balanceOfPlain||"0"})},render:function(){var t=this,n;return React.createElement("section",{className:"WrapWhatLoaded"},this.props.removeMe&&React.createElement("a",{className:"tokenSelectedToWrapBalanceALL tokenSelectedToWrapBalanceREM",href:"javascript:;",onClick:this.props.removeMe},"X"),React.createElement("input",{className:"SendtoWho",placeholder:"Intem ID",type:"text",ref:function(n){return t.objectIdInput=n},"data-action":"onItemChange",onKeyUp:window.onTextChange,onChange:window.onTextChange}),this.state&&(this.state.name||this.state.symbol)&&React.createElement("h6",{className:"tokenSelectedToWrap"},window.shortenWord(this.state.name,10)," ",this.state.symbol&&this.state.name?" ("+window.shortenWord(this.state.symbol,10)+")":window.shortenWord(this.state.symbol,10)),this.state&&this.state.balanceOfPlain&&React.createElement("span",{className:"tokenSelectedToWrapBalance"},"balance: ",this.state.balanceOfPlain),React.createElement("section",{className:"tokenSelectedToWrapDecide"},React.createElement("a",{className:"tokenSelectedToWrapBalanceALL",href:"javascript:;",onClick:this.max},"MAX"),React.createElement("input",(n={className:"BalancetoWrapSelector",placeholder:"Ammount",type:"text"},n.placeholder="0.00",n.spellcheck="false",n.autocomplete="off",n.autocorrect="off",n.inputmode="decimal",n.pattern="^[0-9][.,]?[0-9]$",n.ref=function(n){return t.objectValueInput=n},n)),React.createElement("span",{className:"Error",ref:function(n){return t.errorField=n}})))}});var Transfer=React.createClass({displayName:"Transfer",requiredScripts:["spa/innerLoader.jsx","spa/loader.jsx","spa/transfer/transferInput.jsx"],getDefaultSubscriptions:function(){var t=this;return{"wallet/update":function(){return t.forceUpdate()},"ethereum/ping":this.resetUI}},resetUI:function(){this.setState({selectedCollection:null})},getOwnedList:function(){var t=window.getState(this);return t&&t.collections&&t.collections.filter(function(e){return e.hasBalance})||undefined},onBatch:function(t){var n=this;n.setState({batch:t.currentTarget.checked},function(){if(!n.state.batch){var e=n.state&&n.state.objectIds&&n.state.objectIds.filter(function(e){return e})||[];e[0]&&(e=[e[0]]),n.setState({objectIds:e})}})},selectCollection:function(t){window.preventItem(t),this.controller.onCollectionAddressChange(this.collectionAddressInput.value=t.currentTarget.dataset.address)},addItem:function(t){window.preventItem(t);var n=this.state.objectIds[this.state.objectIds.length-1];n.instance.objectIdInput.value!==""&&(this.setState({batch:!0}),n=this.addObjectIdField());var r=t.currentTarget.dataset.objectid;setTimeout(function(){n.instance.onItemChange(n.instance.objectIdInput.value=r)},300)},reloadCollection:function(t){window.preventItem(t),this.controller.onCollectionAddressChange(this.collectionAddressInput.value)},onCollectionAddressChange:function(t){var n=this;n.setState({selectedCollection:null},function(){return n.controller.onCollectionAddressChange(t)})},addObjectIdField:function(t){window.preventItem(t);var n=this,r=n.state&&n.state.objectIds&&n.state.objectIds.filter(function(e){return e})||[],i=null,s=window.getState(this);s.key=(new Date).getTime()+""+Math.random(),s.ref=function(e){return i&&(i.instance=e)},r.length&&(s.removeMe=function(){return n.setState({objectIds:n.state&&n.state.objectIds&&n.state.objectIds.filter(function(e){return e!==i})||[]})}),r.push(i=React.createElement(TransferInput,s));var s={objectIds:r};return r.length>1&&(s.batch=!0),n.setState(s),i},actionEnd:function(){},componentDidMount:function(){var t=this;this.props.collectionAddress&&this.controller.onCollectionAddressChange(this.collectionAddressInput.value=this.props.collectionAddress).then(function(){return t.state.objectIds[0].instance.onItemChange(t.state.objectIds[0].instance.objectIdInput.value=t.props.objectId||"")}),window.setHomepageLink("?section=transfer")},render:function(){var t=this,n=this.state||{},r=this.getOwnedList(),i=!1;try{i=$(".wallet").findReactComponent().state.loaded}catch(s){}return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"wrapPage"},React.createElement("section",{className:"wrapBox"},React.createElement("section",{className:"WrapWhat"},React.createElement("p",null,"Transfer Items"),React.createElement("input",{type:"text",className:"SendtoWho",placeholder:"Receiver address",ref:function(n){return t.receiverInput=n}}),React.createElement("p",null,"Choose from Collections list:"),(!r||r.length===0&&!i)&&React.createElement(Loader,null),r&&r.length===0&&i&&React.createElement("h4",null,"You don't own any ITEM"),r&&r.length>0&&React.createElement("ul",{className:"SelectorToGo"},r.map(function(e){return React.createElement("li",{key:e.address},React.createElement("a",{href:"javascript:;","data-address":e.address,onClick:t.selectCollection},window.shortenWord(e.name,25)," ",e.symbol&&e.name?" ("+window.shortenWord(e.symbol,10)+")":window.shortenWord(e.symbol,10)))})),n.selectedCollection&&React.createElement("ul",{className:"SelectorToGoSub"},React.createElement("p",null,"ITEMs:"),Object.values(n.selectedCollection.items).filter(function(e){return e.dynamicData&&e.dynamicData.balanceOf&&e.dynamicData.balanceOf!=="0"}).map(function(e){return React.createElement("li",{key:e.objectId},React.createElement("a",{href:"javascript:;","data-objectId":e.objectId,onClick:t.addItem},window.shortenWord(e.name,25)," ",e.symbol&&e.name?" ("+window.shortenWord(e.symbol,10)+")":window.shortenWord(e.symbol,10)))})),React.createElement("br",null),React.createElement("p",null,"or"),React.createElement("br",null),React.createElement("input",{ref:function(n){return t.collectionAddressInput=n},className:"addressWrapSelector",type:"text",placeholder:"Collection address","data-action":"onCollectionAddressChange",onKeyUp:window.onTextChange,onChange:window.onTextChange}),React.createElement("a",{className:"LoadToITEM",href:"javascript:;",onClick:this.reloadCollection},"Load")),n.selectedCollection&&React.createElement("section",{className:"WrapWhatLoaded"},(n.selectedCollection.name||n.selectedCollection.symbol)&&React.createElement("h6",{className:"tokenSelectedToWrap"},window.shortenWord(n.selectedCollection.name,18)," ",n.selectedCollection.symbol&&n.selectedCollection.name?" ("+window.shortenWord(n.selectedCollection.symbol,10)+")":window.shortenWord(n.selectedCollection.symbol,10)),React.createElement("section",{className:"tokenSelectedToWrapDecide"},n.objectIds&&n.objectIds.length>0&&n.objectIds),React.createElement("label",{className:"isBatch"},React.createElement("input",{type:"checkbox",onChange:this.onBatch,ref:function(t){return t&&(t.checked=n.batch)}}),React.createElement("h5",null,"Batch Transfer")),n.batch&&React.createElement("a",{className:"tokenSelectedToWrapBalanceALL tokenSelectedToWrapBalanceADD",href:"javascript:;",onClick:this.addObjectIdField},"+"),React.createElement("section",{className:"WrapWhatLoaded"},React.createElement("input",{type:"text",className:"SendtoWho",placeholder:"Payload",ref:function(n){return t.payloadInput=n}})),n.performing!=="transfer"&&React.createElement("a",{className:"WrapToITEM"+(n.selectedCollection?"":" disabled"),"data-action":"transfer",onClick:window.perform,href:"javascript:;"},"TRANSFER"),n.performing==="transfer"&&React.createElement(InnerLoader,null)))))}});var WalletController=function(t){var n=this;n.view=t,n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return n.view.setState({loaded:!1},function(){return n.view.emit("wallet/update")}),e=n.view.props.collections.map(function(e){return window.web3.utils.toChecksumAddress(e.address)}),C.next=4,window.loadBlockSearchTranches();case 4:t=C.sent,i=[window.web3.utils.sha3("TransferSingle(address,address,address,uint256,uint256)"),window.web3.utils.sha3("TransferBatch(address,address,address,uint256[],uint256[])")],s=[i,[],[],window.web3.eth.abi.encodeParameter("address",window.walletAddress)],o={},u=[],a=t,f=Array.isArray(a),l=0,a=f?a:a[Symbol.iterator]();case 10:if(!f){C.next=16;break}if(!(l>=a.length)){C.next=13;break}return C.abrupt("break",64);case 13:c=a[l++],C.next=20;break;case 16:l=a.next();if(!l.done){C.next=19;break}return C.abrupt("break",64);case 19:c=l.value;case 20:return h=c,C.next=23,window.getLogs({address:e,topics:s,fromBlock:h[0],toBlock:h[1]});case 23:p=C.sent,d=p,v=Array.isArray(d),m=0,d=v?d:d[Symbol.iterator]();case 25:if(!v){C.next=31;break}if(!(m>=d.length)){C.next=28;break}return C.abrupt("break",62);case 28:g=d[m++],C.next=35;break;case 31:m=d.next();if(!m.done){C.next=34;break}return C.abrupt("break",62);case 34:g=m.value;case 35:y=g,o[y.address]=o[y.address]||{},b=n.view.props.collections.filter(function(e){return e.address===y.address})[0],b.items=b.items||{},w=[],y.topics[0]===i[0]&&(w=[window.web3.eth.abi.decodeParameters(["uint256","uint256"],y.data)[0]]),y.topics[0]===i[1]&&(w=window.web3.eth.abi.decodeParameters(["uint256[]","uint256[]"],y.data)[0]),E=w,S=Array.isArray(E),x=0,E=S?E:E[Symbol.iterator]();case 43:if(!S){C.next=49;break}if(!(x>=E.length)){C.next=46;break}return C.abrupt("break",60);case 46:T=E[x++],C.next=53;break;case 49:x=E.next();if(!x.done){C.next=52;break}return C.abrupt("break",60);case 52:T=x.value;case 53:N=T;if(!o[y.address][N]){C.next=56;break}return C.abrupt("continue",58);case 56:o[y.address][N]=!0,u.push(window.loadItemData(b.items[N]=b.items[N]||{objectId:N,collection:b},b,n.view));case 58:C.next=43;break;case 60:C.next=25;break;case 62:C.next=10;break;case 64:return C.next=66,Promise.all(u);case 66:n.view.setState({loaded:!0},function(){return n.view.emit("wallet/update")});case 67:case"end":return C.stop()}},r,this)}));return t}()};var Wallet=React.createClass({displayName:"Wallet",requiredScripts:["spa/loader.jsx","spa/lazyImageLoader.jsx"],getInitialState:function(){return{loaded:!1}},getList:function(t){return[].concat(t?this.getOwnedList():this.getHostList(),t?this.getHostList():this.getOwnedList())},getHostList:function(){var t=this.getCollections();return t=t.filter(function(e){return e.hasBalance||e.isOwner}),t.filter(function(e){return e.isOwner})},getOwnedList:function(){var t=this.getCollections();return t=t.filter(function(e){return e.hasBalance||e.isOwner}),t.filter(function(e){return e.hasBalance&&!e.isOwner})},getCollections:function(){var t=window.getState(this),n=t.collections.filter(function(e){return e.category==="W20"}),r=t.collections.filter(function(e){return e.category!=="W20"});if(window.context.W1155GroupMode===!0){var i=r.filter(function(e){return e.category==="W1155"});i.forEach(function(e){return r.splice(r.indexOf(e),1)});var s={};for(var o=i,u=Array.isArray(o),a=0,o=u?o:o[Symbol.iterator]();;){var f;if(u){if(a>=o.length)break;f=o[a++]}else{a=o.next();if(a.done)break;f=a.value}var l=f;(s[l.sourceAddress]=s[l.sourceAddress]||[]).push(l)}Object.values(s).forEach(function(e){return r.unshift(e[0])})}return n.push.apply(n,r),n},toggle:function e(t){window.preventItem(t);var n=window.getState(this),r=n.toggle,e=t.currentTarget.dataset.key;e=e===r?null:e;if(e){var i=n.collections.filter(function(t){return t.key===e})[0];i.hasBalance||(e=null)}this.setState({toggle:e})},goToCollection:function(t){window.preventItem(t);var n=window.getState(this),r=n.collections.filter(function(e){return e.key===t.currentTarget.dataset.key})[0];this.emit("wallet/toggle",!1),this.emit("section/change","spa/explore"),this.emit("section/change","spa/collection",{collection:r,collectionAddress:r.address,collections:n.collections})},goToItem:function(t){window.preventItem(t);var n=window.getState(this),r=n.collections.filter(function(e){return e.key===t.currentTarget.dataset.collection})[0],i=r.items[t.currentTarget.dataset.item];this.emit("wallet/toggle",!1),this.emit("section/change","spa/explore"),this.emit("section/change","spa/item",{collection:r,item:i,collections:n.collections})},getDefaultSubscriptions:function(){var t=this;return{"collections/refreshed":function(){return t.controller.loadData()},"ethereum/ping":function(){return t.controller.loadData()},"wallet/update":function(){return t.forceUpdate()}}},render:function(){var t=this,n=window.getState(this);if(!n.wallet)return React.createElement("span",{style:{display:"none"}});var r=n.collections&&this.getHostList()||[],i=n.collections&&this.getOwnedList()||[];return React.createElement("section",{className:"sideALLThing"},React.createElement("a",{className:"BoBoBoaThings",href:"javascript:;",onClick:function(){return t.emit("wallet/toggle",!1)}}),React.createElement("section",{className:"sideThing"},React.createElement("section",{className:"mobileMenuWall OnlyMobileForNow"},React.createElement("section",{className:"menuSelections"},React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"https://ethitem.com/?section=explore",className:"menuSelection BrandizedSSx"},"Explore")),React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"https://ethitem.com/?section=create",className:"menuSelection BrandizedSSx"},"Create")),React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"https://ethitem.com/?section=wrap",className:"menuSelection BrandizedSSx"},"Wrap")),React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"https://ethitem.com/?section=wrap",className:"menuSelection BrandizedSSx"},"Transfer")),React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"https://ethitem.com/?section=farm",className:"menuSelection BrandizedSSx"},"Farm")),React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"/doc.html",className:"menuSelection BrandizedSSx"},"NERD")))),React.createElement("section",{className:"Thewallet"},React.createElement("h2",null,"Hosted"),!n.loaded&&React.createElement(Loader,null),n.loaded&&r.length===0&&React.createElement("h4",null,"You didn't host any ITEM"),n.loaded&&r.length>0&&r.map(function(e){return React.createElement("section",{key:e.key,className:"walletCollection"},React.createElement("section",{className:"walletCollectionOpener"},React.createElement("h5",{className:"walletCollectionOpenerName"},React.createElement("a",{href:"javascript:;","data-key":e.key,onClick:t.toggle},React.createElement("span",{className:"OPENSYMBOL"},"❮")," ",e.name)),React.createElement("a",{className:"WOPENERBTN",href:"javascript:;","data-key":e.key,onClick:t.goToCollection},"Visit"),React.createElement("a",{className:"WOPENERBTN",target:"_blank",href:window.context.openSeaCollectionLinkTemplate.format(e.openSeaName)},"OpenSea")),t.state&&t.state.toggle===e.key&&React.createElement("section",{className:"walletCollectionItems"},e.items&&Object.values(e.items).filter(function(e){return e.dynamicData&&e.dynamicData.balanceOf&&e.dynamicData.balanceOf!=="0"}).map(function(n){return React.createElement("section",{key:n.key,className:"walletCollectionItem"},React.createElement("a",{href:"javascript:;",onClick:t.goToItem,"data-collection":e.key,"data-item":n.key},React.createElement("figure",{className:"collectionIcon",style:{"background-color":n.backgroundImage}},React.createElement(LazyImageLoader,{src:window.getElementImage(n)}),n.dynamicData&&React.createElement("span",{className:"walletCollectionItemQuantity"},window.formatMoney(n.dynamicData.balanceOfPlain,1)))))})))}),React.createElement("h2",null,"Owned"),!n.loaded&&React.createElement(Loader,null),n.loaded&&i.length===0&&React.createElement("h4",null,"You don't own any ITEM"),n.loaded&&i.length>0&&i.map(function(e){return React.createElement("section",{key:e.key,className:"walletCollection"},React.createElement("section",{className:"walletCollectionOpener"},React.createElement("h5",{className:"walletCollectionOpenerName"},React.createElement("a",{href:"javascript:;","data-key":e.key,onClick:t.toggle},React.createElement("span",{className:"OPENSYMBOL"},"❮")," ",e.name)),React.createElement("a",{className:"WOPENERBTN",href:"javascript:;","data-key":e.key,onClick:t.goToCollection},"Visit"),React.createElement("a",{className:"WOPENERBTN",target:"_blank",href:window.context.openSeaCollectionLinkTemplate.format(e.openSeaName)},"OpenSea")),t.state&&t.state.toggle===e.key&&React.createElement("section",{className:"walletCollectionItems"},e.items&&Object.values(e.items).filter(function(e){return e.dynamicData&&e.dynamicData.balanceOf&&e.dynamicData.balanceOf!=="0"}).map(function(n){return React.createElement("section",{key:n.key,className:"walletCollectionItem"},React.createElement("a",{href:"javascript:;",onClick:t.goToItem,"data-collection":e.key,"data-item":n.key},React.createElement("figure",{className:"collectionIcon",style:{"background-color":n.backgroundImage}},React.createElement(LazyImageLoader,{src:window.getElementImage(n)}),n.dynamicData&&React.createElement("span",{className:"walletCollectionItemQuantity"},window.formatMoney(n.dynamicData.balanceOfPlain,1)))))})))}))))}});var WrapController=function(t){var n=this;n.view=t,n.getSelectedToken=function(t){return t||n.view.state&&n.view.state.selectedToken},n.onTokenAddressChange=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:try{t=t||n.view.tokenAddressInput.value}catch(o){}try{t=window.web3.utils.toChecksumAddress(t)}catch(o){t=undefined}if(t){s.next=4;break}return s.abrupt("return",n.view.setState({selectedToken:e!=="ETH"?null:{type:e,name:"Ethereum",symbol:"ETH",decimals:18}},e!=="ETH"?undefined:n.refreshData));case 4:try{n.view.tokenAddressInput.value=t}catch(o){}return i={type:e,address:t,contract:window.newContract(window.context.IERC1155ABI,t),erc20Contract:window.newContract(window.context.IERC20ABI,t),erc721Contract:window.newContract(window.context.IERC721ABI,t),message:""},s.prev=6,s.next=9,window.blockchainCall(i.contract.methods.name);case 9:i.name=s.sent,s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](6);try{i.message=window.context.specialMessages.wrap[e].filter(function(e){return window.web3.utils.toChecksumAddress(e.address)===t})[0].message}catch(o){};case 15:return s.prev=15,s.next=18,window.blockchainCall(i.contract.methods.symbol);case 18:i.symbol=s.sent,s.next=23;break;case 21:s.prev=21,s.t1=s["catch"](15);case 23:return s.prev=23,s.next=26,window.blockchainCall(i.contract.methods.decimals);case 26:i.decimals=s.sent,s.next=31;break;case 29:s.prev=29,s.t2=s["catch"](23);case 31:n.view.setState({selectedToken:i},n.refreshData);case 32:case"end":return s.stop()}},r,this,[[6,12],[15,21],[23,29]])}));return t}(),n.refreshData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.refreshBalanceOf();case 1:case"end":return t.stop()}},r,this)}));return t}(),n.refreshBalanceOf=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=n.getSelectedToken();if(e){r.next=3;break}return r.abrupt("return");case 3:r.prev=3,r.t0=e.decimals;if(r.t0){r.next=9;break}return r.next=8,window.blockchainCall(e.contract.methods.decimals,e.tokenId);case 8:r.t0=r.sent;case 9:e.decimals=r.t0,r.next=14;break;case 12:r.prev=12,r.t1=r["catch"](3);case 14:e.balanceOf="0",e.approved=!0;if(e.type!=="ERC20"){r.next=19;break}return r.next=19,n.refreshBalanceOfERC20(e);case 19:if(e.type!=="ETH"){r.next=25;break}return r.next=22,window.web3.eth.getBalance(window.walletAddress);case 22:e.balanceOf=r.sent,r.next=33;break;case 25:return r.prev=25,r.next=28,window.blockchainCall(e.contract.methods.balanceOf,window.walletAddress,e.tokenId);case 28:e.balanceOf=r.sent,r.next=33;break;case 31:r.prev=31,r.t2=r["catch"](25);case 33:e.balanceOfPlain=n.fromDecimals(e.balanceOf),n.view.setState({selectedToken:e});case 35:case"end":return r.stop()}},r,this,[[3,12],[25,31]])}));return t}(),n.fromDecimals=function(t){var r=n.getSelectedToken(r);if(!r||!t)return;return r.decimals&&window.asNumber(r.decimals)>1&&(t=window.fromDecimals(t,r.decimals,!0)),t},n.toDecimals=function(t){var r=n.getSelectedToken(r);if(!r||!t)return;return r.decimals&&window.asNumber(r.decimals)>1&&(t=window.toDecimals(t,r.decimals)),t.split(",").join("")},n.refreshBalanceOfERC20=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=n.getSelectedToken(e);if(e){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,window.blockchainCall(e.erc20Contract.methods.balanceOf,window.walletAddress);case 6:e.balanceOf=r.sent,r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](3);case 11:return e.allowance="0",r.prev=12,r.next=15,window.blockchainCall(e.erc20Contract.methods.allowance,window.walletAddress,window.currentEthItemERC20Wrapper.options.address);case 15:e.allowance=r.sent,r.next=20;break;case 18:r.prev=18,r.t1=r["catch"](12);case 20:e.approved=parseInt(e.allowance)>=parseInt(e.balanceOf);case 21:case"end":return r.stop()}},r,this,[[3,9],[12,18]])}));return t}(),n.performApprove=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=n.getSelectedToken(e);if(e){r.next=3;break}return r.abrupt("return");case 3:return r.t0=window,r.t1=e.erc20Contract.methods.approve,r.t2=window.currentEthItemERC20Wrapper.options.address,r.next=8,window.blockchainCall(e.erc20Contract.methods.totalSupply);case 8:return r.t3=r.sent,r.next=11,r.t0.blockchainCall.call(r.t0,r.t1,r.t2,r.t3);case 11:case"end":return r.stop()}},r,this)}));return t}(),n.performItemize=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=n.getSelectedToken(e);if(e){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,window.sleep(window.context.inputTimeout);case 5:return i.next=7,n["performItemize"+e.type](e);case 7:return i.next=9,n.view.emit("collections/refresh");case 9:return i.next=11,n.recoverCollectionAndItem(e);case 11:t=i.sent,t.created="wrap",n.view.emit("section/change","spa/successPage",t);case 14:case"end":return i.stop()}},r,this)}));return t}(),n.performItemizeETH=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=n.toDecimals(e.tokenAmount);if(!(parseInt(t)>parseInt(e.balanceOf))){i.next=3;break}throw"Insufficient amount of tokens to wrap";case 3:return i.next=5,window.blockchainCall(t,window.currentEthItemERC20Wrapper.methods.mintETH);case 5:return i.next=7,blockchainCall(window.currentEthItemERC20Wrapper.methods.ETHEREUM_OBJECT_ID);case 7:e.tokenId=i.sent,e.wrappedAddress=window.currentEthItemERC20Wrapper.options.address;case 9:case"end":return i.stop()}},r,this)}));return t}(),n.performItemizeERC20=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=n.toDecimals(e.tokenAmount);if(!(parseInt(t)>parseInt(e.balanceOf))){i.next=3;break}throw"Insufficient amount of tokens to wrap";case 3:return i.next=5,window.blockchainCall(window.currentEthItemERC20Wrapper.methods["mint(address,uint256)"],e.address,t);case 5:return i.next=7,blockchainCall(window.currentEthItemERC20Wrapper.methods.object,e.address);case 7:e.tokenId=i.sent,e.wrappedAddress=window.currentEthItemERC20Wrapper.options.address;case 9:case"end":return i.stop()}},r,this)}));return t}(),n.performItemizeERC1155=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!!e.tokenId&&e.tokenId!==""){u.next=2;break}throw"Token Id is mandatory";case 2:t=n.toDecimals(e.tokenAmount);if(!(parseInt(t)>parseInt(e.balanceOf))){u.next=5;break}throw"Insufficient amount of tokens to wrap";case 5:return i=window.ethItemOrchestrator.options.address,u.prev=6,u.next=9,window.blockchainCall(window.currentEthItemFactory.methods.erc1155WrapperModel);case 9:return s=u.sent[1],u.next=12,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 12:o=u.sent,i=o&&o!==window.voidEthereumAddress?o:i,u.next=18;break;case 16:u.prev=16,u.t0=u["catch"](6);case 18:return u.next=20,window.blockchainCall(e.contract.methods.safeTransferFrom,window.walletAddress,i,e.tokenId,t,"0x");case 20:return u.next=22,window.blockchainCall(window.currentEthItemFactory.methods.erc1155WrapperModel);case 22:return s=u.sent[1],u.next=25,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 25:e.wrappedAddress=u.sent;case 26:case"end":return u.stop()}},r,this,[[6,16]])}));return t}(),n.performItemizeERC721=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t,r,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!!e.tokenId&&e.tokenId!==""){u.next=2;break}throw"Token Id is mandatory";case 2:return u.t0=window.web3.utils,u.next=5,window.blockchainCall(e.erc721Contract.methods.ownerOf,e.tokenId);case 5:return u.t1=u.sent,t=u.t0.toChecksumAddress.call(u.t0,u.t1),u.t2=window.web3.utils,u.next=10,window.blockchainCall(e.erc721Contract.methods.getApproved,e.tokenId);case 10:u.t3=u.sent,r=u.t2.toChecksumAddress.call(u.t2,u.t3);if(t===window.walletAddress||r===window.walletAddress){u.next=14;break}throw"You don't have the permissions to transfer this ERC721 NFT";case 14:return i=window.ethItemOrchestrator.options.address,u.prev=15,u.next=18,window.blockchainCall(window.currentEthItemFactory.methods.erc721WrapperModel);case 18:return s=u.sent[1],u.next=21,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 21:o=u.sent,i=o&&o!==window.voidEthereumAddress?o:i,u.next=27;break;case 25:u.prev=25,u.t4=u["catch"](15);case 27:return u.next=29,window.blockchainCall(e.erc721Contract.methods.safeTransferFrom,window.walletAddress,i,e.tokenId,"0x");case 29:return u.next=31,window.blockchainCall(window.currentEthItemFactory.methods.erc721WrapperModel);case 31:return s=u.sent[1],u.next=34,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 34:e.wrappedAddress=u.sent;case 35:case"end":return u.stop()}},n,this,[[15,25]])}));return t}(),n.recoverCollectionAndItem=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.wrappedAddress=window.web3.utils.toChecksumAddress(e.wrappedAddress),r.next=3,window.loadSingleCollection(e.wrappedAddress);case 3:return t=r.sent,t.items=t.items||{},r.next=7,window.loadItemData(t.items[e.tokenId]=t.items[e.tokenId]||{objectId:e.tokenId,collection:t});case 7:return r.abrupt("return",{collection:t,item:t.items[e.tokenId],name:t.items[e.tokenId].name,tokenAmount:e.tokenAmount||1});case 8:case"end":return r.stop()}},n,this)}));return t}(),n.loadCollectionData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.loadCollectionItems(n.view.state.selectedCollection.address);case 2:e=a.sent,t=[];for(i in e)s=e[i],o=s.objectId,u=n.view.state.selectedCollection,u.items=u.items||{},t.push(window.loadItemData(u.items[o]=u.items[o]||{objectId:o,collection:u},u,n.view));return a.next=7,Promise.all(t);case 7:n.view.setState({loaded:!0});case 8:case"end":return a.stop()}},r,this)}));return t}()};var Wrap=React.createClass({displayName:"Wrap",requiredScripts:["spa/innerLoader.jsx","spa/loader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"ethereum/ping":this.controller.refreshData,"collections/refreshed":function(){return t.forceUpdate()},"wallet/update":function(){return t.forceUpdate()}}},toggleMore:function(t){window.preventItem(t),this.setState({more:!window.getState(this).more})},getOwnedList:function(){var t=window.getState(this),n=this.getSelectedTokenType().split("ERC").join("W");return t&&t.collections&&t.collections.filter(function(e){return e.category===n&&e.hasBalance})||undefined},getSelectedTokenType:function(){return this.state&&this.state.selectedTokenType||window.context.supportedWrappedTokens[0]},reloadToken:function(t){window.preventItem(t),this.controller.onTokenAddressChange(this.getSelectedTokenType())},onTokenTypeChange:function(t){window.preventItem(t);var n=this;this.setState({selectedTokenType:t.currentTarget.value,selectedCollection:null},function(){n.tokenIdInput&&n.onTokenIdChange(n.tokenIdInput.value=""),n.controller.onTokenAddressChange(n.getSelectedTokenType())})},onChange:function(t){window.preventItem(t);var n=t.currentTarget.value,r=this[t.currentTarget.dataset.action],i=t.currentTarget.dataset.action+"Timeout";this[i]&&window.clearTimeout(this[i]),this[i]=setTimeout(function(){return r(n)},window.context.inputTimeout)},onTokenAddressChange:function(t){var n=this;n.setState({selectedToken:null},function(){return n.controller.onTokenAddressChange(n.getSelectedTokenType(),t)})},onTokenIdChange:function(t){if(!this.state||!this.state.selectedToken)return;this.state.selectedToken.tokenId=t,this.controller.refreshBalanceOf()},onTokenAmountChange:function(t){if(!this.state||!this.state.selectedToken)return;this.state.selectedToken.tokenAmount=t},max:function(t){window.preventItem(t);if(!this.state||!this.state.selectedToken||!this.state.selectedToken.balanceOfPlain)return;this.tokenAmountInput.value=this.state.selectedToken.tokenAmount=this.state.selectedToken.balanceOfPlain.split(",").join(""),this.setState({selectedToken:this.state.selectedToken})},actionEnd:function(){this.controller.refreshData()},componentDidMount:function(){var t=this;t.setState({selectedTokenType:t.props.selectedTokenType||t.getSelectedTokenType(),selectedCollection:t.props.collectionAddress?t.props.collections.filter(function(e){return e.address===t.props.collectionAddress})[0]:null},function(){t.controller.onTokenAddressChange(t.state.selectedTokenType,t.props.sourceAddress).then(function(){if(!t.tokenIdInput||!t.props.tokenId||t.state.selectedCollection&&t.state.selectedCollection.category==="W721")return;t.onTokenIdChange(t.tokenIdInput.value=t.props.tokenId)})}),window.setHomepageLink("?section=wrap")},selectCollection:function(t){window.preventItem(t);var n=this,r=n.props.collections.filter(function(e){return e.address===t.currentTarget.dataset.address})[0];n.setState({selectedTokenType:r.category.split("W").join("ERC"),selectedCollection:r,more:!1},function(){r.sourceAddress&&r.sourceAddress!=="blank"&&n.controller.onTokenAddressChange(n.getSelectedTokenType(),r.sourceAddress),n.tokenIdInput&&n.onTokenIdChange(n.tokenIdInput.value="")})},selectCollectionItem:function(t){window.preventItem(t);var n=this,r=n.state.selectedCollection,i=r.items[t.currentTarget.dataset.objectid],s=i.sourceAddress&&i.sourceAddress!=="blank"?i.sourceAddress:r.sourceAddress;n.controller.onTokenAddressChange(n.getSelectedTokenType(),s).then(function(){if(!n.tokenIdInput||!i.objectId)return;n.onTokenIdChange(n.tokenIdInput.value=i.objectId)})},render:function(){var t=this,n,r=this.getSelectedTokenType(),i=this.state||{},s=this.getOwnedList(),o=function(t){return t.dynamicData&&t.dynamicData.balanceOf&&t.dynamicData.balanceOf!=="0"&&(t.sourceAddress&&t.sourceAddress!=="blank"&&t.sourceAddress!==window.voidEthereumAddress||i.selectedCollection.sourceAddress&&i.selectedCollection.sourceAddress!=="blank"&&i.selectedCollection.sourceAddress!==window.voidEthereumAddress)},u=!1;try{u=$(".wallet").findReactComponent().state.loaded}catch(a){}return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"wrapPage"},React.createElement("section",{className:"wrapBox"},React.createElement("section",{className:"WrapWhat"},React.createElement("p",null,"Wrap Tokens as Items"),React.createElement("br",null),React.createElement("select",{onChange:this.onTokenTypeChange},window.context.supportedWrappedTokens.map(function(e){return React.createElement("option",{key:e,selected:r===e,value:e},e)})),r!=="ETH"&&React.createElement("section",{className:"SelectorToGo"},React.createElement("h3",null,"Choose from Collections list:"),(!s||s.length===0&&!u)&&React.createElement(Loader,null),s&&s.length===0&&u&&React.createElement("h4",null,"You don't own any ITEM"),s&&s.length>0&&React.createElement("ul",null,s.map(function(e){return React.createElement("li",{key:e.address},React.createElement("a",{href:"javascript:;","data-address":e.address,onClick:t.selectCollection},window.shortenWord(e.name,25)," ",e.symbol&&e.name?" ("+window.shortenWord(e.symbol,10)+")":window.shortenWord(e.symbol,10)))}))),i.selectedCollection&&i.selectedCollection.category!=="W721"&&React.createElement("section",{className:"SelectorToGoSub"},React.createElement("h3",null,"Items:"),(!i.selectedCollection.items||Object.keys(i.selectedCollection.items).length===0)&&React.createElement(Loader,null),i.selectedCollection.items&&Object.keys(i.selectedCollection.items).length>0&&React.createElement("ul",null,Object.values(i.selectedCollection.items).filter(o).map(function(e){return React.createElement("li",{key:e.objectId},React.createElement("a",{href:"javascript:;","data-objectId":e.objectId,onClick:t.selectCollectionItem},window.shortenWord(e.sourceName,25)," ",e.sourceSymbol&&e.sourceName?" ("+window.shortenWord(e.sourceSymbol,10)+")":window.shortenWord(e.sourceSymbol,10)))}))),r!=="ETH"&&React.createElement("a",{href:"javascript:;",className:"MoreButtonG",onClick:this.toggleMore},"More"),React.createElement("br",null),i.more&&r!=="ETH"&&React.createElement("input",{ref:function(n){return(t.tokenAddressInput=n)&&(n.value=i.selectedToken&&i.selectedToken.address||"")},className:"addressWrapSelector",type:"text",placeholder:"Token address","data-action":"onTokenAddressChange",onKeyUp:this.onChange,onChange:this.onChange}),i.more&&r!=="ETH"&&React.createElement("a",{className:"LoadToITEM",href:"javascript:;",onClick:this.reloadToken},"Load")),React.createElement("section",{className:"WrapWhatLoaded"},i.selectedToken&&(i.selectedToken.name||i.selectedToken.symbol)&&React.createElement("h6",{className:"tokenSelectedToWrap"},window.shortenWord(i.selectedToken.name,10)," ",i.selectedToken.symbol&&i.selectedToken.name?" ("+window.shortenWord(i.selectedToken.symbol,10)+")":window.shortenWord(i.selectedToken.symbol,10)),i.selectedToken&&i.selectedToken.message&&React.createElement("p",null,React.createElement("b",null,"Please pay attention: "),i.selectedToken.message),i.selectedToken&&r!=="ERC20"&&r!=="ETH"&&React.createElement("section",{className:"tokenSelectedToWrapDecide"},React.createElement("input",{ref:function(n){return t.tokenIdInput=n},className:"BalancetoWrapSelector",placeholder:"Token ID",type:"text","data-action":"onTokenIdChange",onKeyUp:this.onChange,onChange:this.onChange})),i.selectedToken&&r!=="ERC721"&&i.selectedToken&&i.selectedToken.balanceOfPlain&&React.createElement("span",{className:"tokenSelectedToWrapBalance"},"balance: ",i.selectedToken.balanceOfPlain),i.selectedToken&&r!=="ERC721"&&React.createElement("section",{className:"tokenSelectedToWrapDecide"},React.createElement("a",{className:"tokenSelectedToWrapBalanceALL",onClick:this.max},"MAX"),React.createElement("input",(n={ref:function(n){return t.tokenAmountInput=n},className:"BalancetoWrapSelector",placeholder:"Ammount",type:"text"},n.placeholder="0.00",n.spellcheck="false",n.autocomplete="off",n.autocorrect="off",n.inputmode="decimal",n.pattern="^[0-9][.,]?[0-9]$",n["data-action"]="onTokenAmountChange",n.onKeyUp=this.onChange,n.onChange=this.onChange,n))),r==="ERC20"&&i.performing!=="approve"&&React.createElement("a",{className:"BeforeToWrapToITEM"+(!i.selectedToken||i.selectedToken.approved?" disabled":""),"data-action":"approve",onClick:window.perform,href:"javascript:;"},"Approve"),r==="ERC20"&&i.performing==="approve"&&React.createElement(InnerLoader,null),i.performing!=="itemize"&&React.createElement("a",{className:"WrapToITEM"+(!i.selectedToken||!i.selectedToken.approved?" disabled":""),"data-action":"itemize",onClick:window.perform,href:"javascript:;"},"ITEMIZE"),i.performing==="itemize"&&React.createElement(InnerLoader,null)))))}});